(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36b4639a"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("b64b");function r(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}function n(e,t){if(null==e)return{};var a,n,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},"77e4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-layout",{attrs:{id:"components-layout-demo-fixed-sider"}},[a("a-layout-sider",{style:{overflow:"auto",height:"calc(100vh - 137px)",position:"fixed",left:1,background:"white"}},[e.deptData.length?a("a-tree",{attrs:{"show-line":"",defaultExpandAll:e.treeExpand,treeData:e.deptData},on:{select:e.onTreeSelect}}):e._e()],1),a("a-layout",{style:{marginLeft:"212px"}},[a("a-layout-content",{style:{width:"calc(100% - 208px - 24px - 200px - 12px - 24px)",height:"calc(100vh - 137px)",overflow:"auto",background:"white",padding:"24px",position:"fixed",left:1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"登录名称"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:""},model:{value:e.queryParam.userName,callback:function(t){e.$set(e.queryParam,"userName",t)},expression:"queryParam.userName"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{"allow-clear":""},model:{value:e.queryParam.phonenumber,callback:function(t){e.$set(e.queryParam,"phonenumber",t)},expression:"queryParam.phonenumber"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"用户状态"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("所有")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"2"}},[e._v("停用")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:e.resetQueryParams}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("添加")]),a("a-button",{attrs:{type:"primary",icon:"edit",disabled:1!==e.selectedRowKeys.length},on:{click:function(t){return e.handleEdit()}}},[e._v("修改")]),a("a-button",{attrs:{type:"primary",icon:"delete",disabled:0===e.selectedRowKeys.length},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"userId",columns:e.columns,data:e.loadData,alert:!1,rowSelection:e.rowSelection,showPagination:"auto"},scopedSlots:e._u([{key:"status",fn:function(t,r,n){return a("span",{},[a("a-switch",{attrs:{loading:n===e.switchIndex,checked:e._f("userStatus")(r)},on:{change:function(a){return e.onStatusChange(a,t,r,n)}}})],1)}},{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleDelete(r)}}},[e._v("删除")])]],2)}}])})],1)],1)],1),a("user-edit",{ref:"createModal",attrs:{visible:e.modalVisible,loading:e.confirmLoading,model:e.modalData},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},n=[],o=a("5530"),s=(a("159b"),a("d81d"),a("a15b"),a("d3b7"),a("c1df")),i=a.n(s),l=a("2af9"),u=a("8593"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.editType,width:840,maskClosable:!1,visible:e.visible,confirmLoading:e.spinning,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(){e.handleSubmit()},cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"用户名称"}},"a-form-item",e.formLayout1,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickName",{initialValue:e.userInfo.nickName,rules:[{required:!0,message:"必填"}]}],expression:"['nickName', { initialValue: userInfo.nickName, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":"",name:"nickName",placeholder:"请输入用户名"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"归属部门"}},"a-form-item",e.formLayout1,!1),[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptId",{initialValue:e.userInfo.deptId,rules:[{required:!0,message:"必填"}]}],expression:"['deptId', { initialValue: userInfo.deptId, rules: [{ required: true, message: '必填' }] }]"}],staticStyle:{width:"100%"},attrs:{"show-search":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},treeData:e.deptData,"tree-default-expand-all":"",name:"deptId",placeholder:"请选择归属部门",treeNodeFilterProp:"label"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"手机号码"}},"a-form-item",e.formLayout1,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phonenumber",{initialValue:e.userInfo.phonenumber,rules:[{required:!0,message:"必填"}]}],expression:"['phonenumber', {initialValue: userInfo.phonenumber, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":"",name:"phonenumber",placeholder:"请输入手机号码"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"邮箱"}},"a-form-item",e.formLayout1,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{initialValue:e.userInfo.email,rules:[{required:!0,message:"必填"}]}],expression:"['email', {initialValue: userInfo.email, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":"",name:"email",placeholder:"请选择邮箱"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"登录账号"}},"a-form-item",e.formLayout1,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{initialValue:e.userInfo.userName,rules:[{required:!0,message:"必填",validateTrigger:"blur"}]}],expression:"['userName', { initialValue: userInfo.userName, rules: [{ required: true, message: '必填', validateTrigger: 'blur' }] }]"}],attrs:{"allow-clear":"",disabled:!!e.userId,name:"userName",placeholder:"请输入登录账号"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[e.userId?e._e():a("a-form-item",e._b({attrs:{label:"登录密码"}},"a-form-item",e.formLayout1,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{initialValue:e.userInfo.password,rules:[{required:!0,message:"必填"}]}],expression:"['password', { initialValue: userInfo.password, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":"",name:"password",placeholder:"不填则使用默认密码: 123456"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"用户性别"}},"a-form-item",e.formLayout1,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["sex",{initialValue:e.userInfo.sex||"0"}],expression:"['sex', { initialValue: userInfo.sex || '0' }]"}],attrs:{"allow-clear":"",name:"sex",placeholder:"请选择"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("男")]),a("a-select-option",{attrs:{value:"1"}},[e._v("女")]),a("a-select-option",{attrs:{value:"2"}},[e._v("未知")])],1)],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"岗位"}},"a-form-item",e.formLayout1,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["postIds",{initialValue:e.userInfo.postIds}],expression:"['postIds', { initialValue: userInfo.postIds }]"}],staticStyle:{width:"100%"},attrs:{mode:"multiple","allow-clear":"",name:"postIds",placeholder:"请选择岗位",options:e.postData,filterOption:e.selectFilter}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"角色"}},"a-form-item",e.formLayout1,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleIds",{initialValue:e.userInfo.roleIds}],expression:"['roleIds', { initialValue: userInfo.roleIds }]"}],staticStyle:{width:"100%"},attrs:{"allow-clear":"",mode:"multiple",placeholder:"请选择角色",options:e.roleData,name:"roleIds",filterOption:e.selectFilter}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",e._b({attrs:{label:"是否有效"}},"a-form-item",e.formLayout1,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.userInfo.status||"0",rules:[{required:!0,message:"必填"}]}],expression:"['status', { initialValue: userInfo.status || '0', rules: [{ required: true, message: '必填' }] }]"}]},[a("a-radio",{attrs:{value:"0"}},[e._v("是")]),a("a-radio",{attrs:{value:"1"}},[e._v("否")])],1)],1)],1)],1)],1)],1)],1)},c=[],m=a("15fd"),f=(a("3ca3"),a("ddb0"),["nickName","deptId","phonenumber","email","userName","password","sex","postIds","roleIds","status"]),p={name:"UserEdit",props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{md:{span:4},xs:{span:24}},wrapperCol:{md:{span:20},xs:{span:24}}},this.formLayout1={labelCol:{md:{span:8},xs:{span:24}},wrapperCol:{md:{span:16},xs:{span:24}}},{spinning:!1,deptData:[],postData:[],roleData:[],userInfo:{},form:this.$form.createForm(this),userId:"",editType:"添加"}},created:function(){var e=this;f.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("visible",(function(t,a){if(t){e.editType=e.model.userId?"修改":"添加",e.userId=e.model.userId;var r=[];e.deptData.length||r.push("getDeptData"),e.postData.length||r.push("getPostData"),e.roleData.length||r.push("getRoleData"),e.userId&&r.push("getUserInfo"),e.spinning=!0,Promise.all(r.map((function(t){return e[t]()}))).then((function(t){e.spinning=!1}))}else e.userInfo={}}))},mounted:function(){},methods:{getDeptData:function(){var e=this;return u["a"].deptList({status:-1}).then((function(t){function a(e){var t={value:e.deptId,label:e.deptName,order:e.orderNum,children:[]};return e.children&&e.children.forEach((function(e){t.children.push(a(e))})),t.children.sort((function(e,t){return e.order-t.order})),t}e.deptData=t.depts.map((function(e){return a(e)})),e.deptData.sort((function(e,t){return e.order-t.order})),e.treeExpand=!0}))},getPostData:function(){var e=this;return u["a"].postList({status:0}).then((function(t){e.postData=t.posts.map((function(e){var t={value:e.postId,label:e.postName,order:e.postSort};return t})),e.postData.sort((function(e,t){return e.order-t.order}))}))},getRoleData:function(){var e=this;return u["a"].simpleRoleList({}).then((function(t){e.roleData=t.roleList.map((function(e){var t={value:e.roleId,label:e.roleName,order:e.roleSort};return t})),e.roleData.sort((function(e,t){return e.order-t.order}))}))},getUserInfo:function(){var e=this;return u["a"].userInfo({userId:this.userId}).then((function(t){t.postIds=t.postIds.map((function(e){return e.postId})),t.roleIds=t.roleIds.map((function(e){return e.roleId})),e.userInfo=t}))},handleSubmit:function(e){var t=this;this.form.validateFields((function(e,a){if(!e){var r=a.postIds,n=a.roleIds,o=Object(m["a"])(a,["postIds","roleIds"]);t.userId&&(o.userId=t.userId),r&&(o.postIds=r.join(",")),o.roleIds=n?n.join(","):"1";var s=t.userId?"updateUser":"addUser";t.spinning=!0,u["a"][s](o).then((function(e){t.$message.info("操作成功"),t.$emit("ok")})).finally((function(){t.spinning=!1}))}}))},goBack:function(){this.$router.go(-1)},selectFilter:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},h=p,v=a("2877"),b=Object(v["a"])(h,d,c,!1,null,null,null),I=b.exports,g=[{title:"用户ID",dataIndex:"userId",ellipsis:!0},{title:"登录名称",dataIndex:"userName",ellipsis:!0},{title:"用户名称",dataIndex:"nickName",ellipsis:!0},{title:"部门",dataIndex:"deptName",ellipsis:!0},{title:"手机",dataIndex:"phonenumber",ellipsis:!0},{title:"用户状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",scopedSlots:{customRender:"action"}}],w={name:"UserList",components:{STable:l["c"],UserEdit:I},data:function(){var e=this;return this.columns=g,{modalVisible:!1,confirmLoading:!1,modalData:{},queryParam:{status:"0"},loadData:function(t){var a=Object.assign({},t,e.queryParam);return a.pageNum=t.pageNo,delete a.pageNo,a.status-=1,a.deptId=e.selectedTree,u["a"].userList(a).then((function(a){if("0000"===a.responseCode)return a.totalCount=+a.total,a.pageNo=+t.pageNo,a.data=a.users,e.onSelectChange([],[]),a})).catch((function(){}))},selectedRowKeys:[],selectedRows:[],treeExpand:!0,deptData:[],switchIndex:"",selectedTree:""}},filters:{userStatus:function(e){return"0"===e.status}},created:function(){var e=this;this.$root.eventHub.$on("refreshView",(function(){e.$refs.table&&(e.$refs.table.refresh(),e.getDeptData())})),this.getDeptData()},beforeRouteLeave:function(e,t,a){this.$root.eventHub.$off("refreshView"),a()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{getDeptData:function(){var e=this;u["a"].deptList({status:-1}).then((function(t){function a(e){var t={key:e.deptId,title:e.deptName,order:e.orderNum,children:[]};return e.children&&e.children.forEach((function(e){t.children.push(a(e))})),t.children.sort((function(e,t){return e.order-t.order})),t}e.deptData=t.depts.map((function(e){return a(e)})),e.deptData.sort((function(e,t){return e.order-t.order})),e.treeExpand=!0}))},onTreeSelect:function(e,t){this.selectedTree=e[0],this.$refs.table.refresh()},handleAdd:function(){this.modalData={},this.modalVisible=!0},handleEdit:function(e){if(e)e.userId;else{if(!this.selectedRowKeys.length)return;this.selectedRowKeys[0],this.selectedRows[0].userId}this.modalData=Object(o["a"])({},e),this.modalVisible=!0},handleOk:function(){this.confirmLoading=!0,this.$refs.table.refresh(),this.handleCancel()},handleCancel:function(){this.modalVisible=!1,this.confirmLoading=!1,this.modalData={};var e=this.$refs.createModal.form;e.resetFields()},handleDelete:function(e){var t=this;this.$confirm({title:"系统提示",content:"确认删除？",okText:"确认",cancelText:"取消",onOk:function(){t.doDelete(e)},onCancel:function(){}})},doDelete:function(e){var t=this,a="";if(e)a=e.userId;else{if(!this.selectedRowKeys.length)return;a=this.selectedRowKeys.join(",")}u["a"].deleteUsers({userIds:a}).then((function(e){t.$refs.table.refresh(),t.$message.info("删除成功")}))},handleReset:function(e){},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},resetSearchForm:function(){this.queryParam={date:i()(new Date)}},onStatusChange:function(e,t,a,r){var n=this;this.switchIndex=r;var o={userId:a.userId,status:"0"===a.status?"1":"0"};u["a"].updateUser(o).then((function(e){a.status="0"===a.status?"1":"0"})).finally((function(){n.switchIndex=""}))},resetQueryParams:function(){this.queryParam={status:"0"},this.$refs.table.refresh(!0)}}},y=w,x=Object(v["a"])(y,r,n,!1,null,null,null);t["default"]=x.exports},8593:function(e,t,a){"use strict";var r=a("a417"),n="https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",o=Object({NODE_ENV:"production",VUE_APP_PREVIEW:"false",VUE_APP_OUTPUT:"",VUE_APP_API_BASE:"https://mservice.xincaitong.com/KolPlatformWeb/kolPlatform.jhtml",VUE_APP_API_SYSTEM:"https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",VUE_APP_API_SMS:"https://mservice.xincaitong.com/WtSmsCenter/sms.jhtml",VUE_APP_API_RECORD:"https://mservice.xincaitong.com/WtDataWeb/data.jhtml",VUE_APP_API_TA:"https://margin.xincaitong.com/WtmpGateway",VUE_APP_API_ETFGRID:"https://mservice.xincaitong.com/WtPhoenixGateway/",VUE_APP_API_WX:"https://mservice.xincaitong.com/WtWxPluginWeb/wx.jhtml",VUE_APP_API_MOCK_URL:"/api",BASE_URL:""}).VUE_APP_GAMEID||"eagleeye";function s(e){var t=r["b"].network(e,n);return t}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0",n=r["b"].genParams(o,e,t,a);return n}t["a"]={captchaImage:function(e){var t=i("captchaImage",e);return s(t)},login:function(e){var t=i("login",e);return s(t)},updatePwd:function(e){var t=i("updatePwd",e);return s(t)},resetPwd:function(e){var t=i("resetPwd",e);return s(t)},userList:function(e){var t=i("userList",e);return s(t)},addUser:function(e){var t=i("addUser",e);return s(t)},userInfo:function(e){var t=i("userInfo",e);return s(t)},updateUser:function(e){var t=i("updateUser",e);return s(t)},deleteUsers:function(e){var t=i("batchRemoveUser",e);return s(t)},postList:function(e){var t=i("postList",e);return s(t)},addPost:function(e){var t=i("addPost",e);return s(t)},postInfo:function(e){var t=i("postInfo",e);return s(t)},updatePost:function(e){var t=i("updatePost",e);return s(t)},deletePosts:function(e){var t=i("batchRemovePost",e);return s(t)},deptList:function(e){var t=i("deptList",e);return s(t)},addDept:function(e){var t=i("addDept",e);return s(t)},deptInfo:function(e){var t=i("deptInfo",e);return s(t)},updateDept:function(e){var t=i("updateDept",e);return s(t)},deleteDept:function(e){var t=i("removeDept",e);return s(t)},menuList:function(e){var t=i("menuList",e);return s(t)},addMenu:function(e){var t=i("addMenu",e);return s(t)},menuInfo:function(e){var t=i("menuInfo",e);return s(t)},updateMenu:function(e){var t=i("updateMenu",e);return s(t)},deleteMenu:function(e){var t=i("removeMenu",e);return s(t)},logoout:function(e){var t=i("logout",e);return s(t)},simpleRoleList:function(e){var t=i("roleBriefList",e);return s(t)},roleList:function(e){var t=i("roleList",e);return s(t)},addRole:function(e){var t=i("addRole",e);return s(t)},updateRole:function(e){var t=i("updateRole",e);return s(t)},deleteRoles:function(e){var t=i("batchRemoveRole",e);return s(t)},roleMenuData:function(e){var t=i("roleMenuTreeSelect",e);return s(t)},roleUsersAssociated:function(e){var t=i("allocatedList",e);return s(t)},roleUsersUnassociated:function(e){var t=i("unallocatedList",e);return s(t)},associateRoleUsers:function(e){var t=i("selectAuthUserAll",e);return s(t)},disassociateRoleUsers:function(e){var t=i("cancelAuthUserAll",e);return s(t)}}}}]);
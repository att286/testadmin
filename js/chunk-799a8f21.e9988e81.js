(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-799a8f21"],{"0d54":function(t,e,a){},"4ae6":function(t,e,a){"use strict";a.d(e,"t",(function(){return r})),a.d(e,"o",(function(){return d})),a.d(e,"y",(function(){return u})),a.d(e,"z",(function(){return m})),a.d(e,"A",(function(){return v})),a.d(e,"B",(function(){return h})),a.d(e,"C",(function(){return f})),a.d(e,"D",(function(){return p})),a.d(e,"m",(function(){return w})),a.d(e,"q",(function(){return x})),a.d(e,"r",(function(){return I})),a.d(e,"s",(function(){return C})),a.d(e,"f",(function(){return g})),a.d(e,"b",(function(){return N})),a.d(e,"n",(function(){return R})),a.d(e,"p",(function(){return y})),a.d(e,"c",(function(){return k})),a.d(e,"u",(function(){return H})),a.d(e,"x",(function(){return A})),a.d(e,"w",(function(){return T})),a.d(e,"v",(function(){return M})),a.d(e,"g",(function(){return Y})),a.d(e,"j",(function(){return O})),a.d(e,"l",(function(){return F})),a.d(e,"k",(function(){return U})),a.d(e,"e",(function(){return E})),a.d(e,"h",(function(){return L})),a.d(e,"i",(function(){return z})),a.d(e,"a",(function(){return V})),a.d(e,"d",(function(){return j}));a("b680"),a("7db0"),a("99af");var n=a("c1df"),i=a.n(n),r=[{key:"regNum",dataType:"num",title:"注册总数",tip:"在开户链接登记过手机号的用户总数"},{key:"openNum",dataType:"num",title:"开户总数",tip:"点击开户链接后开户成功的用户总数"},{key:"creditNum",dataType:"num",title:"入金总数",tip:"开户成功后向券商账户转入资金的人数"}],d=[{key:"orderNum",dataType:"num",title:"会员订单数",tip:"支付成功的订单数，仅包含由梧桐收款的订单"},{key:"refundNum",dataType:"num",title:"退费订单数",tip:"已经完成退费的订单数"},{key:"orderAmount",dataType:"amount",title:"订单总金额",tip:"会员订单总金额减去退费订单总金额"}];function l(t){return{style:{"background-color":"#FCEFF0"}}}function s(t){return t||0==t?o(t):"/"}function o(t){return void 0!==t?isNaN(parseFloat(t))?t:parseFloat(t).toFixed(2):t}function c(t,e,a){return{children:t,attrs:{rowSpan:e.rowSpan||0}}}var u=[{title:"结算月份",dataIndex:"monthStr",key:"monthStr",width:180,customRender:c},{title:"结算日期",dataIndex:"settlementDateStr",width:180,scopedSlots:{customRender:"settlementDate"}},{title:"结算额(元)",dataIndex:"totalSettlement",width:140,customCell:l,customHeaderCell:l,scopedSlots:{customRender:"totalSettlement"}},{title:"会员业务结算收入(元)",dataIndex:"memberSettlement",width:170,customRender:o,scopedSlots:{customRender:"normalAmount"}},{title:"A股业务结算收入(元)",dataIndex:"brokerASettlement",width:170,customRender:o,scopedSlots:{customRender:"normalAmount"}},{title:"港股业务结算收入(元)",dataIndex:"brokerHkSettlement",width:170,customRender:o,scopedSlots:{customRender:"normalAmount"}},{title:"保险业务结算收入(元)",dataIndex:"insuranceSettlement",width:170,customRender:o,scopedSlots:{customRender:"normalAmount"}},{title:"其他结算收入(元)",dataIndex:"otherSettlement",width:140,customRender:o,scopedSlots:{customRender:"normalAmount"}},{title:"历史结算减扣项目(元)",dataIndex:"deductHistoryAmount",width:170,customRender:function(t,e){return e.isTotal?"/":o(t)}},{title:"操作",dataIndex:"",width:140,scopedSlots:{customRender:"action"}}],m=[{title:"券商名称",dataIndex:"brokerName",className:"tableHeader",width:120},{title:"业务收入(元)",dataIndex:"settlementAmount",align:"left",className:"tableHeader",width:140,customRender:o},{title:"开户数",dataIndex:"openNum",align:"left",className:"tableHeader",width:100},{title:"有效户数",dataIndex:"validNum",align:"left",className:"tableHeader",width:100},{title:"开户奖励(元)",dataIndex:"openAward",align:"left",className:"tableHeader",width:120,customRender:o},{title:"有效户奖励(元)",dataIndex:"validAward",align:"left",className:"tableHeader",width:140,customRender:o},{title:"交易佣金分成(元)",dataIndex:"tradeAward",align:"left",className:"tableHeader",width:140,customRender:s}],v=[{title:"券商名称",dataIndex:"brokerName",className:"tableHeader",width:120},{title:"业务收入(元)",dataIndex:"settlementAmount",align:"left",className:"tableHeader",width:140,customRender:o},{title:"开户数",dataIndex:"openNum",align:"left",className:"tableHeader",width:100},{title:"有效户数",dataIndex:"validNum",align:"left",className:"tableHeader",width:100},{title:"开户奖励(元)",dataIndex:"openAward",align:"left",className:"tableHeader",width:120,customRender:o},{title:"有效户奖励(元)",dataIndex:"validAward",align:"left",className:"tableHeader",width:140,customRender:o},{title:"交易佣金分成(元)",dataIndex:"tradeAward",align:"left",className:"tableHeader",width:140,customRender:s},{title:"融资打新分成(元)",dataIndex:"purchaseNewpAward",align:"left",className:"tableHeader",width:140,customRender:o}],h=[{title:"保险公司名称",dataIndex:"companyName",className:"tableHeader",width:140},{title:"开罐产品类型",dataIndex:"productName",className:"tableHeader",width:140},{title:"业务收入(元)",dataIndex:"insuranceIncome",align:"left",className:"tableHeader",width:140,customRender:o},{title:"开罐数量",dataIndex:"openNum",align:"left",className:"tableHeader",width:100}],f=[{title:"业务类型",dataIndex:"memberType",className:"tableHeader",width:140,customRender:function(){return"会员业务"}},{title:"新增会员数",dataIndex:"newMemberNum",className:"tableHeader",width:140},{title:"当期会员收入(元)",dataIndex:"newMemberIncome",className:"tableHeader",width:140,customRender:o,customCell:function(t){return D(t,"newMemberIncome")}}],p=[{title:"详情",dataIndex:"settlementType",width:140},{title:"结算金额(元)",dataIndex:"settlementAmount",width:140,customRender:o,customCell:function(t){return D(t,"settlementAmount")}}];var w=[{title:"营销内容",dataIndex:"marketingInfo",width:220},{title:"营销成本",dataIndex:"marketingCost",align:"left",width:120},{title:"渠道承担比例",dataIndex:"channelRatio",align:"left",width:120},{title:"渠道承担成本",dataIndex:"channelCost",align:"left",width:120}],x=[{title:"券商名称",dataIndex:"brokerName",width:120},{dataIndex:"dataEndDate",slots:{title:"customHead_dataEndDate"},align:"center",customRender:function(t){return t?i()(t,"YYYYMMDD").format("YYYY-MM-DD"):"/"},width:120},{title:"注册数",dataIndex:"regNum",align:"left",width:100},{title:"开户数",dataIndex:"openNum",align:"left",width:100},{dataIndex:"openInversionRate",slots:{title:"customHead_openInversionRate"},align:"left",width:100,customRender:b},{title:"入金数",dataIndex:"creditNum",align:"left",width:100},{dataIndex:"creditInversionRate",slots:{title:"customHead_creditInversionRate"},align:"left",width:100,customRender:_}],I=[{title:"机构名称",dataIndex:"brokerName",scopedSlots:{customRender:"brokerName"}},{title:"已完成的最新结算账期",dataIndex:"settlementCycle",align:"center",scopedSlots:{customRender:"settlementCycle"}},{title:"当前结算状态",dataIndex:"settlementState",align:"center",scopedSlots:{customRender:"settlementState"}}],C=[{label:"全部回款",value:1,tip:"当前机构已回款，未进行渠道结算"},{label:"部分回款",value:2,tip:"当前机构仅部分回款，未进行渠道结算"},{label:"回款中",value:3,tip:"当前机构数据已收到，发票已开具"},{label:"对账中",value:4,tip:"当前机构数据已收到，未开具发票"},{label:"对账未开启",value:5,tip:"当前机构数据未收到"},{label:"结算完成",value:6,tip:"当前机构已回款，渠道结算已完成"},{label:"垫款结算",value:7,tip:"当前机构未回款/部分回款/未对账，渠道已经进行垫付结算"}];function g(t){var e=C.find((function(e){return e.value===t}));return e?e.label:"-"}var N=[{title:"详情 ",dataIndex:"costDes",width:220},{title:"营销总费用(元)",dataIndex:"totalCost",align:"left",width:140,customRender:o},{title:"费用付款方",dataIndex:"payer",align:"left",width:120,customRender:function(t){return 0===t?"梧桐花开":"渠道方"}},{title:"渠道应结算(元)",dataIndex:"channelCost",align:"left",width:140,customRender:o,customCell:function(t){return D(t,"channelCost")}}];function b(t,e){return 0===parseInt(e.regNum)||e.regNum<0||e.openNum<0?"-":t.toFixed(2)+"%"}function _(t,e){return 0===parseInt(e.openNum)||e.openNum<0||e.creditNum<0?"-":t.toFixed(2)+"%"}var R=[{title:"用户手机号",dataIndex:"phoneNo",width:120},{title:"用户昵称",dataIndex:"nick",width:120},{title:"订单支付时间",dataIndex:"payTime",width:140},{title:"支付金额(元)",dataIndex:"payAmount",width:120},{title:"订单类型",dataIndex:"orderType",width:120,customRender:function(t){return 1===t?"购买":"退费"}},{title:"会员名称",dataIndex:"memberName",width:120}],y={1:"港股券商结算",2:"A股券商结算",3:"会员结算",4:"保险结算",5:"港卡结算"};function D(t,e){return t[e]<0?{style:{color:"#F12323"}}:{}}var k={member:[{titleEx:"会员退款(元)",dataIndex:"refundAmount",className:"deductTitleClass",width:120,customRender:o,customCell:function(t){return D(t,"refundAmount")},slots:{title:"customHead_tip_refundAmount"},tip:"申请退款的会员订单总金额"},{titleEx:"会员收款手续费(元)",dataIndex:"serviceFee",className:"deductTitleClass",width:120,customRender:o,customCell:function(t){return D(t,"serviceFee")},slots:{title:"customHead_tip_serviceFee"},tip:"梧桐收款的会员订单，微信会收取订单手续费，梧桐和渠道按照合同约定分成比例共同承担"},{titleEx:"渠道收款梧桐应收分成(元)",dataIndex:"wtSharingChannelCollection",className:"deductTitleClass",width:120,customRender:o,customCell:function(t){return D(t,"wtSharingChannelCollection")},slots:{title:"customHead_tip_wtSharingChannelCollection"},tip:"渠道收款的会员订单，梧桐按照合同约定分成比例，扣减梧桐应收部分"},{titleEx:"营销活动费用(元)",dataIndex:"marketingCost",className:"deductTitleClass",width:120,detailKey:"marketingDetails",scopedSlots:{customRender:"deductMarketingCost",title:"customHead_tip"},slots:{title:"customHead_tip_marketingCost"},tip:"会员业务中产生的各类营销、活动费用，梧桐和渠道按照合同约定分成比例共同承担"},{title:"其他费用(元)",dataIndex:"otherCost",className:"deductTitleClass",width:120,detailKey:"otherDetails",scopedSlots:{customRender:"deductOtherCost",title:"customHead_tip"}}],ABroker:[{titleEx:"A股奖学金垫付(元)",dataIndex:"scholarshipA",width:140,customRender:o,customCell:function(t){return D(t,"scholarshipA")},slots:{title:"customHead_tip_scholarshipA"},tip:"梧桐垫付的A股奖学金中渠道方应按比例承担的部分"}],HKBroker:[{titleEx:"港股奖学金垫付(元)",dataIndex:"scholarshipHk",width:140,customRender:o,customCell:function(t){return D(t,"scholarshipHk")},slots:{title:"customHead_tip_scholarshipHk"},tip:"梧桐垫付的港股奖学金中渠道方应按比例承担的部分"}],Insurance:[{titleEx:"保险奖学金垫付(元)",dataIndex:"scholarshipInsurance",width:140,customRender:o,customCell:function(t){return D(t,"scholarshipInsurance")},slots:{title:"customHead_tip_scholarshipInsurance"},tip:"梧桐垫付的保险奖学金中渠道方应按比例承担的部分"}]},S={1:"垫款结算",2:"正常结算"},H=[{title:"归属机构",dataIndex:"insName"},{title:"已发放奖学金(元)",dataIndex:"scholarshipAmuont",customRender:function(t){return(t/100).toFixed(0)}},{title:"已发放人数",dataIndex:"scholarshipNum"},{title:"审核失败人数",dataIndex:"failureNum"},{title:"支付信息有误人数",dataIndex:"payErrorNum"},{title:"奖学金类别",dataIndex:"scholarshipType",customRender:function(t){return t?S[t]:"-"}},{title:"操作",dataIndex:"",scopedSlots:{customRender:"action"}}],A=[{label:"审核中",value:"20"},{label:"发放中",value:"30"},{label:"审核失败",value:"31"},{label:"已发放",value:"50"},{label:"支付信息有误",value:"51"}];function T(t){var e=A.find((function(e){return e.value==="".concat(t)}));return e?e.label:"-"}var M=[{title:"用户昵称",dataIndex:"nick",width:140,ellipsis:!0,customRender:function(t){return t||"-"}},{title:"用户注册手机号",dataIndex:"phoneNo",width:160,customRender:function(t){return t||"-"}},{title:"任务名称",dataIndex:"taskName",width:140,ellipsis:!0},{title:"奖学金金额(元)",dataIndex:"scholarshipAmuont",width:140,customRender:function(t){return t?(t/100).toFixed():"-"}},{title:"开户姓名",dataIndex:"accountName",width:140,customRender:function(t){return t||"-"}},{title:"券商开户手机号",dataIndex:"accountPhoneNo",width:140,customRender:function(t){return t||"-"}},{title:"任务提交日期",dataIndex:"taskDate",width:140,customRender:function(t){return i()(t,"YYYY-MM-DD HH:mm:ss").format("YYYY年MM月DD日")}},{title:"奖学金状态",dataIndex:"scholarshipState",width:160,align:"center",fixed:"right",scopedSlots:{customRender:"scholarshipState"}}],Y=[{label:"音频直播",value:0},{label:"视频直播",value:1}],O=[{label:"预约中",value:0},{label:"直播中",value:1},{label:"已结束",value:2}],F=[{key:"liveNum",title:"直播场次",tip:""},{key:"preNum",title:"预约直播人数",tip:""},{key:"totalNum",title:"累计观看人数",tip:""},{key:"payOrderNum",title:"成交订单数",tip:"本场直播时间段内，通过直播间链接成交的订单总数。"},{key:"payOrderAmount",title:"成交金额(元)",dataType:"amount",tip:"本场直播时间段内，通过直播间链接成交的订单总金额。",customRender:function(t){return t?(t/100).toFixed(2):0}}],U=[{key:"liveNum",title:"直播场次",tip:""},{key:"preNum",title:"预约直播人数",tip:""},{key:"totalNum",title:"累计观看人数",tip:""}];function E(t){if(void 0===t)return"-";var e=Y.find((function(e){return e.value===parseInt(t)}));return e?e.label:"-"}function $(t){if(void 0===t)return"-";var e=O.find((function(e){return e.value===parseInt(t)}));return e?e.label:"-"}var L=[{title:"直播主题",dataIndex:"liveTheme",align:"left",width:200,scopedSlots:{customRender:"theme"}},{title:"直播渠道",dataIndex:"channelName",width:160},{title:"开播时间",dataIndex:"liveTime",width:160},{title:"开播时长",dataIndex:"liveDuration",width:140,customRender:j},{title:"直播方式",dataIndex:"liveMode",width:110,customRender:function(t){return E(t)}},{title:"开播主播",dataIndex:"anchorman",width:140,ellipsis:!0},{title:"预约直播人数",dataIndex:"preNum",width:120,customRender:function(t){return void 0===t?"-":t}},{title:"累计观看人数",dataIndex:"totalNum",width:120,customRender:function(t){return void 0===t?"-":t}},{title:"平均观看时长",dataIndex:"averageOnline",width:150,customRender:j},{title:"成交订单数",dataIndex:"payOrderNum",width:120,customRender:function(t){return void 0===t?"-":t}},{title:"成交金额(元)",dataIndex:"payOrderAmount",width:120,customRender:function(t){return void 0===t?"-":(t/100).toFixed(2)}},{title:"直播间状态",dataIndex:"liveState",width:120,customRender:function(t){return $(t)}},{title:"数据详情",width:120,scopedSlots:{customRender:"action"}}],z=[{title:"直播主题",dataIndex:"liveTheme",align:"left",width:200,scopedSlots:{customRender:"theme"}},{title:"开播时间",dataIndex:"liveTime",width:160},{title:"开播时长",dataIndex:"liveDuration",width:140,customRender:j},{title:"直播方式",dataIndex:"liveMode",width:110,customRender:function(t){return E(t)}},{title:"开播主播",dataIndex:"anchorman",width:140,ellipsis:!0},{title:"预约直播人数",dataIndex:"preNum",width:120,customRender:function(t){return void 0===t?"-":t}},{title:"累计观看人数",dataIndex:"totalNum",width:120,customRender:function(t){return void 0===t?"-":t}},{title:"平均观看时长",dataIndex:"averageOnline",width:150,customRender:j},{title:"直播间状态",dataIndex:"liveState",width:120,customRender:function(t){return $(t)}},{title:"数据详情",width:120,scopedSlots:{customRender:"action"}}],V=[{title:"累计观看人数",key:"totalNum",denominator:""},{title:"点击购物车人数",key:"shoppingCartUserNum",denominator:"totalNum"},{title:"创建订单人数",key:"createOrderUserNum",denominator:"shoppingCartUserNum"},{title:"实际支付人数",key:"payUserNum",denominator:"createOrderUserNum"}];function j(t){if(!t)return"-";if(t<60)return"小于1分钟";var e=Math.floor(t/60),a=Math.floor(e/60),n=Math.floor(a/24);return n?"".concat(n,"天").concat(a%24,"小时").concat(e%60,"分钟"):a?"".concat(a,"小时").concat(e%60,"分钟"):"".concat(e,"分钟")}},8996:function(t,e,a){"use strict";a("0d54")},de1d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-spin",{attrs:{spinning:t.spinning}},[a("a-space",{staticStyle:{width:"100%"},attrs:{direction:"vertical"}},[a("a-card",[a("div",{staticClass:"row-between-center"},[a("h2",[t._v(t._s(t.liveData.liveTheme||"-"))]),a("div",{staticClass:"row-end-center"},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"arrow-left"},on:{click:t.back}},[t._v("返回")])],1)])]),a("div",{staticClass:"row-start-center"},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("开播时间")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("liveTime")(t.liveData.liveTime)))])]),a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("开播时长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("duration")(t.liveData.liveDuration)))])]),a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("直播方式")]),a("div",{staticClass:"value"},[t._v(t._s(t.getLiveModeLabel(t.liveData.liveMode)||"-"))])])]),a("a-divider"),t.isOrgan?a("div",{staticStyle:{"font-weight":"500","font-size":"16px",color:"#000",opacity:"0.95"}},[t._v("观众数据")]):a("a-tooltip",{attrs:{title:"用户会员状态记录时间为用户预约或进入直播间，数据记录后，直播过程中的会员身份变更不会影响统计数据。"}},[a("div",{staticClass:"row-start-center",staticStyle:{width:"fit-content"}},[a("div",{staticStyle:{"font-weight":"500","font-size":"16px",color:"#000",opacity:"0.95"}},[t._v("观众数据")]),a("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"question-circle"}})],1)]),a("div",{staticStyle:{padding:"20px 24px"}},[a("a-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("预约直播人数")]),t.isOrgan?a("div",{staticClass:"value"},[t._v(t._s(t._f("checkUndefined")(t.liveData.preNum)))]):a("div",{staticClass:"value"},[t._v(t._s(t._f("checkUndefined")(t.liveData.preNum))+"（会员人数 "+t._s(t._f("checkUndefined")(t.liveData.preMemberNum))+" / 非会员人数 "+t._s(t._f("checkUndefined")(t.liveData.preVisitorNum))+"）")])])]),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title row-start-center"},[t._v("累计观看人数 ")]),t.isOrgan?a("div",{staticClass:"value"},[t._v(t._s(t._f("checkUndefined")(t.liveData.totalNum)))]):a("div",{staticClass:"value"},[t._v(t._s(t._f("checkUndefined")(t.liveData.totalNum))+"（会员人数 "+t._s(t._f("checkUndefined")(t.liveData.totalMemberNum))+" / 非会员人数 "+t._s(t._f("checkUndefined")(t.liveData.totalVisitorNum))+"）")])])])],1),a("a-row",{attrs:{gutter:24}},[t.isOrgan?t._e():a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("会员到播率(到播会员人数/可观看直播的会员数)")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.liveData.memberArrivalRate?(100*t.liveData.memberArrivalRate).toFixed(2)+"%":"-"))])])]),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("平均观看时长")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("duration")(t.liveData.averageOnline)))])])])],1)],1)],1),a("a-row",{attrs:{gutter:24}},[t.isOrgan?t._e():a("a-col",{attrs:{md:12,sm:24}},[a("a-card",[a("h3",[t._v("流量转化数据")]),a("div",{staticClass:"infoItem row-start-center",staticStyle:{height:"30px"}},[a("div",{staticClass:"title"},[t._v("付费转化率(实际支付人数/累计观看非会员数)")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.liveData.payRate?(100*t.liveData.payRate).toFixed(2)+"%":"-"))])]),a("div",{staticClass:"column-center-center",staticStyle:{height:"336px"}},[t.liveData.totalNum?a("chart",{ref:"chart",attrs:{chartType:"funnel",comHeight:300}}):a("a-empty")],1),a("div",{staticClass:"tip"},[t._v("注：创建订单和实际支付人数包含同时段其他付款方式的数据，因此会出现点击购物车人数较少的情况。")])])],1),a("a-col",{attrs:{md:t.isOrgan?24:12,sm:24}},[a("a-card",[a("h3",[t._v("互动数据")]),a("div",{style:{padding:"20px 6px",height:t.isOrgan?200:"406px"}},[a("a-row",{staticStyle:{"margin-bottom":"40px"},attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("评论总数")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.interactiveData.commentsNum?t.interactiveData.commentsNum+"次":"-"))])])]),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("评论人数")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.interactiveData.commentsUserNum?t.interactiveData.commentsUserNum+"人":"-"))])])])],1),a("a-row",{staticStyle:{"margin-bottom":"40px"},attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("直播间分享人数")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.interactiveData.shareUserNum?t.interactiveData.shareUserNum+"人":"-"))])])]),a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("直播间分享次数")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.interactiveData.shareCount?t.interactiveData.shareCount+"次":"-"))])])])],1),a("a-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("div",{staticClass:"infoItem row-start-center"},[a("div",{staticClass:"title"},[t._v("点赞总数")]),a("div",{staticClass:"value"},[t._v(t._s(void 0!=t.interactiveData.likesNum?t.interactiveData.likesNum+"次":"-"))])])]),a("a-col",{attrs:{md:12,sm:24}},[a("a-button",{attrs:{disabled:!t.interactiveData.commentsNum,type:"primary",icon:"export"},on:{click:t.exportComments}},[t._v("导出评论")])],1)],1)],1)])],1)],1)],1)],1)],1)},i=[],r=(a("c740"),a("d3b7"),a("d81d"),a("0970")),d=a("4360"),l=a("c1df"),s=a.n(l),o=a("250c"),c=(a("b0c0"),a("b680"),a("4ae6"));function u(t){var e={tooltip:{trigger:"item",formatter:function(t){var e=t.data,a=e.name+" ("+e.value+")";return e.rate&&("-"===e.rate?a+="(-)\n\n":a+="("+e.rate+"%)\n\n"),a}},color:["#f99185","#b0a3f3","#89d9de","#efd997"],legend:{selectedMode:!1,data:c["a"].map((function(t){return t.title}))},series:[{type:"funnel",left:"20%",width:"70%",min:0,max:100,minSize:"1%",maxSize:"80%",sort:"none",gap:5,funnelAlign:"left",hoverLink:!1,label:{show:!0,position:"left",color:"#333",fontWeight:"bold",verticalAlign:"bottom",formatter:function(t){var e=t.data,a="";return e.rate&&(a+="("+e.rate+"%)\n\n"),a+=e.value,a}},labelLine:{length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{}},data:[{value:60,name:"Visit"},{value:40,name:"Inquiry"},{value:20,name:"Order"},{value:80,name:"Click"},{value:100,name:"Show"}]}]};return e.series[0].max=t.totalNum,e.series[0].data=c["a"].map((function(e){var a="";return e.denominator&&(t[e.denominator]?(a=100*t[e.key]/t[e.denominator],a=a>100?"-":a.toFixed(2)):a="-"),{value:t[e.key],name:e.title,rate:a}})),e}var m=a("ca00"),v={name:"LiveDetail",components:{Chart:o["a"]},computed:{isOrgan:function(){var t=d["a"].getters.roles;return t.findIndex((function(t){return"institution"===t.roleKey}))>-1}},data:function(){return{spinning:!1,roomId:"",liveData:{},interactiveData:{},comChart:null,getLiveModeLabel:c["e"]}},filters:{liveTime:function(t){return t?s()(t,"YYYY-MM-DD HH:mm:ss").format("YYYY年MM月DD日 HH:mm"):"-"},duration:function(t){return Object(c["d"])(t)},checkUndefined:function(t){return void 0===t?"-":t}},created:function(){var t=this;this.roomId=this.$route.params.roomId,this.$root.eventHub.$on("refreshView",(function(){t.loadData()}))},beforeRouteLeave:function(t,e,a){this.$root.eventHub.$off("refreshView"),a()},mounted:function(){this.comChart=this.$refs.chart,this.comChart&&this.comChart.setEmptyStr("暂无数据"),this.loadData()},methods:{loadData:function(){var t=this;this.spinning=!0,r["a"].DataCenter_liveDetails({roomId:this.roomId}).then((function(e){t.liveData=e.liveData,t.interactiveData=e.interactiveData,t.$nextTick((function(){t.updateComChart()}))})).catch((function(e){t.liveData={},t.interactiveData={},t.$nextTick((function(){t.updateComChart()}))})).finally((function(){t.spinning=!1}))},back:function(){this.$router.back()},updateComChart:function(){if(this.comChart=this.$refs.chart,this.comChart){var t=this.liveData,e=u(t);this.comChart.setEmptyStr(""),this.comChart.setChartOption(e,!0)}},exportComments:function(){var t=this;this.spinning=!0;var e=this.roomId,a={roomId:e};return r["a"].DataCenter_commentList(a).then((function(e){if("0000"===e.responseCode)return t.doExport(e),e})).catch((function(){})).finally((function(){t.spinning=!1}))},doExport:function(t){var e=this;if(t&&t.commentList&&0!==t.commentList.length){this.spinning=!0;var a=this.liveData.liveTheme+"评论"+s()().format("YYYYMMDDHHmmss"),n=["用户昵称","评论内容","评论时间"],i=t.commentList.map((function(t){return[t.nickname||"",t.content||"",t.commentTime||""]}));Object(m["f"])(a,n,i).then((function(t){e.$message.success("文件导出成功")})).catch((function(t){e.$message.error("文件导出失败")})).finally((function(){e.spinning=!1}))}else this.$message.info("当前没有评论数据！")}}},h=v,f=(a("8996"),a("2877")),p=Object(f["a"])(h,n,i,!1,null,"d0d6ea64",null);e["default"]=p.exports}}]);
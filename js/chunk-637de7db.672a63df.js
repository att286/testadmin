(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-637de7db"],{"0bf3":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("page-header-wrapper",{attrs:{title:!1}},[r("a-spin",{attrs:{spinning:!1}},[r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{attrs:{layout:"inline"}},[r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{md:6,sm:24}},[r("a-form-item",{attrs:{label:"渠道",labelCol:{span:6},wrapperCol:{span:18}}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"所有渠道","default-active-first-option":!t.multipleChannel,disabled:!t.multipleChannel,"show-arrow":!0},on:{change:t.switchChannel},model:{value:t.curChannelId,callback:function(e){t.curChannelId=e},expression:"curChannelId"}},t._l(t.channelOptions,(function(e){return r("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",[r("span",[t._v("已合作券商 "),r("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(t._s(t.partnersCount))]),t._v("家")]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[t._v("未合作券商 "),r("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(t._s(t.noAccessCount))]),t._v("家")]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[t._v("覆盖率 "),r("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(t._s(t.brokerRate))])])],1)],1)],1)],1)],1),r("s-table",{ref:"table",attrs:{size:"default",rowKey:"brokerId",columns:t.columns,data:t.loadData,alert:!1,showPagination:"auto"},scopedSlots:t._u([{key:"action",fn:function(e,a){return r("span",{},[[r("a",{on:{click:function(e){return t.handleBrokerInfo(a)}}},[t._v("查看详情")])]],2)}}])})],1)],1),r("a-drawer",{attrs:{title:"券商详情",width:"460px",destroyOnClose:!0,visible:t.drawer},on:{close:t.closeDrawer}},[r("div",{attrs:{bordered:!1}},[r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:7}},[r("img",{attrs:{src:t.curBrokerData.brokerPic,alt:"",width:"100px",height:"100px"}})]),r("a-col",{attrs:{span:17}},[r("p",{staticClass:"brokerName"},[t._v(t._s(t.curBrokerData.brokerName))]),r("p",{staticClass:"brokerDesc"},[t._v(t._s(t.curBrokerData.brokerIntroduce))]),r("p",{staticClass:"brokerDesc"},[t._v(t._s(t.curBrokerData.recReason))])])],1)],1),r("div",{attrs:{bordered:!1}},[r("p",{staticClass:"ratesTitle"},[t._v("最新活动")]),r("div",{staticClass:"activityBox"},[r("p",{staticClass:"brokerActivity"},[t._v(t._s(t.curBrokerData.brokerActivity?t.curBrokerData.brokerActivity:"暂无活动"))])])]),r("div",{attrs:{bordered:!1}},[r("p",{staticClass:"ratesTitle"},[t._v("用户资费")]),r("s-table",{ref:"brokerInfoTable",attrs:{size:"default",rowKey:"title",columns:t.brokerInfoColumns,data:t.loadBrokerRateData,alert:!1,showPagination:!1,showHeader:!1,bordered:""}})],1)])],1)},s=[],n=r("5530"),o=(r("d3b7"),r("fb6a"),r("2af9")),i=r("f306"),c=r("2f62"),l=[{title:"券商名称",dataIndex:"brokerName",ellipsis:!0},{title:"券商类型",dataIndex:"brokerType",ellipsis:!0},{title:"状态",dataIndex:"brokerState",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"action"}}],u=[{title:"属性",dataIndex:"title",customCell:function(t,e){return{style:{"background-color":"rgba(250,250,250,1)"}}}},{title:"内容",dataIndex:"desc"}],d={name:"BrokerList",components:{STable:o["c"]},data:function(){var t=this;return this.columns=l,this.brokerInfoColumns=u,{spinning:!1,brokerList:[],curChannelId:"0",noAccessCount:0,partnersCount:0,drawer:!1,curBrokerData:{},queryParam:{},loadData:function(e){var r=Object.assign({},e,t.queryParam);return t.brokerList.length?new Promise((function(e,a){e(t.getTableList(r))})):i["a"].brokerList(r).then((function(e){return t.brokerList=e.brokerList,t.getTableList(r)})).catch((function(){}))},loadBrokerRateData:function(e){return i["a"].ratesList({brokerId:t.curBrokerData.brokerId}).then((function(e){var r=t.drawer?t.getBorkerRateList(e.ratesList[0]):[];return{totalCount:e.length,pageNo:e.length,data:r}})).catch((function(){}))}}},filters:{available:function(t){return"0"===t.state}},created:function(){var t=this;this.$root.eventHub.$on("refreshView",(function(){t.$refs.table&&t.$refs.table.refresh()})),this.multipleChannel||(this.curChannelId=this.channelOptions[1].value,this.queryParam.channelId=this.curChannelId),this.brokerStatistics()},beforeRouteLeave:function(t,e,r){this.$root.eventHub.$off("refreshView"),r()},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["channelOptions"])),{},{multipleChannel:function(){return"2"===this.$store.state.user.userType},brokerRate:function(){var t=this.noAccessCount+this.partnersCount,e=0;return 0===t?"0%":(e=Math.floor(this.partnersCount/t*100),"".concat(e,"%"))}}),methods:{getTableList:function(t){var e=t.pageNo,r=t.pageSize,a=(e-1)*r,s=a+r,n=this.brokerList.slice(a,s);return{totalCount:this.brokerList.length,data:n,pageNo:+t.pageNo}},brokerStatistics:function(){var t=this;this.spinning=!0,i["a"].brokerStatistics({channelId:this.curChannelId}).then((function(e){t.noAccessCount=+e.noAccessCount,t.partnersCount=+e.partnersCount})).catch((function(t){})).finally((function(){t.spinning=!1}))},handleBrokerInfo:function(t){var e=this;t&&(i["a"].recorderRequest({pageId:"200102",clickId:"201001",content:t.brokerId}),this.spinning=!0,i["a"].brokerDesc({brokerId:t.brokerId}).then((function(r){e.curBrokerData=r,e.curBrokerData.brokerId=t.brokerId,e.showDrawer()})).finally((function(){e.spinning=!1})),this.showDrawer())},getBorkerRateList:function(t){var e=[];return t.moneyStock&&e.push({title:"现金打新",desc:t.moneyStock}),t.financingStock&&e.push({title:"融资打新",desc:t.financingStock}),t.tradeCommission&&e.push({title:"交易佣金",desc:t.tradeCommission}),t.anCommission&&e.push({title:"暗盘佣金",desc:t.anCommission}),t.platformFee&&e.push({title:"平台费",desc:t.platformFee}),t.tradeTime&&e.push({title:"卖出资金可用于打新时间",desc:t.tradeTime}),t.supportOne&&e.push({title:"是否支持1手融",desc:t.supportOne}),t.hkCardTransfer&&e.push({title:"港卡银证转账",desc:t.hkCardTransfer}),t.hkCardFps&&e.push({title:"港卡FPS转账",desc:t.hkCardFps}),t.eddaIn&&e.push({title:"DDA快捷入金",desc:t.eddaIn}),t.usCardIn&&e.push({title:"美国卡出入金",desc:t.usCardIn}),e},switchChannel:function(t){this.queryParam.channelId=this.curChannelId,this.brokerList=[],this.brokerStatistics(),this.$refs.table.refresh(!0)},showDrawer:function(){var t=this;this.drawer=!0,this.$nextTick((function(){t.$refs.brokerInfoTable.refresh(!0)}))},closeDrawer:function(){this.drawer=!1}}},h=d,p=(r("d3fb"),r("2877")),f=Object(p["a"])(h,a,s,!1,null,"7b4ab8a0",null);e["default"]=f.exports},4055:function(t,e,r){},d3fb:function(t,e,r){"use strict";r("4055")}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05e4af12"],{8593:function(e,t,n){"use strict";var r=n("a417"),a="https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",o=Object({NODE_ENV:"production",VUE_APP_PREVIEW:"false",VUE_APP_OUTPUT:"",VUE_APP_API_BASE:"https://mservice.xincaitong.com/KolPlatformWeb/kolPlatform.jhtml",VUE_APP_API_SYSTEM:"https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",VUE_APP_API_SMS:"https://mservice.xincaitong.com/WtSmsCenter/sms.jhtml",VUE_APP_API_RECORD:"https://mservice.xincaitong.com/WtDataWeb/data.jhtml",VUE_APP_API_TA:"https://margin.xincaitong.com/WtmpGateway",VUE_APP_API_ETFGRID:"https://mservice.xincaitong.com/WtPhoenixGateway/",VUE_APP_API_WX:"https://mservice.xincaitong.com/WtWxPluginWeb/wx.jhtml",VUE_APP_API_MOCK_URL:"/api",BASE_URL:""}).VUE_APP_GAMEID||"eagleeye";function i(e){var t=r["b"].network(e,a);return t}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0",a=r["b"].genParams(o,e,t,n);return a}t["a"]={captchaImage:function(e){var t=l("captchaImage",e);return i(t)},login:function(e){var t=l("login",e);return i(t)},updatePwd:function(e){var t=l("updatePwd",e);return i(t)},resetPwd:function(e){var t=l("resetPwd",e);return i(t)},userList:function(e){var t=l("userList",e);return i(t)},addUser:function(e){var t=l("addUser",e);return i(t)},userInfo:function(e){var t=l("userInfo",e);return i(t)},updateUser:function(e){var t=l("updateUser",e);return i(t)},deleteUsers:function(e){var t=l("batchRemoveUser",e);return i(t)},postList:function(e){var t=l("postList",e);return i(t)},addPost:function(e){var t=l("addPost",e);return i(t)},postInfo:function(e){var t=l("postInfo",e);return i(t)},updatePost:function(e){var t=l("updatePost",e);return i(t)},deletePosts:function(e){var t=l("batchRemovePost",e);return i(t)},deptList:function(e){var t=l("deptList",e);return i(t)},addDept:function(e){var t=l("addDept",e);return i(t)},deptInfo:function(e){var t=l("deptInfo",e);return i(t)},updateDept:function(e){var t=l("updateDept",e);return i(t)},deleteDept:function(e){var t=l("removeDept",e);return i(t)},menuList:function(e){var t=l("menuList",e);return i(t)},addMenu:function(e){var t=l("addMenu",e);return i(t)},menuInfo:function(e){var t=l("menuInfo",e);return i(t)},updateMenu:function(e){var t=l("updateMenu",e);return i(t)},deleteMenu:function(e){var t=l("removeMenu",e);return i(t)},logoout:function(e){var t=l("logout",e);return i(t)},simpleRoleList:function(e){var t=l("roleBriefList",e);return i(t)},roleList:function(e){var t=l("roleList",e);return i(t)},addRole:function(e){var t=l("addRole",e);return i(t)},updateRole:function(e){var t=l("updateRole",e);return i(t)},deleteRoles:function(e){var t=l("batchRemoveRole",e);return i(t)},roleMenuData:function(e){var t=l("roleMenuTreeSelect",e);return i(t)},roleUsersAssociated:function(e){var t=l("allocatedList",e);return i(t)},roleUsersUnassociated:function(e){var t=l("unallocatedList",e);return i(t)},associateRoleUsers:function(e){var t=l("selectAuthUserAll",e);return i(t)},disassociateRoleUsers:function(e){var t=l("cancelAuthUserAll",e);return i(t)}}},"88bc":function(e,t,n){(function(t){var n=1/0,r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function m(e,t){var n=-1,r=e?e.length:0,a=Array(r);while(++n<r)a[n]=t(e[n],n,e);return a}function f(e,t){var n=-1,r=t.length,a=e.length;while(++n<r)e[a+n]=t[n];return e}var p=Object.prototype,v=p.hasOwnProperty,h=p.toString,b=c.Symbol,w=p.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,g=Math.max;function P(e,t,n,r,a){var o=-1,i=e.length;n||(n=R),a||(a=[]);while(++o<i){var l=e[o];t>0&&n(l)?t>1?P(l,t-1,n,r,a):f(a,l):r||(a[a.length]=l)}return a}function _(e,t){return e=Object(e),I(e,t,(function(t,n){return n in e}))}function I(e,t,n){var r=-1,a=t.length,o={};while(++r<a){var i=t[r],l=e[i];n(l,i)&&(o[i]=l)}return o}function x(e,t){return t=g(void 0===t?e.length-1:t,0),function(){var n=arguments,r=-1,a=g(n.length-t,0),o=Array(a);while(++r<a)o[r]=n[t+r];r=-1;var i=Array(t+1);while(++r<t)i[r]=n[r];return i[t]=o,d(e,this,i)}}function R(e){return S(e)||A(e)||!!(y&&e&&e[y])}function V(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function A(e){return D(e)&&v.call(e,"callee")&&(!w.call(e,"callee")||h.call(e)==a)}var S=Array.isArray;function E(e){return null!=e&&j(e.length)&&!M(e)}function D(e){return L(e)&&E(e)}function M(e){var t=k(e)?h.call(e):"";return t==o||t==i}function j(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function k(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){return!!e&&"object"==typeof e}function U(e){return"symbol"==typeof e||L(e)&&h.call(e)==l}var N=x((function(e,t){return null==e?{}:_(e,m(P(t,1),V))}));e.exports=N}).call(this,n("c8ba"))},af7d:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-header-wrapper",{attrs:{title:!1}},[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")]),n("a-button",{attrs:{type:"primary",icon:"edit",disabled:1!==e.selectedRowKeys.length},on:{click:function(t){return e.handleEdit()}}},[e._v("修改")]),n("a-button",{attrs:{type:"primary",icon:"delete",disabled:0===e.selectedRowKeys.length},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"menuId",columns:e.columns,data:e.loadData,alert:!1,rowSelection:e.rowSelection,showPagination:!1,expandRowByClick:!0,defaultExpandAllRows:!0,defaultExpandedRowKeys:e.expandRowKey,customRow:e.onRowEvent},scopedSlots:e._u([{key:"menuType",fn:function(t,r){return n("span",{},[e._v(" "+e._s(e._f("menuType")(r))+" ")])}},{key:"visible",fn:function(t,r,a){return n("span",{on:{click:function(e){e.stopPropagation()}}},[n("a-switch",{attrs:{loading:a===e.switchIndex,checked:e._f("userStatus")(r)},on:{change:function(n){return e.onStatusChange(n,t,r,a)}}})],1)}},{key:"action",fn:function(t,r){return n("span",{},[[n("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(r)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return t.stopPropagation(),e.handleAdd(r.menuId)}}},[e._v("新增")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return t.stopPropagation(),e.handleDelete(r)}}},[e._v("删除")])]],2)}}])})],1),n("menu-edit",{ref:"createModal",attrs:{visible:e.modalVisible,loading:e.confirmLoading,model:e.modalData},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},a=[],o=n("5530"),i=(n("a15b"),n("d3b7"),n("c1df")),l=n.n(i),s=n("2af9"),u=n("8593"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.editType,width:740,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[n("a-form-item",{attrs:{label:"上级菜单"}},[n("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pMenuId",{initialValue:e.model.pMenuId||"0",rules:[{required:!0,message:"必填"}]}],expression:"['pMenuId', { initialValue: model.pMenuId || '0', rules: [{ required: true, message: '必填' }] }]"}],staticStyle:{width:"100%"},attrs:{"show-search":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},treeData:e.menuData,"tree-default-expand-all":"",name:"pMenuId",placeholder:"请选择上级菜单",treeNodeFilterProp:"label"}})],1),n("a-form-item",{attrs:{label:"菜单类型"}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuType",{initialValue:e.model.menuType||"M",rules:[{required:!0,message:"必填"}]}],expression:"['menuType', { initialValue: model.menuType || 'M', rules: [{ required: true, message: '必填' }] }]"}]},[n("a-radio",{attrs:{value:"M"}},[e._v("目录")]),n("a-radio",{attrs:{value:"C"}},[e._v("菜单")]),n("a-radio",{attrs:{value:"F"}},[e._v("按钮")])],1)],1),n("a-form-item",{attrs:{label:"菜单名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuName",{initialValue:e.model.menuName,rules:[{required:!0,message:"必填"}]}],expression:"['menuName', { initialValue: model.menuName, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"请求地址"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{initialValue:e.model.url}],expression:"['url', {initialValue: model.url}]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"打开方式"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["target",{initialValue:e.model.target||"menuItem"}],expression:"['target', { initialValue: model.target || 'menuItem' }]"}],attrs:{"allow-clear":""}},[n("a-select-option",{attrs:{value:"menuItem"}},[e._v("页签")]),n("a-select-option",{attrs:{value:"menuBlank"}},[e._v("新窗口")])],1)],1),n("a-form-item",{attrs:{label:"权限标识"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{initialValue:e.model.perms}],expression:"['perms', { initialValue: model.perms }]"}],attrs:{"allow-clear":""}}),n("span",{attrs:{icon:"delete"}},[e._v('控制器中定义的权限标识，如：@RequiresPermissions("")')])],1),n("a-form-item",{attrs:{label:"显示顺序"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum",{initialValue:e.model.orderNum,rules:[{required:!0,message:"必填"}]}],expression:"['orderNum', { initialValue: model.orderNum, rules: [{ required: true, message: '必填' }] }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"图标"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:e.model.icon}],expression:"['icon', { initialValue: model.icon }]"}],attrs:{"allow-clear":""}},[n("div",{attrs:{slot:"dropdownRender"},slot:"dropdownRender"},[n("div",{staticStyle:{width:"100%",height:"120px",padding:"0 12px",overflow:"hidden","overflow-y":"scroll"}},[n("a-row",{attrs:{gutter:12}},e._l(e.icons,(function(t){return n("a-col",{key:t,attrs:{md:3,sm:6}},[n("a-icon",{staticClass:"icon",staticStyle:{fontSize:"30px","margin-bottom":"12px"},attrs:{type:t},on:{click:function(n){return e.selectIcon(t)}}})],1)})),1)],1)])])],1),n("a-form-item",{attrs:{label:"菜单状态"}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["visible",{initialValue:e.model.visible||"0"}],expression:"['visible', { initialValue: model.visible || '0' }]"}]},[n("a-radio",{attrs:{value:"0"}},[e._v("显示")]),n("a-radio",{attrs:{value:"1"}},[e._v("隐藏")])],1)],1)],1)],1)],1)},d=[],m=(n("99af"),n("b64b"),n("159b"),n("d81d"),n("88bc")),f=n.n(m),p=n("84965"),v=["pMenuId","menuType","menuName","orderNum","target","perms","icon","visible"],h={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{icons:[],popover:!1,form:this.$form.createForm(this),editType:"添加"}},created:function(){var e=this;this.icons=p["a"][3].icons.concat(p["a"][4].icons),v.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(f()(e.model,v)),e.editType=e.model.menuId?"修改":"添加"}))},computed:{menuData:function(){if(!Object.keys(this.model).length)return[];function e(t){var n={value:t.menuId,label:t.menuName,order:t.orderNum,children:[]};return t.children&&t.children.forEach((function(t){n.children.push(e(t))})),n.children.sort((function(e,t){return e.order-t.order})),n}var t=this.model.menus.map((function(t){return e(t)}));t.sort((function(e,t){return e.order-t.order}));var n=[{value:"0",label:"主目录",order:"0",children:t}];return n}},methods:{selectIcon:function(e){this.form.setFieldsValue({icon:"".concat(e)})}}},b=h,w=n("2877"),y=Object(w["a"])(b,c,d,!1,null,null,null),g=y.exports,P=[{title:"菜单名称",dataIndex:"menuName",width:200,ellipsis:!0},{title:"显示顺序",dataIndex:"orderNum",ellipsis:!0},{title:"请求地址",dataIndex:"url",width:160,ellipsis:!0},{title:"类型",dataIndex:"menuType",scopedSlots:{customRender:"menuType"},ellipsis:!0},{title:"可见",dataIndex:"visible",scopedSlots:{customRender:"visible"}},{title:"权限标识",dataIndex:"perms",width:160,ellipsis:!0},{title:"操作",scopedSlots:{customRender:"action"}}],_={name:"MenuList",components:{STable:s["c"],MenuEdit:g},data:function(){var e=this;return this.columns=P,{modalVisible:!1,confirmLoading:!1,modalData:{},queryParam:{visible:"0"},loadData:function(t){var n=Object.assign({},e.queryParam);return n.visible-=1,u["a"].menuList(n).then((function(t){if("0000"===t.responseCode)return t.data=t.menus,e.onSelectChange([],[]),t})).catch((function(){}))},menuData:[],selectedRowKeys:[],selectedRows:[],expandRowKey:[],switchIndex:""}},filters:{userStatus:function(e){return"0"===e.visible},menuType:function(e){var t=e.menuType;return"M"===e.menuType?t="目录":"C"===e.menuType?t="菜单":"F"===e.menuType&&(t="按钮"),t}},created:function(){var e=this;this.$root.eventHub.$on("refreshView",(function(){e.$refs.table&&e.$refs.table.refresh()}))},beforeRouteLeave:function(e,t,n){this.$root.eventHub.$off("refreshView"),n()},computed:{rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{handleAdd:function(e){this.modalVisible=!0,this.modalData={pMenuId:e,menus:this.$refs.table.localDataSource}},handleEdit:function(e){if(e);else{if(!this.selectedRowKeys.length)return;e=this.selectedRows[0]}this.modalVisible=!0,this.modalData=Object(o["a"])(Object(o["a"])({},e),{},{menus:this.$refs.table.localDataSource})},handleDelete:function(e){var t=this;this.$confirm({title:"系统提示",content:"确认要删除".concat(this.selectedRowKeys.length?"选中的".concat(this.selectedRowKeys.length):"该","条菜单数据吗？"),okText:"确认",cancelText:"取消",onOk:function(){t.doDelete(e)},onCancel:function(){}})},doDelete:function(e){var t=this,n="";if(e)n=e.menuId;else{if(!this.selectedRowKeys.length)return;n=this.selectedRowKeys.join(",")}u["a"].deleteMenu({menuId:n}).then((function(e){t.$refs.table.refresh(),t.$message.info("删除成功")}))},handleOk:function(){var e=this,t=this.$refs.createModal.form;this.confirmLoading=!0,t.validateFields((function(t,n){if(t)e.confirmLoading=!1;else{var r=e.modalData.menuId,a=r?"updateMenu":"addMenu",i=Object(o["a"])({},n);r&&(i.menuId=r),i.icon=i.icon||"",u["a"][a](i).then((function(t){e.$message.info("操作成功"),e.handleCancel(),e.$refs.table.refresh()})).catch((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.modalVisible=!1,this.confirmLoading=!1,this.modalData={};var e=this.$refs.createModal.form;e.resetFields()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},resetSearchForm:function(){this.queryParam={date:l()(new Date)}},onStatusChange:function(e,t,n,r){var a=this;this.switchIndex=r;var o={menuId:n.menuId,visible:"0"===n.visible?"1":"0"};u["a"].updateMenu(o).then((function(e){n.visible="0"===n.visible?"1":"0"})).finally((function(){a.switchIndex=""}))},onRowEvent:function(e,t){var n=this;return{on:{click:function(){n.selectedRowKeys=[e.menuId],n.selectedRows=[e]}}}}}},I=_,x=Object(w["a"])(I,r,a,!1,null,null,null);t["default"]=x.exports}}]);
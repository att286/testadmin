(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-888fbd5c"],{6394:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page-header-wrapper",{attrs:{title:!1}},[i("a-spin",{attrs:{spinning:e.spinning}},[i("a-card",{style:{height:"100%"},attrs:{bordered:!1,bodyStyle:{padding:"16px 20px",height:"100%"}}},[i("h2",[e._v("基金诊断")]),i("div",{staticClass:"row-start-center"},[i("p",{staticStyle:{"font-size":"18px"}},[e._v("专区名称："+e._s(e.title||"大V点评"))]),i("a-icon",{staticStyle:{color:"#1890ff","font-size":"18px","margin-left":"6px",cursor:"pointer"},attrs:{type:"edit"},on:{click:e.handleEditTitle}})],1),i("div",[i("br")]),i("a-table",{ref:"table",attrs:{size:"default",rowKey:"fundLevel",loading:e.loading,columns:e.columns,"data-source":e.reviewList,scroll:{x:e.tableX}},scopedSlots:e._u([{key:"action",fn:function(t,n){return i("span",{},[i("a",{staticStyle:{color:"#1890ff"},on:{click:function(t){return e.handleEditReview(n)}}},[e._v("编辑")])])}}])})],1)],1),i("title-edit",{ref:"titleEdit",attrs:{loading:e.titleEditLoading,model:e.titleModel,visible:e.visibleEditTitle},on:{ok:e.handleEditTitleDone,cancel:e.handleEditTitleCancel}}),i("review-edit",{ref:"reviewEdit",attrs:{loading:e.reviewEditLoading,model:e.reviewModel,visible:e.visibleEditReview},on:{ok:e.handleEditReviewDone,cancel:e.handleEditReviewCancel}})],1)},r=[],l=i("1da1"),a=(i("96cf"),i("159b"),i("d3b7"),i("d81d"),i("7db0"),i("0970")),o=[{title:"系统评价",dataIndex:"levelDesc",width:100},{title:"个性化评价",dataIndex:"review",width:300,customRender:function(e){return e||"无"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"},width:120}],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"战区名称",width:740,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[i("a-spin",{attrs:{spinning:e.loading}},[i("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[i("a-form-item",{attrs:{label:"专区名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{initialValue:e.model.remark||"大V点评",rules:[{required:!0,message:"必填"}]}],expression:"['title', { initialValue: model.remark || '大V点评', rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"title","allow-clear":"","max-length":6}})],1)],1)],1)],1)},c=[],u=i("88bc"),d=i.n(u),f=["title"],v={components:{},props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{md:{span:3},xs:{span:24}},wrapperCol:{md:{span:19},xs:{span:24}}},{form:this.$form.createForm(this)}},created:function(){var e=this;f.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(d()(e.model,f))}))},methods:{}},h=v,m=i("2877"),p=Object(m["a"])(h,s,c,!1,null,null,null),w=p.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"个性化评价",width:740,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[i("a-spin",{attrs:{spinning:e.loading}},[i("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[i("a-form-item",{attrs:{label:"系统评价"}},[i("div",{staticStyle:{color:"#F12323","font-weight":"500","font-size":"16px"}},[e._v(e._s(e.model.levelDesc||""))])]),i("a-form-item",{attrs:{label:"个性化评价",help:"项目为空时小程序端不显示评价"}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["review",{initialValue:e.model.review||"",rules:[{required:!0,message:"必填"}]}],expression:"['review', { initialValue: model.review || '', rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"review",placeholder:"请输入，最多输入150个字","allow-clear":"",autosize:{minRows:3,maxRows:6},"max-length":150}})],1)],1)],1)],1)},g=[],y=["review"],E={components:{},props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{md:{span:4},xs:{span:24}},wrapperCol:{md:{span:18},xs:{span:24}}},{form:this.$form.createForm(this)}},created:function(){var e=this;y.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(d()(e.model,y))}))},methods:{}},R=E,x=Object(m["a"])(R,b,g,!1,null,null,null),L=x.exports,$={name:"DiagnosisReview",components:{TitleEdit:w,ReviewEdit:L},computed:{tableX:function(){var e=0;return this.columns.forEach((function(t){e+=t.width||t.minWidth||0})),e}},data:function(){return{spinning:!1,loading:!1,title:"",columns:o,reviewList:[],titleEditLoading:!1,titleModel:{},visibleEditTitle:!1,reviewEditLoading:!1,reviewModel:{},visibleEditReview:!1}},created:function(){var e=this;this.$root.eventHub.$on("refreshView",(function(){e.loadReviewList()})),this.$store.dispatch("ta/GetToken").then((function(t){e.loadReviewList()})),this.getReviewTitle().then((function(){}))},beforeRouteLeave:function(e,t,i){this.$root.eventHub.$off("refreshView"),i()},methods:{handleEditTitle:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getReviewTitle();case 3:i=t.sent,e.titleModel={title:i},e.visibleEditTitle=!0,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getReviewTitle:function(){var e=this;return new Promise((function(t,i){e.title?t(e.title):(e.spinning=!0,a["a"].fund_getReviewTitle({bussinessId:e.$store.getters.taClubId}).then((function(i){e.title=i.title,t(i.title)})).catch((function(e){i(e)})).finally((function(){e.spinning=!1})))}))},loadReviewList:function(){var e=this,t={bussinessId:this.$store.getters.taClubId};this.loading=!0,a["a"].fund_getReviewList(t).then((function(t){var i=t.dictList,n=t.reviewList;e.reviewList=i.map((function(e){var t=e.fundLevel,i=e.levelDesc,r="";if(null!==n&&void 0!==n&&n.length){var l=n.find((function(e){return e.fundLevel===t}));r=(null===l||void 0===l?void 0:l.review)||""}return{fundLevel:t,levelDesc:i,review:r}}))})).catch((function(){e.reviewList=[]})).finally((function(){e.loading=!1}))},handleEditReview:function(e){this.reviewModel=Object.assign({},e),this.visibleEditReview=!0},handleEditTitleDone:function(){var e=this,t=this.$refs.titleEdit,i=t.form;i&&i.validateFields((function(t,i){if(!t){var n=Object.assign({bussinessId:e.$store.getters.taClubId},i);a["a"].fund_updateReviewTitle(n).then((function(t){e.$message.success("专区名称已提交！"),e.title=n.title,e.handleEditTitleCancel()})).catch((function(e){}))}}))},handleEditTitleCancel:function(){this.titleModel={},this.visibleEditTitle=!1},handleEditReviewDone:function(){var e=this,t=this.$refs.reviewEdit,i=t.form;i&&i.validateFields((function(i,n){if(!i){var r=Object.assign({bussinessId:e.$store.getters.taClubId,fundLevel:t.model.fundLevel},n);a["a"].fund_updateReview(r).then((function(t){e.$message.success("评价修改成功!"),e.handleEditReviewCancel(),e.loadReviewList()})).catch((function(e){}))}}))},handleEditReviewCancel:function(){this.reviewModel={},this.visibleEditReview=!1}}},j=$,k=Object(m["a"])(j,n,r,!1,null,null,null);t["default"]=k.exports},"88bc":function(e,t,i){(function(t){var i=1/0,n=9007199254740991,r="[object Arguments]",l="[object Function]",a="[object GeneratorFunction]",o="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function d(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function f(e,t){var i=-1,n=e?e.length:0,r=Array(n);while(++i<n)r[i]=t(e[i],i,e);return r}function v(e,t){var i=-1,n=t.length,r=e.length;while(++i<n)e[r+i]=t[i];return e}var h=Object.prototype,m=h.hasOwnProperty,p=h.toString,w=u.Symbol,b=h.propertyIsEnumerable,g=w?w.isConcatSpreadable:void 0,y=Math.max;function E(e,t,i,n,r){var l=-1,a=e.length;i||(i=$),r||(r=[]);while(++l<a){var o=e[l];t>0&&i(o)?t>1?E(o,t-1,i,n,r):v(r,o):n||(r[r.length]=o)}return r}function R(e,t){return e=Object(e),x(e,t,(function(t,i){return i in e}))}function x(e,t,i){var n=-1,r=t.length,l={};while(++n<r){var a=t[n],o=e[a];i(o,a)&&(l[a]=o)}return l}function L(e,t){return t=y(void 0===t?e.length-1:t,0),function(){var i=arguments,n=-1,r=y(i.length-t,0),l=Array(r);while(++n<r)l[n]=i[t+n];n=-1;var a=Array(t+1);while(++n<t)a[n]=i[n];return a[t]=l,d(e,this,a)}}function $(e){return _(e)||k(e)||!!(g&&e&&e[g])}function j(e){if("string"==typeof e||I(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function k(e){return T(e)&&m.call(e,"callee")&&(!b.call(e,"callee")||p.call(e)==r)}var _=Array.isArray;function C(e){return null!=e&&S(e.length)&&!O(e)}function T(e){return D(e)&&C(e)}function O(e){var t=F(e)?p.call(e):"";return t==l||t==a}function S(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return!!e&&"object"==typeof e}function I(e){return"symbol"==typeof e||D(e)&&p.call(e)==o}var V=L((function(e,t){return null==e?{}:R(e,f(E(t,1),j))}));e.exports=V}).call(this,i("c8ba"))}}]);
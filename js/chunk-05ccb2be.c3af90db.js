(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05ccb2be"],{5710:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-header-wrapper",{attrs:{title:!1}},[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("添加")]),n("a-button",{attrs:{type:"primary",icon:"edit",disabled:1!==e.selectedRowKeys.length},on:{click:function(t){return e.handleEdit()}}},[e._v("修改")]),n("a-button",{attrs:{type:"primary",icon:"delete",disabled:0===e.selectedRowKeys.length},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"deptId",columns:e.columns,data:e.loadData,alert:!1,rowSelection:e.rowSelection,showPagination:!1,expandRowByClick:!0,defaultExpandAllRows:!0,defaultExpandedRowKeys:e.expandRowKey,customRow:e.onRowEvent},on:{expand:e.onExpand,expandedRowsChange:e.onExpandedRowsChange,"update:expandedRowKeys":e.onExpandedRowKeysUpdate},scopedSlots:e._u([{key:"status",fn:function(t,a,r){return n("span",{on:{click:function(e){e.stopPropagation()}}},[n("a-switch",{attrs:{loading:r===e.switchIndex,checked:e._f("userStatus")(a)},on:{change:function(n){return e.onStatusChange(n,t,a,r)}}})],1)}},{key:"action",fn:function(t,a){return n("span",{},[[n("a",{on:{click:function(t){return t.stopPropagation(),e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return t.stopPropagation(),e.handleDelete(a)}}},[e._v("删除")])]],2)}}])})],1),n("dept-edit",{ref:"createModal",attrs:{visible:e.modalVisible,loading:e.confirmLoading,model:e.modalData},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)},r=[],o=n("5530"),i=(n("a15b"),n("d3b7"),n("c1df")),l=n.n(i),s=n("2af9"),u=n("8593"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.editType,width:640,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(){e.$emit("ok")},cancel:function(){e.$emit("cancel")}}},[n("a-spin",{attrs:{spinning:e.loading}},[n("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[n("a-form-item",{attrs:{label:"归属部门"}},[n("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pDeptId",{initialValue:e.model.pDeptId,rules:[{required:!0,message:"必填"}]}],expression:"['pDeptId', { initialValue: model.pDeptId, rules: [{ required: true, message: '必填' }] }]"}],staticStyle:{width:"100%"},attrs:{"show-search":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},treeData:e.deptData,"tree-default-expand-all":"",name:"pDeptId",placeholder:"请选择归属部门",treeNodeFilterProp:"label"}})],1),n("a-form-item",{attrs:{label:"部门名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deptName",{initialValue:e.model.deptName,rules:[{required:!0,message:"必填"}]}],expression:"['deptName', { initialValue: model.deptName, rules: [{required: true, message: '必填'}] }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"显示顺序"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum",{initialValue:e.model.deptSort,rules:[{required:!0,message:"必填"}]}],expression:"['orderNum', { initialValue: model.deptSort, rules: [{required: true, message: '必填'}] }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"负责人"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["leader",{initialValue:e.model.leader}],expression:"['leader', { initialValue: model.leader }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"联系电话"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{initialValue:e.model.phone}],expression:"['phone', { initialValue: model.phone }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"邮箱"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{initialValue:e.model.email}],expression:"['email', { initialValue: model.email }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"部门状态"}},[n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:e.model.status||"0"}],expression:"['status', { initialValue: model.status || '0' }]"}]},[n("a-radio",{attrs:{value:"0"}},[e._v("正常")]),n("a-radio",{attrs:{value:"1"}},[e._v("停用")])],1)],1)],1)],1)],1)},d=[],f=(n("b64b"),n("159b"),n("d81d"),n("88bc")),p=n.n(f),m=["pDeptId","deptName","deptSort","leader","phone","email","status"],h={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}}},{form:this.$form.createForm(this),editType:"添加"}},created:function(){var e=this;m.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(p()(e.model,m)),e.editType=e.model.deptId?"修改":"添加"}))},computed:{deptData:function(){if(!Object.keys(this.model).length)return[];function e(t){var n={value:t.deptId,label:t.deptName,order:t.orderNum,children:[]};return t.children&&t.children.forEach((function(t){n.children.push(e(t))})),n.children.sort((function(e,t){return e.order-t.order})),n}var t=this.model.depts.map((function(t){return e(t)}));return t.sort((function(e,t){return e.order-t.order})),t}}},v=h,b=n("2877"),w=Object(b["a"])(v,c,d,!1,null,null,null),g=w.exports,y=[{title:"部门名称",dataIndex:"deptName",width:300,ellipsis:!0},{title:"显示顺序",dataIndex:"orderNum",ellipsis:!0},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},ellipsis:!0},{title:"创建时间",dataIndex:"createTime",ellipsis:!0},{title:"操作",scopedSlots:{customRender:"action"}}],P={name:"DeptList",components:{STable:s["c"],DeptEdit:g},data:function(){var e=this;return this.columns=y,{modalVisible:!1,confirmLoading:!1,modalData:{},queryParam:{status:"0"},loadData:function(t){var n=Object.assign({},e.queryParam);return n.status-=1,u["a"].deptList(n).then((function(t){if("0000"===t.responseCode)return t.data=t.depts,e.onSelectChange([],[]),t})).catch((function(){}))},deptData:[],selectedRowKeys:[],selectedRows:[],expandRowKey:[],switchIndex:""}},filters:{userStatus:function(e){return"0"===e.status}},created:function(){var e=this;this.$root.eventHub.$on("refreshView",(function(){e.$refs.table&&e.$refs.table.refresh()}))},beforeRouteLeave:function(e,t,n){this.$root.eventHub.$off("refreshView"),n()},computed:{rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{handleAdd:function(){this.modalVisible=!0,this.modalData={depts:this.$refs.table.localDataSource}},handleEdit:function(e){if(e);else{if(!this.selectedRowKeys.length)return;e=this.selectedRows[0]}this.modalVisible=!0,this.modalData=Object(o["a"])(Object(o["a"])({},e),{},{depts:this.$refs.table.localDataSource})},handleDelete:function(e){var t=this;this.$confirm({title:"系统提示",content:"确认要删除".concat(this.selectedRowKeys.length?"选中的".concat(this.selectedRowKeys.length):"该","条部门数据吗？"),okText:"确认",cancelText:"取消",onOk:function(){t.doDelete(e)},onCancel:function(){}})},doDelete:function(e){var t=this,n="";if(e)n=e.deptId;else{if(!this.selectedRowKeys.length)return;n=this.selectedRowKeys.join(",")}u["a"].deleteDept({deptId:n}).then((function(e){t.$refs.table.refresh(),t.$message.info("删除成功")}))},handleOk:function(){var e=this,t=this.$refs.createModal.form;this.confirmLoading=!0,t.validateFields((function(t,n){if(t)e.confirmLoading=!1;else{var a=e.modalData.deptId,r=a?"updateDept":"addDept",i=Object(o["a"])({},n);a&&(i.deptId=a),u["a"][r](i).then((function(t){e.$message.info("操作成功"),e.handleCancel(),e.$refs.table.refresh()})).catch((function(){e.confirmLoading=!1}))}}))},handleCancel:function(){this.modalVisible=!1,this.confirmLoading=!1,this.modalData={};var e=this.$refs.createModal.form;e.resetFields()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},resetSearchForm:function(){this.queryParam={date:l()(new Date)}},onStatusChange:function(e,t,n,a){var r=this;this.switchIndex=a;var o={deptId:n.deptId,status:"0"===n.status?"1":"0"};u["a"].updateDept(o).then((function(e){n.status="0"===n.status?"1":"0"})).finally((function(){r.switchIndex=""}))},onRowEvent:function(e,t){var n=this;return{on:{click:function(){n.selectedRowKeys=[e.deptId],n.selectedRows=[e]}}}},onExpand:function(){},onExpandedRowsChange:function(){},onExpandedRowKeysUpdate:function(){}}},x=P,R=Object(b["a"])(x,a,r,!1,null,null,null);t["default"]=R.exports},8593:function(e,t,n){"use strict";var a=n("a417"),r="https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",o=Object({NODE_ENV:"production",VUE_APP_PREVIEW:"false",VUE_APP_OUTPUT:"",VUE_APP_API_BASE:"https://mservice.xincaitong.com/KolPlatformWeb/kolPlatform.jhtml",VUE_APP_API_SYSTEM:"https://platform.xincaitong.com/WtPlatformSysWeb/sysPlatform.jhtml",VUE_APP_API_SMS:"https://mservice.xincaitong.com/WtSmsCenter/sms.jhtml",VUE_APP_API_RECORD:"https://mservice.xincaitong.com/WtDataWeb/data.jhtml",VUE_APP_API_TA:"https://margin.xincaitong.com/WtmpGateway",VUE_APP_API_ETFGRID:"https://mservice.xincaitong.com/WtPhoenixGateway/",VUE_APP_API_WX:"https://mservice.xincaitong.com/WtWxPluginWeb/wx.jhtml",VUE_APP_API_MOCK_URL:"/api",BASE_URL:""}).VUE_APP_GAMEID||"eagleeye";function i(e){var t=a["b"].network(e,r);return t}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1.0",r=a["b"].genParams(o,e,t,n);return r}t["a"]={captchaImage:function(e){var t=l("captchaImage",e);return i(t)},login:function(e){var t=l("login",e);return i(t)},updatePwd:function(e){var t=l("updatePwd",e);return i(t)},resetPwd:function(e){var t=l("resetPwd",e);return i(t)},userList:function(e){var t=l("userList",e);return i(t)},addUser:function(e){var t=l("addUser",e);return i(t)},userInfo:function(e){var t=l("userInfo",e);return i(t)},updateUser:function(e){var t=l("updateUser",e);return i(t)},deleteUsers:function(e){var t=l("batchRemoveUser",e);return i(t)},postList:function(e){var t=l("postList",e);return i(t)},addPost:function(e){var t=l("addPost",e);return i(t)},postInfo:function(e){var t=l("postInfo",e);return i(t)},updatePost:function(e){var t=l("updatePost",e);return i(t)},deletePosts:function(e){var t=l("batchRemovePost",e);return i(t)},deptList:function(e){var t=l("deptList",e);return i(t)},addDept:function(e){var t=l("addDept",e);return i(t)},deptInfo:function(e){var t=l("deptInfo",e);return i(t)},updateDept:function(e){var t=l("updateDept",e);return i(t)},deleteDept:function(e){var t=l("removeDept",e);return i(t)},menuList:function(e){var t=l("menuList",e);return i(t)},addMenu:function(e){var t=l("addMenu",e);return i(t)},menuInfo:function(e){var t=l("menuInfo",e);return i(t)},updateMenu:function(e){var t=l("updateMenu",e);return i(t)},deleteMenu:function(e){var t=l("removeMenu",e);return i(t)},logoout:function(e){var t=l("logout",e);return i(t)},simpleRoleList:function(e){var t=l("roleBriefList",e);return i(t)},roleList:function(e){var t=l("roleList",e);return i(t)},addRole:function(e){var t=l("addRole",e);return i(t)},updateRole:function(e){var t=l("updateRole",e);return i(t)},deleteRoles:function(e){var t=l("batchRemoveRole",e);return i(t)},roleMenuData:function(e){var t=l("roleMenuTreeSelect",e);return i(t)},roleUsersAssociated:function(e){var t=l("allocatedList",e);return i(t)},roleUsersUnassociated:function(e){var t=l("unallocatedList",e);return i(t)},associateRoleUsers:function(e){var t=l("selectAuthUserAll",e);return i(t)},disassociateRoleUsers:function(e){var t=l("cancelAuthUserAll",e);return i(t)}}},"88bc":function(e,t,n){(function(t){var n=1/0,a=9007199254740991,r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function f(e,t){var n=-1,a=e?e.length:0,r=Array(a);while(++n<a)r[n]=t(e[n],n,e);return r}function p(e,t){var n=-1,a=t.length,r=e.length;while(++n<a)e[r+n]=t[n];return e}var m=Object.prototype,h=m.hasOwnProperty,v=m.toString,b=c.Symbol,w=m.propertyIsEnumerable,g=b?b.isConcatSpreadable:void 0,y=Math.max;function P(e,t,n,a,r){var o=-1,i=e.length;n||(n=I),r||(r=[]);while(++o<i){var l=e[o];t>0&&n(l)?t>1?P(l,t-1,n,a,r):p(r,l):a||(r[r.length]=l)}return r}function x(e,t){return e=Object(e),R(e,t,(function(t,n){return n in e}))}function R(e,t,n){var a=-1,r=t.length,o={};while(++a<r){var i=t[a],l=e[i];n(l,i)&&(o[i]=l)}return o}function _(e,t){return t=y(void 0===t?e.length-1:t,0),function(){var n=arguments,a=-1,r=y(n.length-t,0),o=Array(r);while(++a<r)o[a]=n[t+a];a=-1;var i=Array(t+1);while(++a<t)i[a]=n[a];return i[t]=o,d(e,this,i)}}function I(e){return A(e)||E(e)||!!(g&&e&&e[g])}function D(e){if("string"==typeof e||C(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function E(e){return V(e)&&h.call(e,"callee")&&(!w.call(e,"callee")||v.call(e)==r)}var A=Array.isArray;function S(e){return null!=e&&U(e.length)&&!j(e)}function V(e){return k(e)&&S(e)}function j(e){var t=L(e)?v.call(e):"";return t==o||t==i}function U(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function L(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function k(e){return!!e&&"object"==typeof e}function C(e){return"symbol"==typeof e||k(e)&&v.call(e)==l}var O=_((function(e,t){return null==e?{}:x(e,f(P(t,1),D))}));e.exports=O}).call(this,n("c8ba"))}}]);
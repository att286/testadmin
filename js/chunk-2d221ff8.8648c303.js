(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221ff8"],{cd78:function(a,e,t){"use strict";t.r(e);var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("page-header-wrapper",{attrs:{title:!1}},[t("a-spin",{attrs:{spinning:a.spinning}},[t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"渠道",labelCol:{span:6},wrapperCol:{span:18}}},[t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"所有渠道","default-active-first-option":!a.multipleChannel,disabled:!a.multipleChannel,"show-arrow":!0},on:{change:a.switchChannel},model:{value:a.curChannelId,callback:function(e){a.curChannelId=e},expression:"curChannelId"}},a._l(a.cardChannelOptions,(function(e){return t("a-select-option",{key:e.value,attrs:{value:e.value}},[a._v(" "+a._s(e.label)+" ")])})),1)],1)],1)],1)],1)],1),t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"客户姓名"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:""},model:{value:a.queryParam.customerName,callback:function(e){a.$set(a.queryParam,"customerName",e)},expression:"queryParam.customerName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"客户电话"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:""},model:{value:a.queryParam.customerPhone,callback:function(e){a.$set(a.queryParam,"customerPhone",e)},expression:"queryParam.customerPhone"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"银行名称"}},[t("a-select",{attrs:{labelInValue:!0,options:a.bankData,loading:a.bankDataLoading,showSearch:"",optionFilterProp:"children",allowClear:"",placeholder:"请选择"},model:{value:a.queryParam.bank,callback:function(e){a.$set(a.queryParam,"bank",e)},expression:"queryParam.bank"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"办理方式"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:a.queryParam.processamento,callback:function(e){a.$set(a.queryParam,"processamento",e)},expression:"queryParam.processamento"}},[t("a-select-option",{attrs:{value:"1"}},[a._v("同城")]),t("a-select-option",{attrs:{value:"2"}},[a._v("预约")])],1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"选择省份"}},[t("a-select",{attrs:{options:a.cityData,loading:a.areaLoading,showSearch:"",allowClear:"",placeholder:"请选择"},on:{change:a.onProvinceChange},model:{value:a.queryParam.province,callback:function(e){a.$set(a.queryParam,"province",e)},expression:"queryParam.province"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"选择城市"}},[t("a-select",{attrs:{options:a.cityList,loading:a.areaLoading,showSearch:"",allowClear:"",filterOption:a.onCitySearch,placeholder:"请选择"},on:{change:a.onCityChange},model:{value:a.queryParam.city,callback:function(e){a.$set(a.queryParam,"city",e)},expression:"queryParam.city"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"开卡时间"}},[t("a-range-picker",{attrs:{value:a.accountTimes,placeholder:["开始时间","结束时间"],format:"YYYY-MM",mode:a.pickerMode},on:{panelChange:a.handlePanelChange,change:a.handleChange}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return a.$refs.table.refresh(!0)}}},[a._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:a.resetQueryParams}},[a._v("重置")])],1)])],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:function(a,e){return e},columns:a.columns,data:a.loadData,alert:!1,scroll:{x:a.tableX},showPagination:"auto"},scopedSlots:a._u([{key:"action",fn:function(e,n){return t("span",{},[[n.isSpecial?a._e():t("a",{on:{click:function(e){return a.handleInfo(n)}}},[a._v("查看详情")])]],2)}}])})],1)],1)],1)},r=[],o=t("5530"),i=(t("99af"),t("d3b7"),t("d81d"),t("159b"),t("7db0"),t("2af9")),l=t("f306"),c=t("2f62"),s=[{title:"开卡时间",dataIndex:"accountTime",width:140},{title:"客户姓名",dataIndex:"customerName",width:120},{title:"客户电话",dataIndex:"customerPhone",width:160},{title:"办理方式",dataIndex:"processamento",width:100,customRender:function(a){return"1"===a?"同城":"预约"}},{title:"银行名称",dataIndex:"bankName",width:160},{title:"地区",dataIndex:"province",width:140,customRender:function(a,e){return a===e.city?e.city:"".concat(a," ").concat(e.city)}},{title:"奖励金额",dataIndex:"channelAward",width:100}],u={name:"ChannelOrder",components:{STable:i["c"]},data:function(){var a=this;return this.columns=s,{spinning:!1,curChannelId:"0",dataList:[],queryParam:{},bankData:[],bankDataLoading:!1,cityData:[],cityList:[],areaLoading:!1,accountTimes:void 0,pickerMode:["month","month"],loadData:function(e){var t=Object.assign({},e,a.queryParam);return t.pageNum=e.pageNo,delete t.pageNo,t.bank&&(t.bankName=t.bank.label,delete t.bank),t.channelId&&"0"!==t.channelId&&(t.cardChannelId=t.channelId),delete t.channelId,l["a"].hkcardChannelOrders(t).then((function(a){return a.totalCount=+a.total,a.pageNo=+e.pageNo,a.data=a.list,a})).catch((function(){}))}}},filters:{},created:function(){var a=this;this.$root.eventHub.$on("refreshView",(function(){a.$refs.table&&a.$refs.table.refresh()})),this.multipleChannel||(this.curChannelId=this.cardChannelOptions[1].value,this.queryParam.channelId=this.curChannelId),this.bankDataLoading=!0,l["a"].hkcardBankList().then((function(e){a.bankData=e.bankList.map((function(a){var e={value:a.bankId,label:a.bankName};return e}))})).finally((function(){a.bankDataLoading=!1})),this.areaLoading=!0,l["a"].hkcardAreaList().then((function(e){a.cityData=e.areaList.map((function(a){var e={value:a.province,label:a.province};return e.children=a.cityList.map((function(a){var e={value:a.city,label:a.city};return e})),e}))})).finally((function(){a.areaLoading=!1}))},mounted:function(){},beforeRouteLeave:function(a,e,t){this.$root.eventHub.$off("refreshView"),t()},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["cardChannelOptions"])),{},{multipleChannel:function(){return"2"===this.$store.state.user.userType},tableX:function(){var a=0;return this.columns.forEach((function(e){a+=e.width})),a}}),watch:{accountTimes:function(a){a&&(this.queryParam.accountTimeStart=a[0]?a[0].format("YYYY-MM"):"",this.queryParam.accountTimeEnd=a[1]?a[1].format("YYYY-MM"):"")}},methods:{switchChannel:function(a){this.queryParam.channelId=this.curChannelId,this.dataList=[],this.$refs.table.refresh(!0)},resetQueryParams:function(){this.queryParam={},this.accountTimes=void 0,this.curChannelId&&(this.queryParam.channelId=this.curChannelId),this.$refs.table.refresh(!0)},onProvinceChange:function(a,e){e?(this.queryParam.province=a,this.cityList=this.cityData.find((function(e){return e.value===a})).children,delete this.queryParam.city):(delete this.queryParam.province,delete this.queryParam.city,this.cityList=[])},onCityChange:function(a,e){},onCitySearch:function(a,e){var t=e.componentOptions.children[0].text.toLowerCase().indexOf(a.toLowerCase())>=0;return t},handleChange:function(a){this.accountTimes=a},handlePanelChange:function(a,e){this.accountTimes=a,this.pickerMode=["date"===e[0]?"month":e[0],"date"===e[1]?"month":e[1]]}}},h=u,d=t("2877"),m=Object(d["a"])(h,n,r,!1,null,"52028a8c",null);e["default"]=m.exports}}]);
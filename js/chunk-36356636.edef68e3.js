(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36356636"],{"51d1":function(e,t,a){},c73a:function(e,t,a){"use strict";a("51d1")},f0e3:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return g})),a.d(t,"i",(function(){return C})),a.d(t,"h",(function(){return x})),a.d(t,"d",(function(){return P})),a.d(t,"b",(function(){return _}));a("99af"),a("4de4");var i=a("ca00"),r=[{title:"顺序编号",dataIndex:"sortValue",width:90,ellipsis:!0,customRender:function(e){return Object(i["g"])(e)}},{title:"策略名称",dataIndex:"strategyName",ellipsis:!1,width:90,customRender:function(e){return Object(i["g"])(e)}},{title:"初始资金",dataIndex:"_principal",ellipsis:!1,width:90,customRender:function(e){return Object(i["g"])(e,"元")}},{title:"创建时间",dataIndex:"createTime",ellipsis:!1,width:110,customRender:function(e){return Object(i["g"])(e)}},{title:"运作天数",dataIndex:"workDays",ellipsis:!1,width:90,customRender:function(e){return Object(i["g"])(e,"天")}},{title:"持仓证券",dataIndex:"bondNums",ellipsis:!1,width:90,scopedSlots:{customRender:"action"},suffix:"支",tip:"点击管理策略持仓"},{title:"上架状态",dataIndex:"isActive",width:90,ellipsis:!0,scopedSlots:{customRender:"available"}},{title:"操作",width:110,scopedSlots:{customRender:"action"}}],o=[{title:"名称代码",dataIndex:"bondName",ellipsis:!1,width:90,customRender:function(e,t){return n(e,t)}},{title:"持仓数量",dataIndex:"stockShares",ellipsis:!1,width:90,customRender:function(e){return Object(i["g"])(e,"股")}},{title:"持仓成本",dataIndex:"_costPrice",ellipsis:!1,width:90,customRender:function(e){return Object(i["g"])(e,"元")}},{title:"条件单设置",dataIndex:"_conditionStr",ellipsis:!1,width:90,scopedSlots:{customRender:"action"},tip:"点击设置条件单"},{title:"仓位调整",width:110,scopedSlots:{customRender:"action"}}];function n(e,t){var a=t.bondName,i=t.bondCode,r="".concat(a,"(").concat(i,")");return r}var l=[{title:"可转债代码",dataIndex:"bondCode",ellipsis:!1,width:90},{title:"可转债名称",dataIndex:"bondName",ellipsis:!1,width:90},{title:"错误原因",dataIndex:"failDes",ellipsis:!1}],s=[{label:"开启",value:1},{label:"关闭",value:0}],u={price:{value:10,label:"价格条件单"},grid:{value:20,label:"网格条件单"}},d=Object(i["h"])(u),c=[{label:"1个交易日",value:1},{label:"5个交易日",value:5},{label:"20个交易日",value:20},{label:"60个交易日",value:60},{label:"长期有效",value:0}],m=[{label:"大于等于",value:1,unit:"≥"},{label:"小于等于",value:0,unit:"≤"}],p=[{label:"买入",value:1},{label:"卖出",value:0}],f=[{label:"无操作",value:10},{label:"立即按最新现价止损清仓(仅触发部分)",value:20}],v=[{label:"无操作",value:10},{label:"立即按最新现价止赢清仓(仅触发部分)",value:20}],g={percent:{value:10,label:"按百分比",unit:"%"},price:{value:20,label:"按差价",unit:"元"}},b=Object(i["h"])(g),h=[{label:"立即",value:0},{label:"回落",value:1}],y=[{label:"立即",value:0},{label:"反弹",value:1}],C={limit:{value:10,label:"限价委托"},market:{value:20,label:"市价委托"},custom:{value:30,label:"自定义价格"}},w=Object(i["h"])(C),V=w.filter((function(e,t){return t<2})),x={amount:{value:10,label:"按股数委托",unit:"股",title:"委托股数"},cost:{value:20,label:"按金额委托",unit:"元",title:"委托金额"}},S=Object(i["h"])(x),T=[{label:"涨停价",value:16},{label:"即时卖五价",value:15},{label:"即时卖四价",value:14},{label:"即时卖三价",value:13},{label:"即时卖二价",value:12},{label:"即时卖一价",value:11},{label:"即时限价",value:0},{label:"即时买一价",value:1},{label:"即时买二价",value:2},{label:"即时买三价",value:3},{label:"即时买四价",value:4},{label:"即时买五价",value:5},{label:"跌停价",value:6}],R=[{label:"最优五档即时成交剩余撤销",value:1},{label:"最优五档即时成交剩余转限",value:2}],O={time:{value:10,label:"监控时段"},deviation:{value:20,label:"偏差控制"},price:{value:30,label:"报价优化"},delay:{value:40,label:"延迟确定"},lowest:{value:50,label:"保底价触发"}},k=[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5}],P={series:{value:10,label:"连续确认"},Cumulative:{value:20,label:"累计确认"}},M=Object(i["h"])(P),_={activeOpts:s,conditionTypes:u,conditionTypeOpts:d,conditionEndOpts:c,triggerSymbolOpts:m,triggerActionOpts:p,overPriceMinOpts:f,overPriceMaxOpts:v,fluctuateTypes:g,fluctuateOpts:b,riseActionOpts:h,fallActionOpts:y,trustTypeOpts:w,trustTypeOpts2:V,trustModeOpts:S,limitPriceOpts:T,marketPriceOpts:R,advTypes:O,daysInWeek:k,delayTypeOpts:M}},f86d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-card",{attrs:{bordered:!1}},[a("a-descriptions",{attrs:{title:"",column:1}},[a("a-descriptions-item",{attrs:{label:"策略名称"}},[e._v(e._s(e.routeParams.strategyName))])],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"link",icon:"arrow-left"},on:{click:e.goBack}},[e._v("返回")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleUpdate("bond")}}},[e._v("添加可转债")]),a("uploader",{staticStyle:{margin:"-4px 0",padding:"0",display:"inline-block"},attrs:{visible:!0,exId:"bondTemplate",listType:"text",accept:".xls, .xlsx",fileType:"document",maxCount:1,maxSize:5,exName:"bondsList/"+this.routeParams.id,showUploadList:!1,noTime:!0},on:{customUploadRequest:e.customUploadRequest}},[a("a-button",{attrs:{slot:"btn",type:"primary",icon:"upload",loading:e.uploadingFile},slot:"btn"},[e._v(" 导入可转债 ")])],1),a("a-button",{attrs:{type:"primary",icon:"download",loading:e.loadingFile},on:{click:e.handleDownloadTemplate}},[e._v(" 下载导入模板 ")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,alert:!1,rowSelection:null,scroll:{x:e.tableX},showPagination:!1},scopedSlots:e._u([{key:"available",fn:function(t,i,r,o){return a("span",{},[a("a-switch",{attrs:{loading:r===e.switchIndex,checked:e._f("available")(t)},on:{change:function(a){return e.onStatusChange(a,t,i,r,o.dataIndex)}}})],1)}},{key:"action",fn:function(t,i,r,o){return a("span",{},[o.dataIndex?[a("a-tooltip",{attrs:{title:o.tip}},[a("a",{staticStyle:{color:"#1890ff"},on:{click:function(t){return e.handleUpdate("condition",i)}}},[e._v(e._s(t))])])]:[a("a",{staticStyle:{color:"#F12323"},on:{click:function(t){return e.handleUpdate("trade",i,1)}}},[e._v("买入")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{staticStyle:{color:"#52C41A"},on:{click:function(t){return e.handleUpdate("trade",i,0)}}},[e._v("卖出")])]],2)}}])})],1),a("custom-bond-edit",{ref:"bond",attrs:{visible:e.modalParams.bond.visible,loading:e.modalParams.bond.loading,model:e.modalParams.bond.data},on:{cancel:e.onUpdateCancel,ok:e.onUpdateDone}}),a("custom-bond-trade",{ref:"trade",attrs:{visible:e.modalParams.trade.visible,loading:e.modalParams.trade.loading,model:e.modalParams.trade.data},on:{cancel:e.onUpdateCancel,ok:e.onUpdateDone}}),a("custom-bond-condition",{ref:"condition",attrs:{visible:e.modalParams.condition.visible,loading:e.modalParams.condition.loading,model:e.modalParams.condition.data},on:{cancel:e.onUpdateCancel,ok:e.onUpdateDone}})],1)],1)},r=[],o=a("ade3"),n=a("5530"),l=a("1da1"),s=(a("96cf"),a("159b"),a("b64b"),a("d3b7"),a("8ded")),u=a.n(s),d=a("9fb0"),c=a("2af9"),m=a("4282"),p=a("ca00"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,maskClosable:!1,visible:e.visible,confirmLoading:e.spinning,centered:!0,okButtonProps:{props:{disabled:!e.bondName}},bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(t){e.handleSubmit(t)},cancel:function(){e.handleCancel()}}},[a("a-spin",{attrs:{spinning:e.spinning||e.codeValidating}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"代码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["bondCode",{initialValue:e.model.bondCode,validateTrigger:"change",rules:[e.genValidatorRules({type:"integer",min:1e5,max:999999,message:"请输入合法的可转债代码"})]}],expression:"['bondCode', { initialValue: model.bondCode, validateTrigger: 'change', rules:[\n            genValidatorRules({ type: 'integer', min: 100000, max: 999999, message: '请输入合法的可转债代码' }),\n          ] }]"}],style:{width:"80%"},attrs:{"allow-clear":"",placeholder:"请输入6位可转债代码，按下回车查询","max-length":6},on:{change:e.onCodeChange,pressEnter:e.onCodeEnter,blur:e.onCodeBlur}}),a("a-button",{staticStyle:{color:"#1890FF"},attrs:{type:"link",loading:e.codeValidating},on:{click:function(t){return e.reqBondInfo()}}},[e._v("查询")])],1),[a("a-form-item",{attrs:{label:"名称"}},[e._v(" "+e._s(e.bondName||"--")+" ")]),a("a-form-item",{attrs:{label:"成本"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["costPrice",{initialValue:e.model._costPrice,rules:[e.genValidatorRules({type:"price"})]}],expression:"['costPrice', { initialValue: model._costPrice, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("a-form-item",{attrs:{label:"数量"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stockShares",{initialValue:e.model.stockShares,rules:[e.genValidatorRules({type:"integer",min:1})]}],expression:"['stockShares', { initialValue: model.stockShares, rules:[genValidatorRules({ type: 'integer', min: 1 })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"股","max-length":8}})],1)]],2)],1)],1)},v=[],g=(a("ddb0"),{name:"CustomBondEdit",props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{span:4},wrapperCol:{span:20}},{form:this.$form.createForm(this),spinning:!1,editType:0,title:"可转债建仓",submitMethod:"cbCustomBondAdd",genValidatorRules:p["i"],codeValidating:!1,bondName:""}},computed:{},created:function(){var e=this;this.bondsInfo={},this.bondsError={},this.$watch("visible",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a,i){var r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(e.form.resetFields(),r=e.model,o=r.id,n=r.strategy,e.title="可转债建仓(".concat(n.strategyName,")"),e.bondName="",e.editType=o?1:0);case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},mounted:function(){},methods:{reqBondInfo:function(e){var t=this;if(!this.codeValidating&&(e||(e=this.form.getFieldValue("bondCode")),e&&Object(p["p"])(e)&&6===e.length)){var a=this.bondsError[e];if(a)this.form.setFields({bondCode:{value:e,errors:[new Error("可转债代码错误")]}});else{var i=this.bondsInfo[e];if(!i){this.codeValidating=!0;var r={bondCode:e};return m["a"].cbGetBondInfo(r).then((function(e){var a=e.result,i=a.bondCode,r=a.bondName;t.bondsInfo[i]=r,t.bondName=r})).catch((function(a){t.bondsError[e]=!0,t.form.setFields({bondCode:{value:e,errors:[new Error("可转债代码错误")]}})})).finally((function(){t.codeValidating=!1}))}this.bondName=i}}},checkCode:function(e,t,a){setTimeout((function(){a()}),0)},onCodeChange:function(e){var t=this,a=e.target.value;this.bondName=this.bondsInfo[a];var i=this.bondsError[a];i&&this.$nextTick((function(){t.form.setFields({bondCode:{value:a,errors:[new Error("可转债代码错误")]}})}))},onCodeBlur:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:setTimeout(Object(l["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.visible){a.next=2;break}return a.abrupt("return");case 2:i=e.target.value,t.reqBondInfo(i);case 4:case"end":return a.stop()}}),a)}))),10);case 1:case"end":return a.stop()}}),a)})))()},onCodeEnter:function(e){var t=e.target.value;this.reqBondInfo(t)},handleSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form.validateFieldsAndScroll(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a,i){var r,o,n,l,s,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=25;break}return e.next=3,t.reqBondInfo();case 3:if(r=t.bondName,r){e.next=6;break}return e.abrupt("return");case 6:o=t.model.strategy.id,n=Object.assign({customId:o,bondName:r},i),n.costPrice*=1e3,l=!1,e.t0=regeneratorRuntime.keys(n);case 11:if((e.t1=e.t0()).done){e.next=18;break}if(s=e.t1.value,n[s]+""===t.model[s]+""){e.next=16;break}return l=!0,e.abrupt("break",18);case 16:e.next=11;break;case 18:if(l){e.next=21;break}return t.$emit("cancel"),e.abrupt("return");case 21:u=t.submitMethod,d=n,t.spinning=!0,m["a"][u](d).then((function(e){t.$message.success("操作成功"),t.$emit("ok",t.model.modalId)})).catch((function(e){})).finally((function(){t.spinning=!1}));case 25:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},handleCancel:function(){this.$emit("cancel",this.model.modalId)}}}),b=g,h=a("2877"),y=Object(h["a"])(b,f,v,!1,null,null,null),C=y.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:640,maskClosable:!1,visible:e.visible,confirmLoading:e.spinning,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:function(t){e.handleSubmit(t)},cancel:function(){e.handleCancel()}}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form",e._b({attrs:{form:e.form},on:{submit:e.handleSubmit}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"名称"}},[e._v(" "+e._s(e.model.bondName)+" ")]),a("a-form-item",{attrs:{label:"代码"}},[e._v(" "+e._s(e.model.bondCode)+" ")]),a("a-form-item",{attrs:{label:"成本"}},[e._v(" "+e._s(e.model._costPrice)+"元 ")]),a("a-form-item",{attrs:{label:"数量"}},[e._v(" "+e._s(e.model.stockShares)+"股 ")]),a("a-form-item",{attrs:{label:e.action+"价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:"",rules:[e.genValidatorRules({type:"price"})]}],expression:"['price', { initialValue: '', rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("a-form-item",{attrs:{label:e.action+"数量"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["stockShares",{initialValue:"",rules:[e.genValidatorRules({type:"integer",min:1})]}],expression:"['stockShares', { initialValue: '', rules:[genValidatorRules({ type: 'integer', min: 1 })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"股","max-length":8}})],1)],1)],1)],1)},V=[],x={name:"CustomBondTrade",props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{span:4},wrapperCol:{span:20}},{form:this.$form.createForm(this),spinning:!1,editType:0,title:"可转债调仓",submitMethod:"",action:"",genValidatorRules:p["i"]}},computed:{},created:function(){var e=this;this.$watch("visible",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a,i){var r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(e.form.resetFields(),r=e.model,o=r.bondName,n=r.action,n?(e.editType=1,e.title="买入可转债(".concat(o,")"),e.submitMethod="cbCustomBondBuy",e.action="买入"):(e.editType=0,e.title="卖出可转债(".concat(o,")"),e.submitMethod="cbCustomBondSell",e.action="卖出"));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},mounted:function(){},methods:{handleSubmit:function(e){var t=this;this.form.validateFieldsAndScroll((function(e,a){if(!e){var i=t.model,r=i.strategy.id,o=i.bondCode,n=i.bondName,l=Object.assign({customId:r,bondCode:o,bondName:n},a);l.price*=1e3;var s=!1;for(var u in l)if(l[u]+""!==t.model[u]+""){s=!0;break}if(!s)return void t.$emit("cancel");var d=t.submitMethod,c=l;t.spinning=!0,m["a"][d](c).then((function(e){t.$message.success("操作成功"),t.$emit("ok",t.model.modalId)})).catch((function(e){})).finally((function(){t.spinning=!1}))}}))},handleCancel:function(){this.$emit("cancel",this.model.modalId)}}},S=x,T=Object(h["a"])(S,w,V,!1,null,null,null),R=T.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,width:e.conditionActive?960:680,maskClosable:!1,visible:e.visible,confirmLoading:e.spinning,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto",paddingTop:0}},on:{ok:function(t){e.handleSubmit(t)},cancel:function(){e.handleCancel()}}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form",e._b({staticClass:"form",attrs:{form:e.form,labelAlign:"right"},on:{submit:e.handleSubmit}},"a-form",e.formLayout,!1),[a("a-col",{attrs:{span:14}},[a("h3",[e._v("基础设置")]),a("a-form-item",{staticClass:"form-item",attrs:{label:"条件单状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["conditionActive",{initialValue:e.conditionActive,rules:[{required:!0,message:"必填"}]}],expression:"['conditionActive', { initialValue: conditionActive, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"conditionActive",options:e.conditionCfg.activeOpts},on:{change:e.onRadioChange}})],1),e.conditionActive?[a("a-form-item",{staticClass:"form-item",attrs:{label:"条件单类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:e.conditionType,rules:[{required:!0,message:"必填"}]}],expression:"['type', { initialValue: conditionType, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"conditionType",options:e.conditionCfg.conditionTypeOpts},on:{change:e.onRadioChange}})],1)]:e._e(),e.conditionActive&&e.conditionType===e.conditionTypes.price.value?[a("h3",[e._v("触发条件")]),a("a-form-item",{staticClass:"form-item",attrs:{label:"触发价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.price",{initialValue:e.condition.triggerCond.price,rules:[e.genValidatorRules({type:"price"})]}],expression:"['triggerCond.price', { initialValue: condition.triggerCond.price, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"触发方向",extra:""}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.symbol",{initialValue:e.condition.triggerCond.symbol,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.symbol', { initialValue: condition.triggerCond.symbol, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.triggerSymbolOpts}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"触发后操作"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.opt",{initialValue:e.condition.triggerCond.opt,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.opt', { initialValue: condition.triggerCond.opt, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.triggerActionOpts}})],1),a("h3",[e._v("委托设置")]),a("a-form-item",{staticClass:"form-item",attrs:{label:"委托类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.type",{initialValue:e.trustType,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.type', { initialValue: trustType, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"trustType",options:e.trustTypeOpts},on:{change:e.onRadioChange}})],1),e.trustType!==e.trustTypes.custom.value?a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"委托价格"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.value",{initialValue:e.condition.trustConf.value,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.value', { initialValue: condition.trustConf.value, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.trustPriceOpts}})],1):a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"委托价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.value",{initialValue:e.condition.trustConf.value,rules:[e.genValidatorRules({type:"price"})]}],expression:"['trustConf.value', { initialValue: condition.trustConf.value, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"委托方式"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.type",{initialValue:e.trustMode,rules:[{required:!0,message:"必填"}]}],expression:"['trustMode.type', { initialValue: trustMode, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"trustMode",options:e.conditionCfg.trustModeOpts},on:{change:e.onRadioChange}})],1),a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:e.trustModeCfg.title}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.value",{initialValue:e.condition.trustMode.value,rules:[e.genValidatorRules({type:"price"})]}],expression:"['trustMode.value', { initialValue: condition.trustMode.value, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.trustModeCfg.unit}})],1)]:e._e(),e.conditionActive&&e.conditionType===e.conditionTypes.grid.value?[a("h3",[e._v("触发条件")]),a("a-form-item",{staticClass:"form-item",attrs:{label:"价格区间",required:""}},[a("div",{staticClass:"row-start-center"},[a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.priceMin",{initialValue:e.condition.triggerCond.priceMin,rules:[e.genValidatorRules({type:"price"})]}],expression:"['triggerCond.priceMin', { initialValue: condition.triggerCond.priceMin, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("span",{staticStyle:{margin:"0 10px"}},[e._v("~")]),a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.priceMax",{initialValue:e.condition.triggerCond.priceMax,rules:[e.genValidatorRules({type:"price"})]}],expression:"['triggerCond.priceMax', { initialValue: condition.triggerCond.priceMax, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1)],1)]),a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"超出价格下限"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.overMinOpt",{initialValue:e.condition.triggerCond.overMinOpt,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.overMinOpt', { initialValue: condition.triggerCond.overMinOpt, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.overPriceMinOpts}})],1),a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"超出价格上限"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.overMaxOpt",{initialValue:e.condition.triggerCond.overMaxOpt,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.overMaxOpt', { initialValue: condition.triggerCond.overMaxOpt, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.overPriceMaxOpts}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"触发基准价"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.guidePrice",{initialValue:e.condition.triggerCond.guidePrice,rules:[e.genValidatorRules({type:"price"})]}],expression:"['triggerCond.guidePrice', { initialValue: condition.triggerCond.guidePrice, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":"元"}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"涨跌类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.riseFallType",{initialValue:e.fluctuateType,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.riseFallType', { initialValue: fluctuateType, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"fluctuateType",options:e.conditionCfg.fluctuateOpts},on:{change:e.onRadioChange}})],1),a("a-form-item",{staticClass:"form-item",attrs:{label:"上涨",required:""}},[a("div",{staticClass:"row-start-top",staticStyle:{"margin-top":"4px"}},[a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"125px"},attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.sellPrice",{initialValue:e.condition.triggerCond.sellPrice,rules:[e.genValidatorRules({type:10===e.fluctuateType?"percent":"price"})]}],expression:"['triggerCond.sellPrice', { initialValue: condition.triggerCond.sellPrice, rules: [genValidatorRules({ type: fluctuateType === 10 ? 'percent' : 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.fluctuateTypeCfg.unit}})],1),a("span",{staticStyle:{margin:"0 6px","line-height":"32px"}},[e._v("后")]),a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"80px"},attrs:{label:""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.isSellFallBack",{initialValue:e.fluctuateRiseAction,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.isSellFallBack', { initialValue: fluctuateRiseAction, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"fluctuateRiseAction",placeholder:"请选择",options:e.conditionCfg.riseActionOpts},on:{change:function(t){return e.onSelectChange(t,"fluctuateRiseAction")}}})],1),e.fluctuateRiseAction?a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"125px","margin-left":"6px"},attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.sellFallBackPrice",{initialValue:e.condition.triggerCond.sellFallBackPrice,rules:[e.genValidatorRules({type:10===e.fluctuateType?"percent":"price"})]}],expression:"['triggerCond.sellFallBackPrice', { initialValue: condition.triggerCond.sellFallBackPrice, rules: [genValidatorRules({ type: fluctuateType === 10 ? 'percent' : 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.fluctuateTypeCfg.unit}})],1):e._e(),a("span",{staticStyle:{margin:"0","margin-left":"6px","line-height":"32px"}},[e._v("卖出")])],1)]),a("a-form-item",{staticClass:"form-item",attrs:{label:"下跌",required:""}},[a("div",{staticClass:"row-start-top",staticStyle:{"margin-top":"4px"}},[a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"125px"},attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.buyPirce",{initialValue:e.condition.triggerCond.buyPirce,rules:[e.genValidatorRules({type:10===e.fluctuateType?"percent":"price"})]}],expression:"['triggerCond.buyPirce', { initialValue: condition.triggerCond.buyPirce, rules: [genValidatorRules({ type: fluctuateType === 10 ? 'percent' : 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.fluctuateTypeCfg.unit}})],1),a("span",{staticStyle:{margin:"0 6px","line-height":"32px"}},[e._v("后")]),a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"80px"},attrs:{label:""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.isBuyTurn",{initialValue:e.fluctuateFallAction,rules:[{required:!0,message:"必填"}]}],expression:"['triggerCond.isBuyTurn', { initialValue: fluctuateFallAction, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"fluctuateFallAction",placeholder:"请选择",options:e.conditionCfg.fallActionOpts},on:{change:function(t){return e.onSelectChange(t,"fluctuateFallAction")}}})],1),e.fluctuateFallAction?a("a-form-item",{staticClass:"form-sub-item small",staticStyle:{width:"125px","margin-left":"6px"},attrs:{label:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["triggerCond.buyTrunPrice",{initialValue:e.condition.triggerCond.buyTrunPrice,rules:[e.genValidatorRules({type:10===e.fluctuateType?"percent":"price"})]}],expression:"['triggerCond.buyTrunPrice', { initialValue: condition.triggerCond.buyTrunPrice, rules: [genValidatorRules({ type: fluctuateType === 10 ? 'percent' : 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.fluctuateTypeCfg.unit}})],1):e._e(),a("span",{staticStyle:{margin:"0","margin-left":"6px","line-height":"32px"}},[e._v("买入")])],1)]),a("h3",[e._v("委托设置")]),a("a-form-item",{staticClass:"form-item",attrs:{label:"委托价格类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.type",{initialValue:e.trustType,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.type', { initialValue: trustType, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"trustType",options:e.trustTypeOpts},on:{change:e.onRadioChange}})],1),e.trustType===e.trustTypes.limit.value?[a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"买入价格"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.buyValue",{initialValue:e.condition.trustConf.buyValue,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.buyValue', { initialValue: condition.trustConf.buyValue, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.trustPriceOpts}})],1),a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"卖出价格"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.sellValue",{initialValue:e.condition.trustConf.sellValue,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.sellValue', { initialValue: condition.trustConf.sellValue, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.trustPriceOpts}})],1)]:e.trustType===e.trustTypes.market.value?a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"委托价格"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustConf.value",{initialValue:e.condition.trustConf.value,rules:[{required:!0,message:"必填"}]}],expression:"['trustConf.value', { initialValue: condition.trustConf.value, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.trustPriceOpts}})],1):e._e(),a("a-form-item",{staticClass:"form-item",attrs:{label:"委托方式"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.type",{initialValue:e.trustMode,rules:[{required:!0,message:"必填"}]}],expression:"['trustMode.type', { initialValue: trustMode, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"trustMode",options:e.conditionCfg.trustModeOpts},on:{change:e.onRadioChange}})],1),a("a-form-item",{staticClass:"form-item sub-item",attrs:{label:"每笔委托"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.everyValue",{initialValue:e.condition.trustMode.everyValue,rules:[e.genValidatorRules({type:"price"})]}],expression:"['trustMode.everyValue', { initialValue: condition.trustMode.everyValue, rules: [genValidatorRules({ type: 'price' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.trustModeCfg.unit}})],1),a("a-form-item",{staticClass:"form-item sub-item"},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 最大持仓 "),a("a-tooltip",{attrs:{title:"等于或超过该值，不再进行买入操作，网格休眠"}},[a("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.maxHold",{initialValue:e.condition.trustMode.maxHold,rules:[e.genValidatorRules({required:!1,type:"number"})]}],expression:"['trustMode.maxHold', { initialValue: condition.trustMode.maxHold, rules: [genValidatorRules({ required: false, type: 'number' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.trustModeCfg.unit}})],1),a("a-form-item",{staticClass:"form-item sub-item"},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 最小底仓 "),a("a-tooltip",{attrs:{title:"等于或小于该值，不再进行卖出操作，网格休眠"}},[a("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.minHold",{initialValue:e.condition.trustMode.minHold,rules:[e.genValidatorRules({required:!1,type:"number"})]}],expression:"['trustMode.minHold', { initialValue: condition.trustMode.minHold, rules: [genValidatorRules({ required: false, type: 'number' })] }]"}],attrs:{placeholder:"请输入","allow-clear":"","addon-after":e.trustModeCfg.unit}})],1),a("a-form-item",{staticClass:"form-item sub-item"},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 倍数委托 "),a("a-tooltip",[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("每笔委托下单时报送的数量，会根据行情波动幅度与条件设定的涨跌幅，成倍数关系委托下。"),a("br"),e._v("例：设定上涨2%卖出，每笔委托股数100股，第二天涨停，此时将会以10%除以2%，也就是5倍关系委托下单，委托股数乘以5倍，以500股下单。")]),a("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["trustMode.isMultiTrust",{initialValue:e.condition.trustMode.isMultiTrust,rules:[{required:!1,message:"必填"}]}],expression:"['trustMode.isMultiTrust', { initialValue: condition.trustMode.isMultiTrust, rules: [{ required: false, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.activeOpts}})],1)]:e._e()],2),e.conditionActive?a("a-col",{attrs:{span:1}}):e._e(),e.conditionActive?a("a-col",{attrs:{span:9}},[a("h3",[e._v("条件单有效期")]),a("a-form-item",e._b({staticClass:"form-item",attrs:{label:"有效时长"}},"a-form-item",e.formLayoutRight,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["closeDate",{initialValue:e.condition.closeDate||0,rules:[{required:!0,message:"必填"}]}],expression:"['closeDate', { initialValue: condition.closeDate || 0, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.conditionCfg.conditionEndOpts}})],1),a("h3",[e._v("高级设置")]),a("a-form-item",e._b({staticClass:"form-item",attrs:{label:"监控时段"}},"a-form-item",e.formLayoutRight,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.advTimeState",{initialValue:e.advTimeState,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.advTimeState', { initialValue: advTimeState, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"advTimeState",options:e.conditionCfg.activeOpts},on:{change:e.onRadioChange}})],1),e.advTimeState?[a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"周期时段",required:""}},"a-form-item",e.formLayoutRight,!1),[a("div",{staticClass:"row-start-center"},[a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.weekStart",{initialValue:e.condition.advConf.weekStart||1,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.weekStart', { initialValue: condition.advConf.weekStart || 1, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.conditionCfg.daysInWeek}})],1),a("span",{staticStyle:{margin:"0 10px"}},[e._v("~")]),a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.weekEnd",{initialValue:e.condition.advConf.weekEnd||5,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.weekEnd', { initialValue: condition.advConf.weekEnd || 5, rules: [{ required: true, message: '必填' }] }]"}],attrs:{placeholder:"请选择",options:e.conditionCfg.daysInWeek}})],1)],1)]),a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"每日时段",required:""}},"a-form-item",e.formLayoutRight,!1),[a("div",{staticClass:"row-start-center"},[a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.timeStart",{initialValue:e.condition.advConf.timeStart||"09:30",rules:[{required:!0,message:"必填"}]}],expression:"['advConf.timeStart', { initialValue: (condition.advConf.timeStart || '09:30'), rules: [{ required: true, message: '必填' }] }]"}],staticStyle:{width:"100%"},attrs:{name:"timeStart",placeholder:"请选择",format:"HH:mm",valueFormat:"HH:mm",disabledHours:e.disabledHours,disabledMinutes:e.disabledMinutes},on:{change:function(t){return e.onTimeChange(t,"advConf.timeStart")}}})],1),a("span",{staticStyle:{margin:"0 10px"}},[e._v("~")]),a("a-form-item",{staticClass:"form-sub-item",attrs:{label:""}},[a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.timeEnd",{initialValue:e.condition.advConf.timeEnd||"15:00",rules:[{required:!0,message:"必填"}]}],expression:"['advConf.timeEnd', { initialValue: (condition.advConf.timeEnd || '15:00'), rules: [{ required: true, message: '必填' }] }]"}],staticStyle:{width:"100%"},attrs:{name:"timeEnd",placeholder:"请选择",format:"HH:mm",valueFormat:"HH:mm",disabledHours:e.disabledHours,disabledMinutes:e.disabledMinutes},on:{change:function(t){return e.onTimeChange(t,"advConf.timeEnd")}}})],1)],1)])]:e._e(),a("a-form-item",e._b({staticClass:"form-item"},"a-form-item",e.formLayoutRight,!1),[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 偏差范围 "),a("a-tooltip",{attrs:{title:"监控价与触发价的偏离值如果超出设置范围，则不触发任何交易指令，条件单立即终止"}},[a("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.advRangeState",{initialValue:e.advRangeState,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.advRangeState', { initialValue: advRangeState, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"advRangeState",options:e.conditionCfg.activeOpts},on:{change:e.onRadioChange}})],1),e.advRangeState?a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"偏差范围"}},"a-form-item",e.formLayoutRight,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.overRange",{initialValue:e.condition.advConf.overRange,rules:[e.genValidatorRules({type:"percent"})]}],expression:"['advConf.overRange', { initialValue: condition.advConf.overRange, rules: [genValidatorRules({ type: 'percent' })] }]"}],attrs:{placeholder:"0.01~99.99","allow-clear":"","addon-before":"±","addon-after":"%"}})],1):e._e(),a("a-form-item",e._b({staticClass:"form-item"},"a-form-item",e.formLayoutRight,!1),[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 报价优化 "),a("a-tooltip",{attrs:{title:"根据交易方向，用设置的报价提高撮合成交概率"}},[a("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.advPriceState",{initialValue:e.advPriceState,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.advPriceState', { initialValue: advPriceState, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"advPriceState",options:e.conditionCfg.activeOpts},on:{change:e.onRadioChange}})],1),e.advPriceState?[a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"买入价格"}},"a-form-item",e.formLayoutRight,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.overBuyPrice",{initialValue:e.condition.advConf.overBuyPrice,rules:[e.genValidatorRules({type:"price",min:.001,max:1})]}],expression:"['advConf.overBuyPrice', { initialValue: condition.advConf.overBuyPrice, rules: [genValidatorRules({ type: 'price', min: 0.001, max: 1 })] }]"}],attrs:{placeholder:"0.001~1","allow-clear":"","addon-before":"+","addon-after":"元"}})],1),a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"卖出价格"}},"a-form-item",e.formLayoutRight,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.overSellPrice",{initialValue:e.condition.advConf.overSellPrice,rules:[e.genValidatorRules({type:"price",min:.001,max:1})]}],expression:"['advConf.overSellPrice', { initialValue: condition.advConf.overSellPrice, rules: [genValidatorRules({ type: 'price', min: 0.001, max: 1 })] }]"}],attrs:{placeholder:"0.001~1","allow-clear":"","addon-before":"-","addon-after":"元"}})],1)]:e._e(),a("a-form-item",e._b({staticClass:"form-item",attrs:{label:"延迟确认"}},"a-form-item",e.formLayoutRight,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.advDelayState",{initialValue:e.advDelayState,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.advDelayState', { initialValue: advDelayState, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"advDelayState",options:e.conditionCfg.activeOpts},on:{change:e.onRadioChange}})],1),e.advDelayState?[a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"确认方式"}},"a-form-item",e.formLayoutRight,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.delayType",{initialValue:e.condition.advConf.delayType||e.advDelayType,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.delayType', { initialValue: condition.advConf.delayType || advDelayType, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.delayTypeOpts}})],1),a("a-form-item",e._b({staticClass:"form-item sub-item",attrs:{label:"确认次数"}},"a-form-item",e.formLayoutRight,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.delayValue",{initialValue:e.condition.advConf.delayValue,rules:[e.genValidatorRules({type:"integer",min:2,max:20})]}],expression:"['advConf.delayValue', { initialValue: condition.advConf.delayValue, rules: [genValidatorRules({ type: 'integer', min: 2, max: 20 })] }]"}],attrs:{placeholder:"范围2~20","allow-clear":"","addon-after":"次"}})],1)]:e._e(),e.conditionType===e.conditionTypes.grid.value?a("a-form-item",e._b({staticClass:"form-item",attrs:{label:"保底价触发"}},"a-form-item",e.formLayoutRight,!1),[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["advConf.priceActive",{initialValue:e.condition.advConf.priceActive||e.advLowestState,rules:[{required:!0,message:"必填"}]}],expression:"['advConf.priceActive', { initialValue: condition.advConf.priceActive || advLowestState, rules: [{ required: true, message: '必填' }] }]"}],attrs:{options:e.conditionCfg.activeOpts}})],1):e._e()],2):e._e()],1)],1)],1)},k=[],P=(a("99af"),a("caad"),a("b0c0"),a("ac1f"),a("1276"),a("2532"),a("7db0"),a("c1df")),M=a.n(P),_=a("f0e3"),q=[9,10,11,13,14,15],N={name:"CustomBondCondition",props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{span:6},wrapperCol:{span:18}},this.formLayoutRight={labelCol:{span:7},wrapperCol:{span:17}},this.formLayoutSub={labelCol:{span:6},wrapperCol:{span:18}},{form:this.$form.createForm(this),spinning:!1,editType:0,title:"条件单设置",submitMethod:"cbCustomBondCondition",conditionCfg:_["b"],conditionTypes:_["c"],trustTypes:_["i"],conditionActive:1,conditionType:0,fluctuateType:0,fluctuateTypeCfg:{},fluctuateRiseAction:0,fluctuateFallAction:0,trustTypeOpts:[],trustType:0,trustPriceOpts:[],trustMode:0,trustModeCfg:{},advTimeState:0,advRangeState:0,advPriceState:0,advDelayState:0,advDelayType:0,advLowestState:0,condition:{triggerCond:{},trustConf:{},trustType:{},advConf:{}},moment:M.a,genValidatorRules:p["i"],disabledHours:this.filterHours,disabledMinutes:this.filterMinutes}},computed:{},watch:{conditionType:function(e,t){e===_["c"].price.value&&(this.trustTypeOpts=_["b"].trustTypeOpts),e===_["c"].grid.value&&(this.trustTypeOpts=_["b"].trustTypeOpts2)},trustType:function(e,t){e===_["i"].limit.value&&(this.trustPriceOpts=_["b"].limitPriceOpts),e===_["i"].market.value&&(this.trustPriceOpts=_["b"].marketPriceOpts)},trustMode:function(e,t){e===_["h"].amount.value&&(this.trustModeCfg=_["h"].amount),e===_["h"].cost.value&&(this.trustModeCfg=_["h"].cost)},fluctuateType:function(e,t){e===_["e"].percent.value&&(this.fluctuateTypeCfg=_["e"].percent),e===_["e"].price.value&&(this.fluctuateTypeCfg=_["e"].price)}},created:function(){var e=this;this.$watch("visible",function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a,i){var r,o,n,l,s,u,d,c,m,p,f,v,g,b,h,y,C,w,V,x,S,T,R,O,k,P,M;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(e.form.resetFields(),r=e.model,o=r.bondName,n=r.bondCode,l=r._costPrice,s=r.stockShares,u=r.conditionSheetActive,d=r.conditionSheet,c=void 0===d?{}:d,m=c.type,p=void 0===m?_["c"].price.value:m,f=c.closeDate,v=c.triggerCond,g=void 0===v?{}:v,b=c.trustConf,h=void 0===b?{}:b,y=c.trustMode,C=void 0===y?{}:y,w=c.advConf,V=void 0===w?{}:w,e.condition={type:p,closeDate:f,triggerCond:g,trustConf:h,trustMode:C,advConf:V},e.title="条件单设置 - ".concat(o,"(").concat(n,") 持仓").concat(s,"股 成本").concat(l,"元"),e.conditionActive=u,e.conditionType=p,e.trustType=h.type||_["i"].limit.value,e.trustMode=C.type||_["h"].amount.value,x=V.weekStart,S=V.overRange,T=V.overBuyPrice,R=V.delayType,O=V.priceActive,e.advTimeState=x?1:0,e.advRangeState=S?1:0,e.advPriceState=T?1:0,e.advDelayState=R?1:0,e.advDelayType=R||_["d"].series.value,e.advLowestState=O?1:0,k=g.riseFallType,P=g.isSellFallBack,M=g.isBuyTurn,e.fluctuateType=k||_["e"].percent.value,e.fluctuateRiseAction=P?1:0,e.fluctuateFallAction=M?1:0);case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},mounted:function(){},methods:{filterHours:function(){for(var e=[],t=0;t<24;t++)q.includes(t)||e.push(t);return e},filterMinutes:function(e){var t=+e,a=[];if(9===t)for(var i=0;i<60;i++)i<30&&a.push(i);else if(11===t)for(var r=0;r<60;r++)r>30&&a.push(r);else if(15===t)for(var o=0;o<60;o++)o>0&&a.push(o);else if(!q.includes(t))for(var n=0;n<60;n++)a.push(n);return a},onRadioChange:function(e){var t=e.target,a=t.name,i=t.value;if(this[a]=i,"conditionType"===a){var r=this.trustTypeOpts[0].value;this.trustType=r,this.form.setFieldsValue({"trustConf.type":r}),this.resetTrustValue()}else"trustType"===a&&this.resetTrustValue()},onSelectChange:function(e,t){this[t]=e},onTimeChange:function(e,t){var a=this,i=e.split(":"),r=i[0],n=+i[1],l=this.filterMinutes(r);if(l.includes(n)){var s=l.length;n=0===l[0]?l[s-1]+1:l[0]-1,n<10&&(n="0"+n);var u=r+":"+n;this.$nextTick((function(){a.form.setFieldsValue(Object(o["a"])({},t,u))}))}},resetTrustValue:function(){var e=this;this.$nextTick((function(){e.$nextTick((function(){void 0!==e.form.getFieldValue("trustConf.value")?e.form.setFieldsValue({"trustConf.value":""}):void 0===e.form.getFieldValue("trustConf.buyValue")&&void 0===e.form.getFieldValue("trustConf.sellValue")||(e.form.setFieldsValue({"trustConf.buyValue":""}),e.form.setFieldsValue({"trustConf.sellValue":""}))}))}))},handleSubmit:function(e){var t=this;this.form.validateFieldsAndScroll((function(a,i){if(!a)try{var r=t.model,o=r.strategy,n=r.id,l=r.bondCode,s=r.bondName,u={customId:o.id,customBondId:n,conditionSheet:{}},d=Object.assign({bondCode:l,bondName:s},i);u.conditionSheet=d;d.type;var c=d.conditionActive,p=d.closeDate,f=d.triggerCond,v=d.trustConf,g=d.trustMode,b=d.advConf;u.isActive=c,c?(d.closeDateStr=_["b"].conditionEndOpts.find((function(e){return e.value===p})).label,t.conditionType===_["c"].price.value?(f.symbolStr=_["b"].triggerSymbolOpts.find((function(e){return e.value===f.symbol})).unit,f.optStr=_["b"].triggerActionOpts.find((function(e){return e.value===f.symbol})).label):t.conditionType===_["c"].grid.value&&(f.overMinOptStr=_["b"].overPriceMinOpts.find((function(e){return e.value===f.overMinOpt})).label,f.overMaxOptStr=_["b"].overPriceMaxOpts.find((function(e){return e.value===f.overMaxOpt})).label,f.riseFallTypeStr=_["b"].fluctuateOpts.find((function(e){return e.value===f.riseFallType})).label,f.riseFallUnit=_["b"].fluctuateOpts.find((function(e){return e.value===f.riseFallType})).unit),v.typeStr=_["b"].trustTypeOpts.find((function(e){return e.value===v.type})).label,v.unit="",v.value&&(v.type===_["i"].custom.value?(v.valueStr=v.value,v.unit="元"):(v.valueStr=t.trustPriceOpts.find((function(e){return e.value===v.value})).label,v.unit="")),t.conditionType===_["c"].grid.value&&t.trustType===_["i"].limit.value&&(v.buyValueStr=t.trustPriceOpts.find((function(e){return e.value===v.buyValue})).label,v.sellValueStr=t.trustPriceOpts.find((function(e){return e.value===v.sellValue})).label),g.typeStr=_["b"].trustModeOpts.find((function(e){return e.value===g.type})).label,g.unit=t.trustModeCfg.unit,b.advTimeState&&(b.weekStartStr=_["b"].daysInWeek.find((function(e){return e.value===b.weekStart})).label,b.weekEndStr=_["b"].daysInWeek.find((function(e){return e.value===b.weekEnd})).label),b.advDelayState&&(b.delayTypeStr=_["b"].delayTypeOpts.find((function(e){return e.value===b.delayType})).label)):u.conditionSheet=t.model.conditionSheet;var h=t.submitMethod,y=u;t.spinning=!0,m["a"][h](y).then((function(e){t.$message.success("操作成功"),t.$emit("ok",t.model.modalId)})).catch((function(e){})).finally((function(){t.spinning=!1}))}catch(e){}}))},handleCancel:function(){this.$emit("cancel",this.model.modalId)}}},F=N,I=(a("c73a"),Object(h["a"])(F,O,k,!1,null,"c9998520",null)),A=I.exports,B={name:"CustomBondsList",components:{STable:c["c"],Uploader:c["d"],CustomBondEdit:C,CustomBondCondition:A,CustomBondTrade:R},data:function(){return this.columns=_["a"],this.templateUrl="./可转债导入模板.xlsx",{spinning:!1,modalParams:{bond:{visible:!1,loading:!1,data:{}},trade:{visible:!1,loading:!1,data:{}},condition:{visible:!1,loading:!1,data:{}},import:{visible:!1,loading:!1,data:{}}},queryParam:{},loadData:this.reqListData,selectedRowKeys:[],selectedRows:[],switchIndex:"",uploadingFile:!1,loadingFile:!1,routeParams:{}}},filters:{available:function(e){return 1===e}},created:function(){var e=this;this.$root.eventHub.$on("refreshView",(function(){e.$refs.table&&e.$refs.table.refresh()})),this.handleRouteParams()},beforeRouteLeave:function(e,t,a){this.$root.eventHub.$off("refreshView"),a()},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},tableX:function(){var e=0;return this.columns.forEach((function(t){e+=t.width||t.minWidth||0})),e}},methods:{handleRouteParams:function(){var e,t=this.$route.params;e=Object.keys(t).length?t:u.a.get(d["d"]),e?(u.a.set(d["d"],e),this.routeParams=e):this.$router.back()},reqListData:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=Object(n["a"])(Object(n["a"])({},t.queryParam),{},{pageNum:e.pageNo,pageSize:e.pageSize,customId:t.routeParams.id}),a.abrupt("return",m["a"].cbCustomBondList(i).then((function(a){var i=a.result,r=i.bondVos||[];t.handleListData(r);var o={totalCount:r.length,pageNo:e.pageNo,data:r};return o})).catch((function(e){})).finally((function(){t.onSelectChange([],[])})));case 2:case"end":return a.stop()}}),a)})))()},handleListData:function(e){e.forEach((function(e){var t=e.costPrice,a=e.conditionSheetActive,i=e.conditionSheet;e._costPrice=Object(p["c"])(t/1e3,3),e._conditionStr="点击设置";var r={};i&&(r=JSON.parse(i),e.conditionSheet=r);var o=r,n=o.type;a&&(n===_["c"].price.value?e._conditionStr="价格条件单":n===_["c"].grid.value&&(e._conditionStr="网格条件单"))}))},reqBondImportTemplate:function(){var e=this;this.$store.dispatch("ta/GetBondImportTemplate").then((function(t){e.fileColumns=t,e.createUploadResultFile([],"可转债导入模版")})).catch((function(e){})).finally((function(){}))},handleUpdate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;this.modalParams[e].visible=!0,this.modalParams[e].data=Object(n["a"])(Object(n["a"])({},t),{},{action:a,modalId:e,strategy:this.routeParams})},onUpdateDone:function(e){this.modalParams[e].loading=!0,this.$refs.table.refresh(),this.onUpdateCancel(e)},onUpdateCancel:function(e){this.modalParams[e].visible=!1,this.modalParams[e].loading=!1},handleDelete:function(e){var t=this;this.$confirm({title:"系统提示",content:"确认删除？",okText:"确认",cancelText:"取消",onOk:function(){t.doDelete(e)},onCancel:function(){}})},doDelete:function(e){var t=this,a=[];if(e)a=[e.id];else{if(!this.selectedRowKeys.length)return;a=this.selectedRowKeys}a=e.id,this.spinning=!0,m["a"].deleteClubTeam({teamId:a}).then((function(e){t.$refs.table.refresh().then((function(){t.onSelectChange([],[])})),t.$message.info("删除成功")})).catch((function(e){})).finally((function(){t.spinning=!1}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},resetQueryParams:function(){this.queryParam={},this.$refs.table.refresh(!0)},onStatusChange:function(e,t,a,i,r){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var l,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("isRecommend"!==r){e.next=7;break}if(!n.recommendObj){e.next=7;break}return e.next=4,new Promise((function(e,t){return n.$confirm({title:"确定要设为推荐吗？",content:"描述描述。",onOk:function(){e(1)},onCancel:function(){e(0)}})}));case 4:if(l=e.sent,l){e.next=7;break}return e.abrupt("return");case 7:n.switchIndex=i,s=1===t?0:1,u=Object(o["a"])({id:a.id},r,s),m["a"].updateTeamInfo(u).then((function(e){a[r]=s})).catch((function(e){})).finally((function(){n.switchIndex=""}));case 11:case"end":return e.stop()}}),e)})))()},handleDownloadTemplate:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingFile=!0,t.next=3,e.reqBondImportTemplate();case 3:case"end":return t.stop()}}),t)})))()},createUploadResultFile:function(e,t,a){var i=this;a||(a=this.fileColumns),e&&Object(p["e"])(t,e,a).then((function(e){})).catch((function(e){})).finally((function(){i.loadingFile=!1}))},customUploadRequest:function(e){var t=this,a=e.file;Object(p["j"])(a,(function(e){var i=new FormData;i.append("customId",t.routeParams.id),i.append("file",a),t.uploadingFile=!0,m["a"].cbCustomBondImport(i,t.routeParams.id).then((function(e){var a=e.result,i=a.failVos||[];i&&i.length?t.showUploadResult(i):(t.$refs.table.refresh(),t.$message.success("数据导入成功"))})).catch((function(e){})).finally((function(){t.uploadingFile=!1}))}))},showUploadResult:function(e){var t=this.$createElement;this.$error({title:"数据导入失败",width:"max-content",content:t("div",{},[t("p","以下数据错误，请修改后重新导入"),t("a-table",{style:{padding:0,"margin-top":"10px"},attrs:{size:"small",rowKey:function(e,t){return t},columns:_["f"],"data-source":e,alert:!1,pagination:!1}})]),onOk:function(){}})},goBack:function(){this.$router.go(-1)}}},j=B,$=Object(h["a"])(j,i,r,!1,null,null,null);t["default"]=$.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e7eb68e"],{"1b30":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));a("99af");var n=[{title:"顺序编号",dataIndex:"zoneSort"},{title:"专区名称",dataIndex:"brokerName"},{title:"专区简介",dataIndex:"zoneDesc"},{title:"上架状态",dataIndex:"state",scopedSlots:{customRender:"available"}},{title:"操作",width:240,scopedSlots:{customRender:"action"}}],o=[{title:"股票池名称",dataIndex:"poolName"},{title:"标的数量",dataIndex:"stockNum",customRender:function(t){return t||"0"}},{title:"上架状态",dataIndex:"state",scopedSlots:{customRender:"available"}},{title:"操作",width:240,scopedSlots:{customRender:"action"}}],i=[{title:"标的名称",dataIndex:"stockCode",customRender:function(t,e){return"".concat(e.stockName,"(").concat(e.stockCode,".").concat(e.stockMarket,")")}},{title:"券商观点",dataIndex:"brokerOption"},{title:"上架状态",dataIndex:"state",scopedSlots:{customRender:"available"}},{title:"操作",width:240,scopedSlots:{customRender:"action"}}]},"330f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-select",{ref:"select",attrs:{size:"default",allowClear:"",showSearch:"",placeholder:"请选择",optionFilterProp:"children",defaultValue:t.initValue,showArrow:!0,mode:t.mode},on:{popupScroll:t.handlePopupScroll,search:t.handleSearch,change:t.onChange}},t._l(t.frontDataZ,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)},o=[],i=(a("fb6a"),a("c740"),a("159b"),{props:{dataList:{type:Array,default:function(){return[]}},decorator:{type:Array,default:function(){return[]}},mode:{type:String,default:"default"},initValue:{type:String,default:void 0}},data:function(){return{dataZ:[],frontDataZ:[],valueData:"",treePageSize:100,scrollPage:1}},watch:{dataList:function(t){this.dataZ=t,this.dataZ&&(this.frontDataZ=this.dataZ.slice(0,100))}},created:function(){this.dataZ=this.dataList,this.dataZ&&(this.frontDataZ=this.dataZ.slice(0,100))},mounted:function(){},methods:{setValue:function(t){if(t){var e=this.dataZ.findIndex((function(e){return e.value===t}));e&&(this.frontDataZ=this.dataZ.slice(e,e+100),this.$emit("change",t))}},onChange:function(t){this.$emit("change",t)},handleSearch:function(t){var e=this;this.valueData=t,t?(this.frontDataZ=[],this.scrollPage=1,this.dataZ.forEach((function(a){a.label.indexOf(t)>-1&&e.frontDataZ.push(a)})),this.allDataZ=this.frontDataZ,this.frontDataZ=this.frontDataZ.slice(0,100)):this.frontDataZ=this.dataZ.slice(0,100)},handlePopupScroll:function(t){var e=t.target,a=e.scrollHeight-e.scrollTop,n=e.clientHeight;if(0===a&&0===n)this.scrollPage=1;else if(a<n+5){this.scrollPage++;var o=this.scrollPage,i=this.treePageSize*(o||1),r=[],s="";s=this.dataZ.length>i?i:this.dataZ.length,this.valueData?this.allDataZ.forEach((function(t,e){e<s&&r.push(t)})):this.dataZ.forEach((function(t,e){e<s&&r.push(t)})),this.frontDataZ=r}}}}),r=i,s=a("2877"),c=Object(s["a"])(r,n,o,!1,null,null,null);e["a"]=c.exports},"88bc":function(t,e,a){(function(e){var a=1/0,n=9007199254740991,o="[object Arguments]",i="[object Function]",r="[object GeneratorFunction]",s="[object Symbol]",c="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")();function d(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}function f(t,e){var a=-1,n=t?t.length:0,o=Array(n);while(++a<n)o[a]=e(t[a],a,t);return o}function h(t,e){var a=-1,n=e.length,o=t.length;while(++a<n)t[o+a]=e[a];return t}var p=Object.prototype,m=p.hasOwnProperty,k=p.toString,b=u.Symbol,v=p.propertyIsEnumerable,g=b?b.isConcatSpreadable:void 0,y=Math.max;function S(t,e,a,n,o){var i=-1,r=t.length;a||(a=D),o||(o=[]);while(++i<r){var s=t[i];e>0&&a(s)?e>1?S(s,e-1,a,n,o):h(o,s):n||(o[o.length]=s)}return o}function w(t,e){return t=Object(t),x(t,e,(function(e,a){return a in t}))}function x(t,e,a){var n=-1,o=e.length,i={};while(++n<o){var r=e[n],s=t[r];a(s,r)&&(i[r]=s)}return i}function C(t,e){return e=y(void 0===e?t.length-1:e,0),function(){var a=arguments,n=-1,o=y(a.length-e,0),i=Array(o);while(++n<o)i[n]=a[e+n];n=-1;var r=Array(e+1);while(++n<e)r[n]=a[n];return r[e]=i,d(t,this,r)}}function D(t){return Z(t)||O(t)||!!(g&&t&&t[g])}function I(t){if("string"==typeof t||P(t))return t;var e=t+"";return"0"==e&&1/t==-a?"-0":e}function O(t){return N(t)&&m.call(t,"callee")&&(!v.call(t,"callee")||k.call(t)==o)}var Z=Array.isArray;function L(t){return null!=t&&j(t.length)&&!E(t)}function N(t){return _(t)&&L(t)}function E(t){var e=$(t)?k.call(t):"";return e==i||e==r}function j(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function $(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){return!!t&&"object"==typeof t}function P(t){return"symbol"==typeof t||_(t)&&k.call(t)==s}var A=C((function(t,e){return null==t?{}:w(t,f(S(e,1),I))}));t.exports=A}).call(this,a("c8ba"))},"8a10":function(t,e,a){},e901:function(t,e,a){"use strict";a("8a10")},edfe:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-spin",{attrs:{spinning:t.spinning}},[a("a-card",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-descriptions",[a("a-descriptions-item",{attrs:{label:"关联券商",span:24}},[t._v(t._s(t.brokerName))]),a("a-descriptions-item",{attrs:{label:"金股池"}},[t._v(t._s(t.poolName))])],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"rollback"},on:{click:t.handleBack}},[t._v("返回")]),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新建标的")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData,alert:!1,showPagination:"auto"},scopedSlots:t._u([{key:"available",fn:function(e,n,o){return a("span",{},[a("a-switch",{attrs:{loading:o===t.switchIndex,checked:t._f("available")(n)},on:{change:function(a){return t.onStatusChange(a,e,n,o,"state")}}})],1)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{staticStyle:{color:"#1890ff"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.handleDelete(n)}}},[t._v("删除")])]],2)}}])})],1)],1),a("edit-stock",{ref:"createModal",attrs:{visible:t.visibleEdit,model:t.modelData,poolId:t.poolId,stockList:t.stockList},on:{ok:t.onEditOk,cancel:t.onEditCancel}})],1)},o=[],i=a("5530"),r=(a("d3b7"),a("159b"),a("99af"),a("2af9")),s=a("1b30"),c=a("0970"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"编辑专区",width:600,maskClosable:!1,visible:t.visible,confirmLoading:t.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"},destroyOnClose:!0},on:{ok:t.onOk,cancel:function(){t.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",t._b({attrs:{form:t.form}},"a-form",t.formLayout,!1),[a("a-form-item",{attrs:{label:"标的名称"}},[a("my-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["stockCode",{required:!0,message:"必选"}],expression:"['stockCode', { required: true, message: '必选'}]"}],key:"stockCode",ref:"stockSelect",attrs:{initValue:t.model.stockCode?t.model.stockCode:void 0,dataList:t.stockList},on:{change:t.changeStock}})],1),a("a-form-item",{attrs:{label:"券商观点"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brokerOption",{initialValue:t.model.brokerOption,rules:[{required:!1,message:"选填"}]}],expression:"['brokerOption', { initialValue: model.brokerOption, rules: [{ required: false, message: '选填' }] }]"}],attrs:{name:"zoneDesc",placeholder:"请输入","allow-clear":""}})],1),a("a-form-item",{attrs:{label:"是否上架"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["state",{initialValue:t.model.state||0,rules:[{required:!0,message:"必选"}]}],expression:"['state', { initialValue: model.state || 0, rules: [{ required: true, message: '必选' }] }]"}]},[a("a-radio",{attrs:{value:0}},[t._v("是")]),a("a-radio",{attrs:{value:1}},[t._v("否")])],1)],1)],1)],1)],1)},u=[],d=(a("7db0"),a("88bc")),f=a.n(d),h=a("330f"),p=["stockCode","brokerOption","state"],m={components:{MySelect:h["a"]},props:{visible:{type:Boolean,required:!0},model:{type:Object,default:function(){}},poolId:{type:String,default:""},stockList:{type:Array,default:function(){return[]}}},data:function(){return this.formLayout={labelCol:{md:{span:6},xs:{span:24}},wrapperCol:{md:{span:18},xs:{span:24}}},this.formLayout2={labelCol:{md:{span:6},xs:{span:24}},wrapperCol:{md:{span:8},xs:{span:24}}},{loading:!1,form:this.$form.createForm(this)}},computed:{},created:function(){var t=this;p.forEach((function(e){return t.form.getFieldDecorator(e)})),this.$watch("model",(function(){t.$nextTick((function(){t.model&&t.form.setFieldsValue(f()(t.model,p))}))}))},mounted:function(){},methods:{changeStock:function(t){t&&this.form.setFieldsValue({stockCode:t})},onOk:function(){var t=this,e=this.form;this.loading=!0,e.validateFields((function(e,a){if(e)t.loading=!1;else{var n=t.model.id,o=n?"updateBrokerGoldenStock":"addBrokerGoldenStock",r=t.stockList.find((function(t){return t.value===a.stockCode})),s=r.stockName,c=r.stockType,l=r.stockMarket,u=Object(i["a"])(Object(i["a"])({},a),{},{poolId:t.poolId,stockName:s,stockType:c,stockMarket:l});n&&(u.stockId=n),t.doUpdate(o,u)}}))},doUpdate:function(t,e){var a=this;c["a"][t](e).then((function(t){a.loading=!1,a.$message.info("操作成功"),a.$emit("ok")})).catch((function(t){a.loading=!1,a.$message.error(t.responseMsg)}))}}},k=m,b=(a("e901"),a("2877")),v=Object(b["a"])(k,l,u,!1,null,"d199858e",null),g=v.exports,y={components:{STable:r["c"],EditStock:g},filters:{available:function(t){return 0===t.state}},data:function(){return{spinning:!1,columns:s["b"],loadData:this.loadStockLsit,switchIndex:"",visibleEdit:!1,modelData:{},brokerName:"",poolId:"",poolName:"",stockList:[]}},created:function(){this.brokerName=this.$route.query.brokerName,this.poolId=this.$route.query.poolId,this.poolName=this.$route.query.poolName,this.poolId||this.$router.back()},methods:{getStockList:function(){var t=this;return new Promise((function(e,a){t.stockList.length?e():c["a"].getStockList().then((function(a){a.stockList.forEach((function(t){t.value=t.stockCode,t.label="".concat(t.stockName,"(").concat(t.stockCode,".").concat(t.stockMarket,")")})),t.stockList=a.stockList,e()})).catch((function(t){a(new Error("获取标的列表失败！"))}))}))},loadStockLsit:function(t){var e=Object(i["a"])(Object(i["a"])({},t),{},{poolId:this.poolId});return e.pageNum=e.pageNo,delete e.pageNo,c["a"].getBrokerGoldenStockList(e).then((function(e){var a={totalCount:e.total,pageNo:t.pageNo,data:e.stockList};return a})).catch((function(){return{totalCount:0,pageNo:1,data:[]}})).finally((function(){}))},handleBack:function(){this.$router.back()},handleAdd:function(){var t=this;this.spinning=!0,this.getStockList().then((function(){t.modelData={},t.visibleEdit=!0})).catch((function(t){})).finally((function(){t.spinning=!1}))},handleEdit:function(t){var e=this;this.spinning=!0,this.getStockList().then((function(){e.modelData=t,e.visibleEdit=!0})).catch((function(t){})).finally((function(){e.spinning=!1}))},onStatusChange:function(t,e,a,n,o){var i=this;this.switchIndex=n;var r={stockId:a.id,state:1===a[o]?0:1};c["a"].updateBrokerGoldenStock(r).then((function(t){a[o]=1===a[o]?0:1})).catch((function(t){})).finally((function(){i.switchIndex=""}))},onEditOk:function(){this.$refs.table.refresh(!0),this.onEditCancel()},onEditCancel:function(){var t=this.$refs.createModal.form;t.resetFields(),this.visibleEdit=!1},handleDelete:function(t){var e=this;this.$confirm({title:"是否确认删除标的",content:"删除后标的相关数据无法恢复。",okText:"确认",cancelText:"取消",onOk:function(){e.doDelete(t)},onCancel:function(){}})},doDelete:function(t){var e=this;this.spinning=!1,c["a"].deleteBrokerGoldenStock({stockId:t.id}).then((function(t){e.$message.success("标的已删除"),e.$refs.table.refresh()})).catch((function(t){})).finally((function(){e.spinning=!1}))}}},S=y,w=Object(b["a"])(S,n,o,!1,null,null,null);e["default"]=w.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4973c827"],{"16f5":function(e,t,a){},"2b18":function(e,t,a){e.exports=a.p+"img/club_icontype1.58348eb3.png"},"348f":function(e,t,a){"use strict";a("16f5")},"6afc":function(e,t,a){e.exports=a.p+"img/club_icontype2.ed516b2e.png"},"712f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",{attrs:{title:!1}},[a("a-spin",{attrs:{spinning:e.spinning}},[e.clubId?a("a-card",[a("div",{staticClass:"content row-center-center"},[a("a-spin",{attrs:{spinning:e.imgLoading}},[a("div",{staticClass:"column-center-center"},[a("p",[e._v("小程序二维码")]),a("img",{staticClass:"codeImg",attrs:{src:e.codeImg,alt:""}}),a("div",{staticClass:"title"},[e._v("club名称")]),a("div",{staticClass:"value"},[e._v(e._s(e.clubName))]),a("div",{staticClass:"title"},[e._v("clubID")]),a("div",{staticClass:"value"},[e._v(e._s(e.clubId))])])])],1)]):a("a-card",{attrs:{bordered:!1}},[e.start?a("div",{staticClass:"content column-center-center"},[a("div",{staticClass:"startTip"},[e._v("当前渠道并未开通club，是否创建club")]),a("a-button",{attrs:{type:"primary"},on:{click:e.startOpen}},[e._v("开通club")])],1):a("div",{staticClass:"content column-center-center"},[a("a-form",e._b({staticClass:"form",attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"渠道名"}},[a("a-input",{attrs:{name:"channelName",disabled:""},model:{value:e.otherUserName,callback:function(t){e.otherUserName=t},expression:"otherUserName"}})],1),a("a-form-item",{attrs:{label:"club名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clubName",{initialValue:"",rules:[{required:!0,message:"必填"}]}],expression:"['clubName', { initialValue: '', rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"clubName"}})],1),a("a-form-item",{attrs:{label:"绑定手机号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userPhone",{initialValue:"",rules:[{required:!0,message:"必填"}]}],expression:"['userPhone', { initialValue: '', rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"userPhone"}})],1),a("a-form-item",{attrs:{label:"选择模板"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["clubId",{initialValue:void 0,rules:[{required:!0,message:"必选"}]}],expression:"['clubId', { initialValue: undefined, rules: [{ required: true, message: '必选' }] }]"}],attrs:{name:"clubId",placeholder:"请选择",options:e.clubList,loading:e.listLoading}})],1),a("a-form-item",{attrs:{label:"金刚位icon风格"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["iconType",{initialValue:void 0,rules:[{required:!0,message:"必选"}]}],expression:"['iconType', { initialValue: undefined, rules: [{ required: true, message: '必选' }] }]"}],attrs:{name:"iconType"}},e._l(e.iconTypes,(function(e){return a("a-radio",{key:e.value,attrs:{value:e.value}},[a("img",{staticClass:"iconType",attrs:{src:e.iconUrl,alt:""}})])})),1)],1)],1),a("a-button",{attrs:{type:"primary"},on:{click:e.onCreateClub}},[e._v("创建")])],1)])],1)],1)},n=[],s=a("5530"),r=(a("d3b7"),a("d81d"),a("4360")),c=a("f306"),o=a("a18c"),u=[{value:1,iconUrl:a("2b18")},{value:2,iconUrl:a("6afc")},{value:3,iconUrl:a("7f6b0")}],l={data:function(){return this.iconTypes=u,this.formLayout={labelCol:{md:{span:6},xs:{span:24}},wrapperCol:{md:{span:14},xs:{span:24}}},{spinning:!1,start:!0,form:this.$form.createForm(this),clubList:[],listLoading:!1,imgLoading:!1,codeImg:""}},watch:{clubId:function(e){var t=this;setTimeout((function(){t.init()}),500)}},computed:{clubId:function(){return r["a"].getters.taClubId},clubName:function(){return r["a"].getters.taClubName},otherUserName:function(){return r["a"].getters.otherUserName}},created:function(){r["a"].dispatch("ta/GetToken")},mounted:function(){this.init()},activated:function(){},methods:{init:function(){this.loadMpCode()},loadClubList:function(){var e=this;this.listLoading=!0,c["a"].getClubList().then((function(t){e.clubList=t.clubList.map((function(e){return{label:e.clubName,value:e.clubId}}))})).catch((function(e){})).finally((function(){e.listLoading=!1}))},startOpen:function(){this.start=!1,this.loadClubList()},onCreateClub:function(){var e=this;this.form.validateFields((function(t,a){if(!t){var i=Object(s["a"])({},a);e.spinning=!0,r["a"].dispatch("CreateClub",i).then((function(t){e.createDone()})).catch((function(t){e.$message(t.message)})).finally((function(){e.spinning=!1}))}}))},createDone:function(){var e=this;this.$emit("close"),Object(o["a"])(this.$router),this.$nextTick((function(){e.$router.push("/")}))},loadMpCode:function(){var e=this;if(this.clubId){var t="pages/home/home",a="".concat(this.clubId);this.imgLoading=!0,c["a"].getMpCode({page:t,scene:encodeURIComponent(a),width:200}).then((function(t){e.codeImg="data:image/png;base64,"+t.buffer})).catch((function(e){})).finally((function(){e.imgLoading=!1}))}}}},d=l,m=(a("348f"),a("2877")),f=Object(m["a"])(d,i,n,!1,null,"129ec644",null);t["default"]=f.exports},"7f6b0":function(e,t,a){e.exports=a.p+"img/club_icontype3.3d018e94.png"}}]);
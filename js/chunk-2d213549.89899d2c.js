(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213549"],{abe7:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page-header-wrapper",{attrs:{title:!1}},[e("channel-selector",{on:{change:t.onChannelChange},model:{value:t.curChannelId,callback:function(a){t.curChannelId=a},expression:"curChannelId"}}),e("div",{},[e("a-card",[e("h3",[t._v("会员数据")]),e("a-spin",{attrs:{spinning:t.spinning}},[e("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},[t._l(t.totalDatas,(function(a,r){return[e("a-col",{key:r,attrs:{span:4}},[e("div",{staticClass:"totalDataItem column-start-center"},[e("a-tooltip",{attrs:{title:a.tip}},[e("div",{staticClass:"title row-center-center"},[t._v(t._s(a.title)),e("a-icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"info-circle"}})],1),e("a-statistic",{attrs:{value:a.value,precision:"amount"==a.dataType?2:0,suffix:"amount"==a.dataType?"元":"",valueStyle:"text-align:center;"}})],1)],1)]),r!=t.totalDatas.length-1?e("a-col",{key:"line"+r,staticClass:"row-center-center",attrs:{span:0}},[e("a-divider",{staticStyle:{height:"40px"},attrs:{type:"vertical"}})],1):t._e()]}))],2)],1)],1),e("div",[e("br")]),e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"用户昵称"}},[e("a-input",{attrs:{placeholder:"请输入"},model:{value:t.queryParams.nick,callback:function(a){t.$set(t.queryParams,"nick",a)},expression:"queryParams.nick"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"手机号"}},[e("a-input",{attrs:{type:"tel",placeholder:"请输入"},model:{value:t.queryParams.phoneNo,callback:function(a){t.$set(t.queryParams,"phoneNo",a)},expression:"queryParams.phoneNo"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"日期范围"}},[e("a-range-picker",{attrs:{value:t.dates,placeholder:["开始时间","结束时间"],format:"YYYY-MM-DD",ranges:t.dateRanges},on:{panelChange:t.handlePanelChange,change:t.handleChange}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"订单类型"}},[e("a-select",{attrs:{placeholder:"全部",defaultActiveFirstOption:!0},model:{value:t.queryParams.orderType,callback:function(a){t.$set(t.queryParams,"orderType",a)},expression:"queryParams.orderType"}},[e("a-select-option",{attrs:{value:"0"}},[t._v("全部")]),e("a-select-option",{attrs:{value:"1"}},[t._v("购买")]),e("a-select-option",{attrs:{value:"2"}},[t._v("退费")])],1)],1)],1),e("a-col",{attrs:{md:4,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.refreshData}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"reload"},on:{click:t.resetQueryParams}},[t._v("重置")])],1)])],1)],1)],1),t.showSumData?e("div",{staticClass:"row-between-center",staticStyle:{width:"400px",height:"40px",background:"#FFF5F5",padding:"0 10px"}},[e("div",{staticClass:"row-start-center"},[e("p",{staticStyle:{"margin-right":"30px"}},[t._v("筛选结果：订单总数"),e("span",{staticStyle:{color:"#F12323","margin-left":"5px"}},[t._v(t._s(t.sumData.total||0))])]),e("p",[t._v("订单总金额"),e("span",{staticStyle:{color:"#F12323","margin-left":"5px"}},[t._v(t._s(t.sumData.totalAmount||0)+"元")])])]),e("a-icon",{attrs:{type:"close"},on:{click:function(a){t.showSumData=!1}}})],1):t._e(),e("a-card",[e("s-table",{ref:"table",attrs:{size:"middle",rowKey:function(t,a){return a},columns:t.memberDataCols,data:t.loadData,alert:!1,scroll:{x:t.tableX},showPagination:"auto"},scopedSlots:t._u([{key:"desc",fn:function(a){return e("span",{},[[e("span",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a))])]],2)}}])})],1)],1)],1)},n=[],s=(e("d3b7"),e("159b"),e("d81d"),e("ac8a")),o=e("2af9"),i=e("0970"),l=e("4ae6"),c=e("c1df"),u=e.n(c),m={components:{ChannelSelector:s["a"],STable:o["c"]},data:function(){var t=this;return{spinning:!1,memberDataCols:l["n"],curChannelId:"",totalDatas:[],sumData:{},showSumData:!1,dataList:[],dates:[],queryParams:{orderType:"0"},dateRanges:{},memberList:[],loadData:function(a){var e=t.curChannelId,r=t.dates,n=Object.assign({channelId:"0"===e?"":e},a,t.queryParams);return n.pageNum=n.pageNo,delete n.pageNo,r[0]&&r[1]&&(n.startDate=r[0].format("YYYYMMDD"),n.endDate=r[1].format("YYYYMMDD")),i["a"].DataCenter_memberList(n).then((function(e){var r=t.proxyData(e),n={totalCount:e.total,pageNo:a.pageNo,data:r};return n})).catch((function(t){})).finally((function(){}))}}},computed:{tableX:function(){var t=0;return this.memberDataCols.forEach((function(a){t+=a.width})),t}},created:function(){var t=this;this.$root.eventHub.$on("refreshView",(function(){t.refreshData()})),this.initDateRange()},beforeRouteLeave:function(t,a,e){this.$root.eventHub.$off("refreshView"),e()},methods:{initDateRange:function(){var t=u()().subtract(1,"days");this.dateRanges={"昨日":[t,t],"本周":[u()().startOf("week"),u()()],"本月":[u()().startOf("month"),u()()],"本年":[u()().startOf("year"),u()()]}},onChannelChange:function(){this.resetQueryParams()},handleChange:function(t){this.dates=t},handlePanelChange:function(t,a){this.dates=t},refreshData:function(){this.$refs.table&&this.$refs.table.refresh(!0)},proxyData:function(t){var a,e,r=this.memberList,n=this.queryParams,s=this.dates;return!r.length&&null!==(a=t.memberList)&&void 0!==a&&a.length&&(this.memberList=t.memberList.map((function(t){return{label:t.memberName,value:t.memberId}}))),this.totalDatas=l["o"].map((function(a){var e;return{title:a.title,tip:a.tip,dataType:a.dataType,value:t.memberTotalData&&null!==(e=t.memberTotalData[a.key])&&void 0!==e?e:""}})),this.sumData={total:t.total,totalAmount:t.totalAmount},n.nick||s[0]&&s[1]||"0"!==n.orderType||null!==(e=n.memberIds)&&void 0!==e&&e.length?this.showSumData=!0:this.showSumData=!1,t.memberDataList},onTabChange:function(t){},showTip:function(t){this.$info({title:t.title,content:t.tip})},rowClass:function(t){return t.isTotal?"totalRow":""},resetQueryParams:function(){this.queryParams={orderType:"0"},this.dates=[],this.refreshData()}}},d=m,p=e("2877"),h=Object(p["a"])(d,r,n,!1,null,"0fad523a",null);a["default"]=h.exports}}]);
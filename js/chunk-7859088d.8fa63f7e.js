(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7859088d"],{"006e":function(e,t,a){"use strict";a("0abc")},"0abc":function(e,t,a){},"88bc":function(e,t,a){(function(t){var a=1/0,n=9007199254740991,r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function f(e,t){var a=-1,n=e?e.length:0,r=Array(n);while(++a<n)r[a]=t(e[a],a,e);return r}function m(e,t){var a=-1,n=t.length,r=e.length;while(++a<n)e[r+a]=t[a];return e}var p=Object.prototype,g=p.hasOwnProperty,h=p.toString,y=d.Symbol,b=p.propertyIsEnumerable,v=y?y.isConcatSpreadable:void 0,k=Math.max;function S(e,t,a,n,r){var i=-1,o=e.length;a||(a=F),r||(r=[]);while(++i<o){var s=e[i];t>0&&a(s)?t>1?S(s,t-1,a,n,r):m(r,s):n||(r[r.length]=s)}return r}function x(e,t){return e=Object(e),w(e,t,(function(t,a){return a in e}))}function w(e,t,a){var n=-1,r=t.length,i={};while(++n<r){var o=t[n],s=e[o];a(s,o)&&(i[o]=s)}return i}function L(e,t){return t=k(void 0===t?e.length-1:t,0),function(){var a=arguments,n=-1,r=k(a.length-t,0),i=Array(r);while(++n<r)i[n]=a[t+n];n=-1;var o=Array(t+1);while(++n<t)o[n]=a[n];return o[t]=i,u(e,this,o)}}function F(e){return G(e)||_(e)||!!(v&&e&&e[v])}function C(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function _(e){return E(e)&&g.call(e,"callee")&&(!b.call(e,"callee")||h.call(e)==r)}var G=Array.isArray;function O(e){return null!=e&&V(e.length)&&!N(e)}function E(e){return $(e)&&O(e)}function N(e){var t=j(e)?h.call(e):"";return t==i||t==o}function V(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return!!e&&"object"==typeof e}function T(e){return"symbol"==typeof e||$(e)&&h.call(e)==s}var I=L((function(e,t){return null==e?{}:x(e,f(S(t,1),C))}));e.exports=I}).call(this,a("c8ba"))},a924:function(e,t,a){e.exports=a.p+"img/icon_etf_cy.933b8bd1.png"},feb9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-header-wrapper",{attrs:{title:!1}},[n("div",{staticClass:"app-container"},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-spin",{attrs:{spinning:e.fearSpinning}},[n("a-card",[n("div",{staticClass:"row-start-center"},[n("div",{staticClass:"column-center-left"},[n("h2",[e._v("恐贪指数："+e._s(e.fearInfo.indexValue||"--"))]),n("p",[e._v("更新时间："+e._s(e.fearInfo.inputTime||"--"))])]),n("div",{staticClass:"row-start-center",staticStyle:{"margin-left":"50px"}},[n("a-button",{staticClass:"fearBtn",attrs:{type:"primary"},on:{click:e.handleFearAdd}},[n("a-icon",{attrs:{type:"edit"}}),e._v(" 录入 ")],1),n("a-button",{staticClass:"fearBtn",attrs:{type:"primary"},on:{click:e.handleFearUpdate}},[n("a-icon",{attrs:{type:"retweet"}}),e._v(" 修改 ")],1),n("a-button",{staticClass:"fearBtn",attrs:{type:"primary"},on:{click:e.handleFearHistory}},[n("a-icon",{attrs:{type:"snippets"}}),e._v(" 历史 ")],1)],1)])])],1)],1),n("a-spin",{attrs:{spinning:e.cySpinning}},[n("div",{staticStyle:{width:"100%"}},e._l(e.cyStrategyList,(function(t){return n("a-card",{key:t.id},[n("a-row",{attrs:{gutter:24,type:"flex",align:"middle"}},[n("a-col",{attrs:{span:4}},[n("div",{staticClass:"column-start-center"},[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:a("a924"),alt:""}}),n("p",{staticStyle:{"margin-top":"20px"}},[e._v("小程序是否显示")]),n("a-switch",{staticStyle:{"margin-top":"10px"},attrs:{checked:0==t.state,disabled:""}})],1)]),n("a-col",{attrs:{span:16}},[n("div",{staticClass:"column-center-left"},[n("h3",[e._v(e._s(t.strategyName))]),n("a-descriptions",{attrs:{column:1}},[n("a-descriptions-item",{attrs:{label:"策略宣传文案"}},[e._v(e._s(t.strategyDes))]),n("a-descriptions-item",{attrs:{label:"建议投资时间"}},[e._v(e._s(t.investmentTime))]),n("a-descriptions-item",{attrs:{label:"策略说明"}},[e._v(e._s(t.strategyExplain))]),n("a-descriptions-item",{attrs:{label:"策略标签"}},[e._v(e._s(t.strategyLabelList.join("、")))]),n("a-descriptions-item",{attrs:{label:"投资组合"}},[e._v(e._s(t.stockDataList.map((function(e){return e.stockName+"("+e.stockCode+")"})).join("、")))]),n("a-descriptions-item",{attrs:{label:"收益曲线对标标的"}},[e._v(e._s(t.benchmarkName)+"("+e._s(t.benchmarkCode)+")")])],1)],1)]),n("a-col",{attrs:{span:"4"}},[n("div",{staticClass:"column-center-center"},[n("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.onStrategySet(t)}}},[e._v("策略基础设置")]),n("a-button",{staticStyle:{color:"#F12323","border-color":"#F12323","margin-top":"20px"},on:{click:function(a){return e.onStrategyTradeList(t)}}},[e._v("策略发车记录")])],1)])],1)],1)})),1)])],1),n("edit-cy-strategy",{ref:"editStrategy",attrs:{loading:e.editLoading,visible:e.editVisible,defStocks:e.defStocks,model:e.editModel},on:{cancel:e.onEditStrategyCancel,ok:e.onEditStrategyOk}}),n("edit-fear-greed",{ref:"editFearGreed",attrs:{loading:e.editFearGreedLoading,visible:e.editFearGreedVisible,model:e.editFearGreedModel},on:{cancel:e.onEditFearGreedCancel,ok:e.onEditFearGreedOk}}),n("fear-greed-history",{attrs:{visible:e.fearGreedHistory},on:{cancel:function(t){e.fearGreedHistory=!1},ok:function(t){e.fearGreedHistory=!1}}})],1)},r=[],i=(a("d3b7"),a("d81d"),a("99af"),a("0970")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"策略基础设置",width:560,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"}},on:{ok:e.onOk,cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"策略名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["strategyName",{initialValue:e.model.strategyName,rules:[{required:!0,message:"必填"}]}],expression:"['strategyName', { initialValue: model.strategyName, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"strategyName",placeholder:"请输入,建议10个汉字以内","max-length":10,"allow-clear":""}})],1),a("a-form-item",{attrs:{label:"策略宣传文案"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["strategyDes",{initialValue:e.model.strategyDes,rules:[{required:!0,message:"必填"}]}],expression:"['strategyDes', { initialValue: model.strategyDes, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"strategyDes",placeholder:"请输入,建议20个汉字以内","max-length":20,"allow-clear":""}})],1),a("a-form-item",{attrs:{label:"建议投资时间"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["investmentTime",{initialValue:e.model.investmentTime,rules:[{required:!0,message:"必填"}]}],expression:"['investmentTime', { initialValue: model.investmentTime, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"investmentTime",placeholder:"请输入,建议10个汉字以内","allow-clear":""}})],1),a("a-form-item",{attrs:{label:"策略说明"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["strategyExplain",{initialValue:e.model.strategyExplain,rules:[{required:!0,message:"必填"}]}],expression:"['strategyExplain', { initialValue: model.strategyExplain, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"strategyExplain",placeholder:"请输入,最多200字",autoSize:{minRows:3,maxRow:5},maxLength:200,showCount:"","allow-clear":""}})],1),a("a-form-item",{attrs:{label:"策略标签"}},[a("div",{staticClass:"row-start-center",staticStyle:{"flex-wrap":"wrap"}},[e._l(e.strategyLabelList,(function(t){return a("div",{key:t},[a("a-tag",{attrs:{closable:""},on:{close:function(a){return e.deleteTag(t)}}},[e._v(e._s(t))])],1)})),a("a-input",{ref:"inputTag",style:{width:"100px",height:"22px",marginTop:"9px",marginBottom:"9px"},attrs:{type:"text",placeholder:"新标签"},on:{blur:e.handleInputTagConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputTagConfirm(t)}},model:{value:e.inputStrategyLabel,callback:function(t){e.inputStrategyLabel=t},expression:"inputStrategyLabel"}})],2)]),a("a-form-item",{attrs:{label:"投资组合",required:"",validateStatus:e.stocks.length>0?"":"error",help:e.stocks.length>0?"":"投资组合不能为空"}},[a("a-select",{attrs:{mode:"multiple",placeholder:"请选择",options:e.defStocks},on:{change:e.handleStocksChange},model:{value:e.stocks,callback:function(t){e.stocks=t},expression:"stocks"}})],1),a("a-form-item",{attrs:{label:"收益曲线对应标的",required:"",validateStatus:e.benchmark?"":"error",help:e.benchmark?"":"对标标的不能为空"}},[a("a-select",{attrs:{placeholder:"请选择",options:e.defStocks},on:{change:e.handleStocksChange},model:{value:e.benchmark,callback:function(t){e.benchmark=t},expression:"benchmark"}})],1)],1)],1)],1)},s=[],l=a("2909"),c=(a("ac1f"),a("1276"),a("4de4"),a("88bc")),d=a.n(c),u=["strategyName","strategyDes","investmentTime","strategyExplain"],f={components:{},props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}},defStocks:{type:Array,default:function(){return[]}}},data:function(){return this.formLayout={labelCol:{md:{span:6},xs:{span:24}},wrapperCol:{md:{span:18},xs:{span:24}}},{form:this.$form.createForm(this),strategyLabelList:[],inputStrategyLabel:"",stocks:[],benchmark:""}},computed:{},created:function(){var e=this;window.editCy=this,u.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(d()(e.model,u)),e.model&&(e.strategyLabelList=e.model.strategyLabelList||[],e.stocks=e.model.stockDataList.map((function(e){return e.stockName+"@"+e.stockCode})),e.benchmark=e.model.benchmarkName+"@"+e.model.benchmarkCode)}))},methods:{onOk:function(){if(this.stocks.length)if(this.benchmark){var e=this.stocks.map((function(e){var t=e.split("@");return{stockName:t[0],stockCode:t[1]}})),t=this.benchmark.split("@"),a=t[0],n=t[1];this.$emit("ok",{strategyLabels:JSON.stringify(this.strategyLabelList),stockData:JSON.stringify(e),benchmarkName:a,benchmarkCode:n,state:this.model.state||0,id:this.model.id})}else this.$message.info("对标标的");else this.$message.info("请选择投资组合")},deleteTag:function(e){this.strategyLabelList=this.strategyLabelList.filter((function(t){return t!==e}))},handleInputTagConfirm:function(){var e=this.inputStrategyLabel,t=this.strategyLabelList;e&&-1===t.indexOf(e)&&(this.strategyLabelList=[].concat(Object(l["a"])(t),[e]),this.inputStrategyLabel="")},handleStocksChange:function(e){}}},m=f,p=a("2877"),g=Object(p["a"])(m,o,s,!1,null,null,null),h=g.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"恐贪指数",width:560,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"},destroyOnClose:!0},on:{ok:e.onOk,cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formLayout,!1),[a("a-form-item",{attrs:{label:"恐贪指数",help:"请输入华证提供的原始数据，该数值在小程序展示时会x100"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["indexValue",{initialValue:e.model.indexValue,rules:[{required:!0,message:"必填"}]}],expression:"['indexValue', { initialValue: model.indexValue, rules: [{ required: true, message: '必填' }] }]"}],attrs:{name:"indexValue",autoFocus:"",placeholder:"请输入","allow-clear":""},on:{pressEnter:e.onOk}})],1)],1)],1)],1)},b=[],v=["indexValue"],k={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){}}},data:function(){return this.formLayout={labelCol:{md:{span:6},xs:{span:24}},wrapperCol:{md:{span:18},xs:{span:24}}},{form:this.$form.createForm(this)}},computed:{},created:function(){var e=this;v.forEach((function(t){return e.form.getFieldDecorator(t)})),this.$watch("model",(function(){e.model&&e.form.setFieldsValue(d()(e.model,v))}))},methods:{onOk:function(){this.$emit("ok",{})}}},S=k,x=Object(p["a"])(S,y,b,!1,null,null,null),w=x.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"恐贪指数历史记录",width:560,maskClosable:!1,visible:e.visible,confirmLoading:e.loading,centered:!0,bodyStyle:{maxHeight:"80vh",overflowY:"auto"},destroyOnClose:!0},on:{ok:e.onOk,cancel:function(){e.$emit("cancel")}}},[a("a-spin",{attrs:{spinning:e.loading}},[a("s-table",{ref:"table",attrs:{size:"small",rowKey:function(e,t){return t},columns:e.columns,data:e.loadData,alert:!1,rowSelection:null,showPagination:"auto",scroll:{y:360}}})],1)],1)},F=[],C=a("2af9"),_=[{title:"发布时间",dataIndex:"inputTime"},{title:"恐贪指数",dataIndex:"indexValue"}],G={components:{STable:C["c"]},props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{columns:_,loadData:function(e){var t=Object.assign({indexType:1},e);return t.pageNum=t.pageNo,delete t.pageNo,i["a"].getFearGreedIndexList(t).then((function(t){var a={totalCount:t.total,pageNo:e.pageNo,data:t.infoList};return a})).catch((function(e){return{totalCount:0,pageNo:1,data:[]}})).finally((function(){}))}}},computed:{},created:function(){},methods:{onOk:function(){this.$emit("ok",{})}}},O=G,E=Object(p["a"])(O,L,F,!1,null,null,null),N=E.exports,V={components:{EditCyStrategy:h,EditFearGreed:w,FearGreedHistory:N},data:function(){return{cySpinning:!1,cyStrategyList:[],editLoading:!1,editVisible:!1,defStocks:[],editModel:{},fearInfo:{},fearSpinning:!1,editFearGreedLoading:!1,editFearGreedVisible:!1,editFearGreedModel:{},fearGreedHistory:!1}},created:function(){window.page=this,this.loadStrategyList(),this.loadFearGreed()},methods:{loadFearGreed:function(){var e=this;this.fearSpinning=!0,i["a"].getFearGreedIndexList({pageNum:1,pageSize:1,indexType:1}).then((function(t){var a=t.infoList;null!==a&&void 0!==a&&a.length?e.fearInfo=a[0]:e.fearInfo={}})).catch((function(t){e.fearInfo={}})).finally((function(){e.fearSpinning=!1}))},loadStrategyList:function(){var e=this;this.cySpinning=!0,i["a"].getCyStrategyList({pageNum:0,pageSize:100}).then((function(t){e.cyStrategyList=t.infoList})).catch((function(e){})).finally((function(){e.cySpinning=!1}))},onStrategySet:function(e){var t=this;this.defStocks.length?this.showEditStrategy(e):(this.cySpinning=!0,i["a"].getCyStrategyStockList().then((function(a){t.defStocks=a.stockData.map((function(e){return{label:"".concat(e.stockName,"(").concat(e.stockCode,")"),value:"".concat(e.stockName,"@").concat(e.stockCode)}})),t.showEditStrategy(e)})).catch((function(e){})).finally((function(){t.cySpinning=!1})))},showEditStrategy:function(e){this.editModel=e,this.editVisible=!0},onEditStrategyOk:function(e){var t=this,a=this.$refs.editStrategy.form;a&&a.validateFields((function(a,n){if(!a){var r=Object.assign({},n,e);i["a"].updateCyStrategy({info:r}).then((function(e){t.$message.success("策略基础设置成功！"),t.onEditStrategyCancel(),t.loadStrategyList()})).catch((function(e){t.$message.error("策略基础设置失败！")}))}}))},onEditStrategyCancel:function(){this.editVisible=!1;var e=this.$refs.editStrategy.form;e&&e.resetFields()},onStrategyTradeList:function(e){this.$router.push("/taetf/cy-trade/".concat(e.strategyName,"/").concat(e.id))},handleFearAdd:function(){this.editFearGreedModel={},this.editFearGreedVisible=!0},handleFearUpdate:function(){this.editFearGreedModel=this.fearInfo,this.editFearGreedVisible=!0},onEditFearGreedOk:function(e){var t,a,n=this,r=this.$refs.editFearGreed.form,o="";null!==(t=this.editFearGreedModel)&&void 0!==t&&t.id?(o="updateFearGreedIndex",a=this.editFearGreedModel.id):o="createFearGreedIndex",r&&r.validateFields((function(e,t){if(!e){var r=Object.assign({indexType:1},t);a&&(r.id=a),n.editFearGreedLoading=!0,i["a"][o]({info:r}).then((function(e){n.$message.success("恐贪指数已更新！"),n.onEditFearGreedCancel(),n.loadFearGreed()})).catch((function(e){n.$message.error("恐贪指数更新失败！")})).finally((function(){n.editFearGreedLoading=!1}))}}))},onEditFearGreedCancel:function(){this.editFearGreedVisible=!1;var e=this.$refs.editFearGreed.form;e&&e.resetFields()},handleFearHistory:function(){this.fearGreedHistory=!0}}},j=V,$=(a("006e"),Object(p["a"])(j,n,r,!1,null,"0a8a19b8",null));t["default"]=$.exports}}]);
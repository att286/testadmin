(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64317f4e"],{"29cb":function(t,e,n){"use strict";n("6019")},"3a14":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAMFBMVEUAAADT1dvW2N3V19zU193V193U193V2N3W193V197V193U193V2N7V193U193V191lBWaGAAAAD3RSTlMAH3jzufLk46dzWlmouqajd38eAAAAhElEQVQY02MAAkaVZDMnASADxH7/Hwh+QHhb/4OBFYjN+R8KJgA562GcX0Ad9jDOZwEGDhD9gR9EHmCQR3A+Muj/h4NPDP4Izl+GfISy7wz/EZz/yJzPqMr8IRyIAfoIzidUS3mQncMYD+N8BXpvP8wBv1E8h+5tBsZ+WIBAgqr+OzioAGe6z0IxyaurAAAAAElFTkSuQmCC"},6019:function(t,e,n){},b5cf:function(t,e,n){"use strict";n("f826")},c195b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-header-wrapper",{attrs:{title:!1}},[n("div",{staticClass:"app-container"},[n("DataChart",{ref:"ComIncome",attrs:{"chart-type":t.incomeConfig.chartType,title:t.incomeConfig.title,droplist:t.incomeConfig.droplist,"tip-txt":"展示每月收入情况"},on:{switchOption:t.switchOption}}),n("DataChart",{ref:"ComBroker",attrs:{"chart-type":t.brokerConfig.chartType,title:t.brokerConfig.title,droplist:t.brokerConfig.droplist,"tip-txt":"展示每月各个券商收入情况",preMonth:t.preMonth,curMonth:t.curMonth},on:{switchOption:t.switchOption,switchMonth_Broker:t.switchMonth_Broker}})],1)])},o=[],a=n("5530"),r=(n("159b"),n("2f62")),s={data:function(){return this.loadingInstance=null,this.channelInfoList={},{incomeConfig:{},brokerConfig:{},curChannelId:"0"}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["channelOptions","monthList"])),{},{monthShowList:function(){var t=[];return this.monthList.forEach((function(e){t.push(e.showName)})),t},multipleChnnel:function(){return"1"===this.$store.state.user.userType}}),watch:{},mounted:function(){this.multipleChnnel&&(this.curChannelId=this.channelOptions[1].value)},methods:{switchOption:function(t,e,n){t===this.incomeConfig.title?this.dropListChange_Income(e,n):this.dropListChange_Broker(e,n)}}},c=(n("d81d"),n("f306")),h={data:function(){return{}},computed:{incomeChannelId:function(){return this.incomeConfig.droplist?this.incomeConfig.droplist[0].value:this.curChannelId},incomeSubType:function(){return this.incomeConfig.droplist?this.incomeConfig.droplist[1].value:"0"}},mounted:function(){this.channelInfoList.income={},this.comIncome=this.$refs.ComIncome,this.getConfig_Income(),this.getChannelInfo_Income(this.incomeChannelId)},methods:{getConfig_Income:function(){this.incomeConfig={title:"收入分析",chartType:"bar",droplist:[{idx:0,title:"渠道:",value:this.curChannelId,list:this.channelOptions,disabled:this.multipleChnnel},{idx:1,title:"收入项:",value:0,list:[{value:0,label:"所有收入"},{value:1,label:"开户收入"},{value:2,label:"入金收入"},{value:3,label:"融资打新"},{value:4,label:"交易佣金"},{value:5,label:"课程收入"},{value:6,label:"其他收入"}]}],clickIds:{0:"202001",1:"202002",2:"202003",3:"202004",4:"202005",5:"202006",6:"202007"}}},dropListChange_Income:function(t,e){0===t?this.switchChannel_Income(e):1===t&&this.switchSubType_Income(e)},switchChannel_Income:function(t){this.getChannelInfo_Income(t)},switchSubType_Income:function(t){c["a"].recorderRequest({pageId:"200103",clickId:this.incomeConfig.clickIds[t+""]}),this.getSubInfo_Income(t)},getChannelInfo_Income:function(t){var e=this.channelInfoList.income[t];e?this.setChannelInfo_Income(t):this.getIncomeInfo(t)},getSubInfo_Income:function(){var t=this.channelInfoList.income[this.incomeChannelId];t&&this.setChannelInfo_Income(this.incomeChannelId)},getIncomeInfo:function(t){var e=this;this.comIncome.showLoading();var n=this.$store.state.user,i={dataList:[],emptyStr:""},o={channelIds:t,startMonth:n.startMonth,endMonth:n.endMonth};c["a"].incomeAnalyse(o).then((function(n){if(e.comIncome.hideLoading(),"0000"===n.responseCode&&n.channelList&&n.channelList.length){var o=l(n.channelList[0].monthList);i.dataList=o.dataList}e.channelInfoList.income[t]=i,e.setChannelInfo_Income(t)})).catch((function(n){if(e.comIncome.hideLoading(),"0001"===n.responseCode){var o=e.monthList.map((function(t){return{dataMonth:t.id,allIncome:0,openIncome:0,creditIncome:0,newIncome:0,tradeIncome:0,courseIncome:0,otherIncome:0}})),a=l(o);i.dataList=a.dataList}else i.emptyStr="数据异常";e.channelInfoList.income[t]=i,e.setChannelInfo_Income(t)}))},setChannelInfo_Income:function(t){var e=this.channelInfoList.income[t],n=this.getChartOption_Income(e);this.comIncome.setChartOption(n),this.comIncome.setEmptyStr(e.emptyStr)},getChartOption_Income:function(t){var e,n=["月收入"],i=this.monthShowList,o=t.dataList[0],a=this.incomeConfig.droplist[1],r=a.list[this.incomeSubType];return 0!==this.incomeSubType&&(n.push(r.label),e=t.dataList[this.incomeSubType]),[n,i,o,e]}}};function l(t){var e,n,i,o,a,r,s;t&&(e=[],n=[],i=[],o=[],a=[],r=[],s=[],t.forEach((function(t){e.push(t.allIncome/100),n.push(t.openIncome/100),i.push(t.creditIncome/100),o.push(t.newIncome/100),a.push(t.tradeIncome/100),r.push(t.courseIncome/100),s.push(t.otherIncome/100)})));var c=[e,n,i,o,a,r,s];return{dataList:c}}n("4de4"),n("b0c0");var u={data:function(){return{curMonth:11,preMonth:0}},computed:{brokerChannelId:function(){return this.brokerConfig.droplist?this.brokerConfig.droplist[0].value:this.curChannelId},brokerSubType:function(){return this.brokerConfig.droplist?this.brokerConfig.droplist[1].value:"0"}},mounted:function(){this.channelInfoList.broker={},this.comBroker=this.$refs.ComBroker,this.xData=[],Object.assign(this.xData,this.monthShowList),this.getConfig_Broker(),this.getChannelInfo_Broker(this.brokerChannelId)},methods:{getConfig_Broker:function(){this.brokerConfig={title:"券商收入",chartType:"pie",id:"broker",droplist:[{idx:0,title:"渠道:",value:this.curChannelId,list:this.channelOptions,disabled:this.multipleChnnel},{idx:1,title:"收入项:",value:0,list:[{value:0,label:"所有收入"},{value:1,label:"开户收入"},{value:2,label:"入金收入"},{value:3,label:"融资打新"},{value:4,label:"交易佣金"}]}],clickIds:{0:"202101",1:"202102",2:"202103",3:"202104",4:"202105"}}},dropListChange_Broker:function(t,e){0===t?this.switchChannel_Broker(e):1===t&&this.switchSubType_Broker(e)},switchChannel_Broker:function(t){this.getChannelInfo_Broker(t)},switchSubType_Broker:function(t){c["a"].recorderRequest({pageId:"200103",clickId:this.brokerConfig.clickIds[t+""]}),this.getSubInfo_Broker()},switchMonth_Broker:function(t){this.preMonth=this.curMonth,this.curMonth=t,this.getSubInfo_Broker()},getChannelInfo_Broker:function(t){var e=this.channelInfoList.broker[t];e?this.setChannelInfo_Broker(t):this.getBrokerInfo(t)},getSubInfo_Broker:function(){var t=this.channelInfoList.broker[this.brokerChannelId];t?this.setChannelInfo_Broker(this.brokerChannelId):this.getChannelInfo_Broker(this.brokerChannelId)},getBrokerInfo:function(t){var e=this;this.comBroker.showLoading();var n=this.$store.state.user,i={channelIds:t,startMonth:n.startMonth,endMonth:n.endMonth};c["a"].brokerIncome(i).then((function(n){if(e.comBroker.hideLoading(),"0000"===n.responseCode){var i={};if(n.channelList&&n.channelList.length){var o=d(n.channelList[0].monthList);i.dataList=o.dataList}e.channelInfoList.broker[t]=i,e.setChannelInfo_Broker(t)}else"0001"===n.responseCode?e.comBroker.setEmptyStr("暂无数据"):e.comBroker.setEmptyStr("数据异常"),e.comBroker.setChartOption([[],e.xData,[]])})).catch((function(t){e.comBroker.hideLoading();var n="数据异常";"0001"===t.responseCode&&(n="暂无数据"),e.comBroker.setEmptyStr(n),e.comBroker.setChartOption([[],e.xData,[]])}))},setChannelInfo_Broker:function(t){var e=this,n=this.channelInfoList.broker[t],i=this.getChartOption_Broker(n);this.$nextTick((function(){e.comBroker.setChartOption(i)}))},getChartOption_Broker:function(t){var e=["月收入"],n=this.xData,i=t.dataList[this.curMonth],o=i[this.brokerSubType]||[];return o.length?(o=o.filter((function(t){return t.value-0!==0})),o.forEach((function(t){e.push(t.name)})),o.length?this.comBroker.setEmptyStr(""):this.comBroker.setEmptyStr("本月无收入")):this.comBroker.setEmptyStr("本月港美股券商无实际结算数据"),[e,n,o]}}};function d(t){var e,n,i,o,a,r;return t&&(e=[],n=[],i=[],o=[],a=[],r=[],t.forEach((function(t,s){n[s]=[],i[s]=[],o[s]=[],a[s]=[],r[s]=[],t.brokerList.forEach((function(t,e){n[s].push({value:t.allIncome/100,name:t.brokerName}),i[s].push({value:t.openIncome/100,name:t.brokerName}),o[s].push({value:t.creditIncome/100,name:t.brokerName}),a[s].push({value:t.newIncome/100,name:t.brokerName}),r[s].push({value:t.tradeIncome/100,name:t.brokerName})})),e[s]=[n[s],i[s],o[s],a[s],r[s]]}))),{dataList:e}}var f=n("d92b"),m={name:"Home",components:{DataChart:f["a"]},mixins:[s,h,u],data:function(){return{}}},p=m,g=(n("b5cf"),n("2877")),A=Object(g["a"])(p,i,o,!1,null,"388f3888",null);e["default"]=A.exports},c7d8:function(t,e,n){"use strict";function i(){var t=new Image;return t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAADwBAMAAABh83lkAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMAEQYLAiO58h4AAAOkSURBVHja7MGBAAAAAICg/akXqQIAAAAAAAAAAAAAAABgds31Nm4YDILLRwEaUQWISAoQnQZ4dvqvKSfycK4haw6gx9/FSN9ShBaLxWKxWCwW/x+XzAlF5kCXNYFD3vwAhbu8AbznaQA2KSFX4C9IzfZlDBx6sCXfeQpdGbwVSg+8FUoZTnkSQE8SbPKEGa2BaVkEdpASx8NUIvQ7WqNnU4ntUIbRhaYSUx9NQZdcJc6mOCRbiTeNS/KU+Fs3CXZ5Soz0qbChKdHtE7GORIkjvKJ9yYo9UqbCni23MQJtmuOQmuN+aYLyrsRg+WUxFP66Zkq7GfMkwi612Q/ZrieeVOCdUIYJIyVt3wnt9jDy7MJvd3Z1wSdF+ZK4PJ/SBFx6lFfC7pdQUKTKFUdjbMrNrS0qxxw2nJ4Lmgh0qfIH0wVNpTGDjovdS6hI0UcbSYtlVYwuTJwjqmXdKxVpTFFxn4PbsrtL56vjMxQJs1kadw3aLiUal53CyjkT0hWIYKcQ9nfp16KKn8LGOW/oXx+Kfgr3OCVWZkl8mi1oKuc4pIDlv163vzQlhmL5v94/ds7oSG4QCKLNoADUoAA0FwH4NgBUvvxjMqBVbdnOoIunDwXwgFHDoKGPZUoMWbFhb9gLLFOiZ8Wmy6kw32/Lgl2Xb4V4TYkbENRyk/EYCgPbkDiQy77OHxaQx5A4MCgRzyHxNwIrm8vZe4cJZwPzxsP0cj1QeYYvHpE7Lk2JkYnJ2SqhK5GH3RKdcL3WEkSyYUrsDhHUqn0nkCemRLKhCjpk5/u7DokH5BrXHTAmdtKQ2OBig9S4A96cuR7O9gLwghTO85mJP6Y2PgfG9OnRkxugj8IJK08ISpy5sKBTvzUlPtEe8F1Sos3UyxIbrhSnRLFvUicbc38OhIwpUStXGDMri5M7jIh6ocJ5khlGArCGKpcMmeAsn321qLbBhnCCLCARb3lVq1a8D2HSUFgTBhuUiHlIy86hUPIW5cWCEkrkUEi9ZRTYmAP7ayrc9ZZRPBfT5iyUrIXT3g7cCiFYCztkgd0KAcU76YHMX/BbYVBcTSud5K9HodZh0+TaAztwnnoHopMN1hWyGRME74jekHlrcLqkwoGTBTDZvyYAITED0FWImC8W6O0/fTBut0S9WvjAs0tUy4V/Ucum1kX6D1ZwqXUC/4e6xM4lu5A+mNYG22KxWCwWi8Vi8ac9OBAAAAAAEORvPcgVAAAAAAAAAAAAAAAAsBBkKlrCt51JSwAAAABJRU5ErkJggg==",t}n.d(e,"a",(function(){return i}))},cf1e:function(t,e,n){t.exports={menuText:"#f5f6f8",menuActiveText:"#f5f6f8",subMenuActiveText:"#f4f4f5",menuBg:"#f12323",menuHover:"#9b1616",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"201.6px",scaleFactor:"1.4",scaleS:"1.3",scaleXS:"1.2",scaleMin:"1",scaleMagin:".6"}},d92b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-spin",{attrs:{spinning:t.spinning}},[i("div",{staticClass:"home-container"},[i("div",{staticClass:"top-container"},[i("div",{staticClass:"row-start-center",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"decoration"}),i("p",{staticClass:"title"},[t._v(t._s(t.title))]),t.tipTxt?i("a-tooltip",{staticClass:"tip-icon",attrs:{title:t.tipTxt,placement:"right"}},[i("img",{attrs:{src:n("3a14"),alt:""}})]):t._e()],1),i("div",{staticClass:"btmBox row-start-center"},t._l(t.droplist,(function(e){return i("div",{key:e.idx,staticClass:"info-container row-start-center"},[i("p",{staticClass:"info-title"},[t._v(t._s(e.title))]),i("a-select",{staticClass:"selector",attrs:{placeholder:"请选择",showSearch:e.search,disabled:e.disabled},on:{change:function(n){return t.switchOption(n,e.idx)}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"info.value"}},t._l(e.list,(function(e){return i("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)})),0)]),i("div",{staticClass:"chart-container",class:{"chart-container2":"pie"===t.chartType}},[t.emptyStr?i("a-empty",{staticClass:"column-center-center",staticStyle:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},attrs:{description:t.emptyStr}}):t._e(),i("div",{ref:"chart",staticClass:"chart"})],1)])])},o=[],a=(n("94b1"),n("ef97"),n("c037"),n("d28f"),n("007d"),n("b11c"),n("2909")),r=(n("a9e3"),{props:{chartType:{type:String,default:""},title:{type:String,default:"Title"},droplist:{type:Array,default:function(){return[]}},chartData:{type:Object,default:function(){}},tipTxt:{type:String,default:""},preMonth:{type:Number,default:0},curMonth:{type:Number,default:0}},data:function(){return{chartOption:null,emptyStr:"",spinning:!1}},computed:{},watch:{},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var t=this;this.chart=this.$echarts.init(this.$refs.chart,"ovilia-green"),this.$nextTick((function(){var e;"bar"===t.chartType?(e=t.chartOptionBar(),t.chart.setOption(e)):"pie"===t.chartType&&(e=t.chartOptionPie(),t.chart.setOption(e),t.chart.on("click","xAxis.category",t.onPieClickX))}))},methods:{$_isMobile:function(){},$_resizeHandler:function(){this.chart.resize()},showLoading:function(){this.spinning=!0},hideLoading:function(){this.spinning=!1},switchOption:function(t,e){this.$emit("switchOption",this.title,e,t)},setChartOption:function(t){var e;"bar"===this.chartType?(e=this.chartOptionBar.apply(this,Object(a["a"])(t)),this.chart.setOption(e,!0)):"pie"===this.chartType&&(e=this.chartOptionPie.apply(this,Object(a["a"])(t)),this.setAxis(e,this.preMonth,!1),this.setAxis(e,this.curMonth,!0),this.chart.setOption(e,!0))},onPieClickX:function(t){var e=t.event.target.anid,n=e.substr(6)-0;this.$emit("switchMonth_Broker",n)},setAxis:function(t,e,n){var i=t.xAxis[0],o=i.data[e],a=o.value?o.value:o;i.data[e]=n?{value:a,textStyle:{color:"white",backgroundColor:"#F12323",padding:[3,8],borderRadius:20}}:a},setEmptyStr:function(t){this.emptyStr=t,"bar"===this.chartType&&t&&this.chart.clear()}}}),s=n("53ca"),c=(n("159b"),n("b0c0"),n("c7d8")),h=n("cf1e"),l=n.n(h),u=l.a.scaleFactor,d={methods:{chartOptionBar:function(t,e,n,i){var o="top",a=[0,0];n&&n.length&&!n[0].mdy&&n.forEach((function(t,e){"object"!==Object(s["a"])(t)&&(n[e]={value:t}),n[e].mdy=!0,n[e].value-=0,n[e].valueOri=n[e].value,n[e].value<0&&(n[e].value=.001)})),i&&(o="insideTopRight",a=[3*u,-16*u],i.length&&!i[0].mdy&&i.forEach((function(t,e){"object"!==Object(s["a"])(t)&&(i[e]={value:t}),i[e].mdy=!0,i[e].value-=0,i[e].valueOri=i[e].value,i[e].value<0&&(i[e].value=.001)})));var r={tooltip:{show:!0,trigger:"axis",padding:[5,15,5,15],formatter:function(t){var e="";e+=t[0].name+"</br>";for(var n=0;n<t.length;n++)""!==t[n].seriesName&&(e+='<span style="display:inline-block; margin-right:5px; border-radius:50%; width:10px; height:10px; background:'+t[n].color+'"></span>',e+=t[n].seriesName+": "+t[n].data.valueOri+"</br>");return e}},grid:{show:!1,left:22*u,right:22*u,top:60,bottom:30},legend:{left:40*u,itemWidth:11*u,itemHeight:11*u,textStyle:{color:"#50576A",fontWeight:400,fontSize:7*u},data:t||["有效人数","结算金额"]},toolbox:{right:40*u,itemSize:11*u,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0,backgroundColor:"rgba(255, 255, 255, 1)",name:"梧桐栖凤平台"}}},xAxis:[{type:"category",axisLabel:{color:"#50576A",fontWeight:400,fontSize:7*u},axisLine:{show:!1},axisTick:{show:!1},axisPointer:{show:!0},data:e}],yAxis:[{type:"value",name:"",show:!0,min:0,nameTextStyle:{color:"#50576A",fontSize:7*u},axisLabel:{show:!1,color:"#50576A",fontWeight:400,fontSize:7*u,formatter:"{value}元"},axisLine:{show:!1},axisTick:{show:!1}}],series:[{name:t?t[0]:"有效人数",type:"bar",barWidth:16*u,barGap:.1,barMinHeight:2,itemStyle:{barBorderRadius:[3*u,3*u,0,0]},label:{show:!0,position:o,offset:a,color:"#50576A",fontSize:10*u,formatter:function(t){return f(t.data.valueOri)}},data:n}]};return i&&(r.series[1]={name:t?t[1]:"结算金额",type:"bar",barWidth:16*u,barGap:.1,barMinHeight:2,itemStyle:{barBorderRadius:[3*u,3*u,0,0]},label:{show:!0,position:"insideTopLeft",offset:[-a[0],a[1]],offsetOri:[-a[0],a[1]],color:"#50576A",fontSize:10*u,formatter:function(t){return"line"===t.componentSubType&&t.value-0===0?"":f(t.data.valueOri)}},data:i}),arguments.length&&(r.backgroundColor={image:Object(c["a"])()}),r}}};function f(t){return t||0===t?t:0}var m=l.a.scaleFactor,p={methods:{chartOptionPie:function(t,e,n){n&&n.length&&(n[0].mdy||n.forEach((function(t){t.mdy=!0,t.valueOri=t.value,t.value<0&&(t.value=.001)})));var i=40;i=2*(window.innerWidth/1355-1)*i+i,i=Math.min(i,70),i=Math.floor(i)+"%";var o={tooltip:{show:!0,trigger:"item",padding:[5,15,5,15],formatter:function(t){var e="";return e+='<span style="display:inline-block; margin-right:5px; border-radius:50%; width:10px; height:10px; background:'+t.color+'"></span>',e+=t.name+": "+t.data.valueOri,e}},grid:{show:!1,left:22*m,right:22*m,top:0,bottom:30},legend:{left:22*m,top:"0%",height:"90%",itemWidth:11*m,itemHeight:11*m,orient:"vertical",itemGap:20,textStyle:{color:"#50576A",fontWeight:400,fontSize:12,padding:[0,20,0,0]},data:t},xAxis:[{type:"category",triggerEvent:!0,axisLabel:{color:"rgba(80, 87, 106, 0.8)",fontWeight:400,fontSize:Math.floor(7*m),margin:0,padding:[3,8]},axisLine:{show:!1},axisTick:{show:!1},axisPointer:{show:!1},data:e}],yAxis:[{type:"value",name:"人数",nameTextStyle:{color:"#50576A",fontSize:7*m},axisLabel:{color:"#50576A",fontWeight:400,fontSize:7*m,formatter:"{value}元"},axisLine:{show:!1},axisTick:{show:!1}}],series:[{name:"",type:"pie",minAngle:.01,radius:i,center:["50%","46.4%"],data:n,itemStyle:{emphasis:{shadowBlur:8,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}}}]};return arguments.length&&(o.backgroundColor={image:Object(c["a"])()}),o}}},g={name:"ComChart",mixins:[r,d,p]},A=g,b=(n("29cb"),n("2877")),v=Object(b["a"])(A,i,o,!1,null,"ac5a6dfe",null);e["a"]=v.exports},f826:function(t,e,n){}}]);
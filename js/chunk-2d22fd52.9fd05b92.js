(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22fd52"],{ea66:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-header-wrapper",{attrs:{title:!1}},[n("a-spin",{attrs:{spinning:t.spinning}},[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{md:5,sm:24}},[t.multipleChannel?n("a-form-item",{attrs:{label:"渠道",labelCol:{span:6},wrapperCol:{span:18}}},[n("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"所有渠道","default-active-first-option":!t.multipleChannel,disabled:!t.multipleChannel,"show-arrow":!0},on:{change:t.switchChannel},model:{value:t.curChannelId,callback:function(e){t.curChannelId=e},expression:"curChannelId"}},t._l(t.channelOptions,(function(e){return n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1):t._e()],1)],1)],1)],1),n("div",{staticClass:"row-between-center",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"column-center-left"},[n("h3",[t._v("旧版结算数据")]),n("p",{staticStyle:{color:"#F12323"}},[t._v("注意：旧版结算数据展示是2022年9月之前的结算数据信息，此后的结算信息请点击“返回”，至结算中心查看。")])]),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")])],1),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"monthStr",columns:t.columns,data:t.loadData,alert:!1,scroll:{x:t.tableX},showPagination:"auto"},scopedSlots:t._u([{key:"other",fn:function(e,a){return n("span",{},[[n("a-tooltip",{attrs:{placement:"right",overlayStyle:t.toolTipStyle,title:a.otherInfo}},[n("a",[t._v(t._s(e))])])]],2)}},{key:"action",fn:function(e,a){return n("span",{},[[a.isSpecial?t._e():n("a",{staticStyle:{color:"#F12323"},on:{click:function(e){return t.handleInfo(a)}}},[t._v("查看详情")])]],2)}}])})],1)],1)],1)},o=[],r=n("5530"),i=(n("d3b7"),n("7db0"),n("b0c0"),n("159b"),n("fb6a"),n("99af"),n("c740"),n("b680"),n("a434"),n("a15b"),n("2af9")),s=n("f306"),l=n("2f62"),c={name:"BrokerList",components:{STable:i["c"]},data:function(){var t=this;return{spinning:!1,toolTipStyle:{whiteSpace:"pre-wrap"},curChannelId:"0",dataList:[],isKunPengChannel:!1,queryParam:{},loadData:function(e){var n=Object.assign({},e,t.queryParam);return t.dataList.length?new Promise((function(n,a){n(t.getTableList(e,t.dataList))})):s["a"].monthlyList(n).then((function(n){var a=t.proxyData(n);return t.dataList=a,t.getTableList(e,a)})).catch((function(){}))}}},filters:{},created:function(){var t=this;this.$root.eventHub.$on("refreshView",(function(){t.$refs.table&&t.$refs.table.refresh()}));var e=sessionStorage.getItem("MonthlyInfo");e?(e=JSON.parse(e),e.channelId&&this.channelOptions.find((function(t){return t.value===e.channelId}))&&(this.curChannelId=e.channelId,this.queryParam.channelId=this.curChannelId)):this.multipleChannel||(this.curChannelId=this.channelOptions[1].value,this.queryParam.channelId=this.curChannelId)},mounted:function(){},beforeRouteLeave:function(t,e,n){this.$root.eventHub.$off("refreshView"),"MonthlyInfo"!==t.name&&sessionStorage.removeItem("MonthlyInfo"),n()},computed:Object(r["a"])(Object(r["a"])({},Object(l["b"])(["channelOptions"])),{},{multipleChannel:function(){return"2"===this.$store.state.user.userType},columns:function(){var t=[];return t.push({title:"结算项",dataIndex:"monthStr",width:120,ellipsis:!0}),t.push({title:"有效入金数量",dataIndex:"validNum",width:120,ellipsis:!0}),this.isKunPengChannel||t.push({title:"开户奖励",dataIndex:"totalOpenAwardAmount",width:130,ellipsis:!0}),t.push({title:"有效入金奖励",dataIndex:"totalUserAwardAmount",width:130,ellipsis:!0}),this.isKunPengChannel||(t.push({title:"融资打新分成(RMB)",dataIndex:"incomePurchaseNew",width:158,ellipsis:!0}),t.push({title:"交易佣金分成(RMB)",dataIndex:"incomeCommission",width:158,ellipsis:!0}),t.push({title:"课程奖励",dataIndex:"subjectAward",width:130,ellipsis:!0}),t.push({title:"其他奖励",dataIndex:"other",width:130,scopedSlots:{customRender:"other"}})),t.push({title:"结算金额(含税)",dataIndex:"balanceAmount",width:140,ellipsis:!0}),t.push({title:"操作",dataIndex:"",width:90,scopedSlots:{customRender:"action"}}),t},tableX:function(){var t=0;return this.columns.forEach((function(e){t+=e.width})),t}}),watch:{curChannelId:function(t,e){var n=this;this.isKunPengChannel=!1,this.channelOptions.forEach((function(e){e.value===t&&"12"===e.type&&(n.isKunPengChannel=!0)}))}},methods:{getTableList:function(t,e){var n=t.pageNo,a=t.pageSize,o=(n-1)*a,r=o+a,i=e.slice(o,r);return{totalCount:e.length,data:i,pageNo:+t.pageNo}},handleInfo:function(t){t&&(t.channelId=this.curChannelId,sessionStorage.setItem("MonthlyInfo",JSON.stringify(t)),this.$router.push({path:"/monthly-info"}))},switchChannel:function(t){this.queryParam.channelId=this.curChannelId,this.dataList=[],this.$refs.table.refresh(!0)},proxyData:function(t){var e=this,n=t.monthlyList;return n.forEach((function(t){t.monthStr=t.balanceMonth;var n=t.balanceMonth;if(n){var a=n.substr(0,4),o=n.substr(4);t.monthStr="".concat(a,"年").concat(o,"月"),t.other=e.getOtherReward(t),t.otherInfo=e.getOtherRewardStr(t)}})),t.specialRecordList&&t.specialRecordList.length&&t.specialRecordList.forEach((function(t){var a=n.findIndex((function(e){return e.balanceMonth<=t.dateMonth}));(a>-1||0===n.length)&&(t.isSpecial=!0,t.monthStr=t.recordTitle,t.insteadOperator=parseFloat((t.insteadOperator/100).toFixed(2)),t.wolfAward=parseFloat((t.wolfAward/100).toFixed(2)),t.subjectAward=parseFloat((t.subjectAward/100).toFixed(2)),t.reachAward=parseFloat((t.reachAward/100).toFixed()),t.balanceAmount=parseFloat((t.balanceAmount/100).toFixed(2)),t.totalOpenAwardAmount=parseFloat((t.totalOpenAwardAmount/100).toFixed(2)),t.totalUserAwardAmount=parseFloat((t.totalUserAwardAmount/100).toFixed(2)),t.incomePurchaseNew=parseFloat((t.incomePurchaseNew/100).toFixed(2)),t.incomeCommission=parseFloat((t.incomeCommission/100).toFixed(2)),t.otherAward=(t.otherAward/100).toFixed(2),t.other=e.getOtherReward(t),t.otherInfo=e.getOtherRewardStr(t),a>-1?n.splice(a,0,t):n.push(t))})),n},getOtherReward:function(t){var e=t.reachAward+t.wolfAward+t.insteadOperator;return t.incomeStockA&&(e+=t.incomeStockA),t.incomeReplenish&&(e+=t.incomeReplenish),t.incomeHkCard&&(e+=t.incomeHkCard),e.toFixed(2)},getOtherRewardStr:function(t){var e=[];return 0!==t.reachAward&&e.push("达量奖励："+t.reachAward.toFixed(2)),0!==t.insteadOperator&&e.push("渠道代运营："+t.insteadOperator.toFixed(2)),0!==t.wolfAward&&e.push("战狼分成奖励："+t.wolfAward.toFixed(2)),t.incomeStockA&&0!==t.incomeStockA&&e.push("A股奖励："+t.incomeStockA.toFixed(2)),t.incomeReplenish&&0!==t.incomeReplenish&&e.push("调账金额："+t.incomeReplenish.toFixed(2)),t.incomeHkCard&&0!==t.incomeHkCard&&e.push("港卡奖励："+t.incomeHkCard.toFixed(2)),e.join("\r\n")}}},h=c,d=n("2877"),u=Object(d["a"])(h,a,o,!1,null,"615f4aee",null);e["default"]=u.exports}}]);